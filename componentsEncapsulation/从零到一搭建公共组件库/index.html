<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>从零到一搭建公共组件库 | Sewen 博客</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="./mylogo.png">
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
    <link rel="manifest" href="/myblog/manifest.webmanifest" crossorigin="use-credentials">
    <link rel="alternate" type="application/atom+xml" href="https://sewar-x.github.io/myblog/atom.xml" title="Sewen 博客 Atom Feed">
    <link rel="alternate" type="application/json" href="https://sewar-x.github.io/myblog/rss.xml" title="Sewen 博客 JSON Feed">
    <link rel="alternate" type="application/rss+xml" href="https://sewar-x.github.io/myblog/rss.xml" title="Sewen 博客 RSS Feed">
    <meta name="description" content="sewen 的前端学习笔记、博客、前端基础总结、技术深度剖析、面试题总结、算法总结、项目过程总结">
    <meta property="og:url" content="https://sewar-x.github.io/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93.html">
    <meta property="og:site_name" content="Sewen 博客">
    <meta property="og:title" content="从零到一搭建公共组件库">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="en-US">
    <meta name="theme-color" content="#46bd87">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <link rel="preload" href="/myblog/assets/css/0.styles.645fbc6f.css" as="style"><link rel="preload" href="/myblog/assets/js/app.9d2b617a.js" as="script"><link rel="preload" href="/myblog/assets/js/layout-Layout.d2d4ce64.js" as="script"><link rel="preload" href="/myblog/assets/js/page-从零到一搭建公共组件库.93278073.js" as="script"><link rel="preload" href="/myblog/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-components/Blog/BlogHome~layout-components/~2222f443.5835591a.js" as="script"><link rel="prefetch" href="/myblog/assets/js/199.a9216960.js"><link rel="prefetch" href="/myblog/assets/js/200.4c66fc79.js"><link rel="prefetch" href="/myblog/assets/js/layout-Blog.1fca7e90.js"><link rel="prefetch" href="/myblog/assets/js/layout-NotFound.3c74e8aa.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/AlgoliaSearch/Dropdown.70fcebe7.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Anchor.3235541c.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/ArticleInfo.7b815b20.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/ArticleItem.b0e177e1.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/ArticleList.d1cf1b24.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/ArticleType.b630b80e.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/BlogHero.621312ba.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/BlogHome.4fe44489.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/BlogInfo.b2a94760.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/BlogPage.e0fbe820.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/BloggerInfo.0df38355.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/CategoryList.ec1bcd96.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/ProjectList.8550a110.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/TagList.bcf7b782.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/Timeline.b6cf5471.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/TimelineList.3c6e08a6.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Clipboard.e940a903.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Common.820a8694.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Home.70383986.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/MyTransition.0de46069.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Navbar/DropdownLink.e3f6c118.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Navbar/NavLink.93b11770.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Navbar/NavLinks.8ba214e6.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Navbar/Navbar.b90a94f9.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Navbar/RepoLink.663a7f55.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Navbar/SidebarButton.76b0035a.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Page.98b5d09c.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/PageFooter.20bc9bd8.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/PageMeta.b7e6b12f.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/PageNav.8305dd1f.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Password.45e0e82a.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Sidebar/DropdownTransition.068c5eea.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Sidebar/Sidebar.f6f90d52.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Sidebar/SidebarDropdownLink.505127a8.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Sidebar/SidebarGroup.7eecf370.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Sidebar/SidebarLink.6e39fe32.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Sidebar/SidebarNavLinks.0f8566cb.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Theme/DarkmodeSwitch.20ac7b92.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Theme/ThemeColor.6086e4ed.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Theme/ThemeOptions.483238c9.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/ArticleIcon.0a22e2b1.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/AutoIcon.2ff1c790.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/BookIcon.419b49ba.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/DarkIcon.7d81873b.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/EditIcon.8ada485d.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/EmptyIcon.d704a5cf.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/I18nIcon.ffad8b3e.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/LightIcon.47d807da.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/LinkIcon.1a8a7826.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/LockIcon.a29a2b79.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/NextIcon.0214ee59.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/Page404Icon.8bc1ebbb.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/PresentationIcon.17500d9b.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/PrevIcon.2ae04a70.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/ProjectIcon.b336d567.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/StickyIcon.0f509b9d.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Baidu.244b9a41.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Bitbucket.11ba94e1.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Dingding.e8a3d90d.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Discord.3295a55b.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Dribbble.464dac3b.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Email.f9254caa.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Evernote.991472fb.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Facebook.08e78e47.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Flipboard.a1124d0f.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Gitee.c44bc20a.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Github.5667e5ae.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Gitlab.ad95c7a7.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Gmail.b5acc6bc.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Instagram.56be85f2.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Lines.d9db3dce.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Linkedin.b82d8d8b.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Pinterest.0f3ffe71.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Pocket.41ef3c92.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/QQ.7558f4ba.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Qzone.bf658fae.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Reddit.9c4c95ee.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Rss.9780139e.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Steam.06abbae2.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Twitter.26fa5bda.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Wechat.9cac8c4c.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Weibo.5206a632.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Whatsapp.0738f1e3.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Youtube.f41fd7f2.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Zhihu.4d851d2f.js"><link rel="prefetch" href="/myblog/assets/js/page--0abc50bf.0d6f1484.js"><link rel="prefetch" href="/myblog/assets/js/page--1cd40f4c.dd76c7b3.js"><link rel="prefetch" href="/myblog/assets/js/page--53f93199.e80bdec8.js"><link rel="prefetch" href="/myblog/assets/js/page--5afd2fd0.adea4e92.js"><link rel="prefetch" href="/myblog/assets/js/page--67c584d3.0a3f3cd9.js"><link rel="prefetch" href="/myblog/assets/js/page--776a8506.cdf48aac.js"><link rel="prefetch" href="/myblog/assets/js/page-CSS.eb94b29f.js"><link rel="prefetch" href="/myblog/assets/js/page-Chrome开发工具使用指南.a2675120.js"><link rel="prefetch" href="/myblog/assets/js/page-DevServer.0281863d.js"><link rel="prefetch" href="/myblog/assets/js/page-Echarts二次封装.4387b8ad.js"><link rel="prefetch" href="/myblog/assets/js/page-Elementui与Element-plusui二次封装.82f12a09.js"><link rel="prefetch" href="/myblog/assets/js/page-Git基础.03c616ad.js"><link rel="prefetch" href="/myblog/assets/js/page-Git规范.e2fdc38a.js"><link rel="prefetch" href="/myblog/assets/js/page-HTML.1e3c14b9.js"><link rel="prefetch" href="/myblog/assets/js/page-Home.f0b7e772.js"><link rel="prefetch" href="/myblog/assets/js/page-JSON配置化组件二次封装.12060fd9.js"><link rel="prefetch" href="/myblog/assets/js/page-JS原理实现.3c427e19.js"><link rel="prefetch" href="/myblog/assets/js/page-JS应用题.3d313b34.js"><link rel="prefetch" href="/myblog/assets/js/page-JavaScript基础.551be887.js"><link rel="prefetch" href="/myblog/assets/js/page-Linux.c6159ebd.js"><link rel="prefetch" href="/myblog/assets/js/page-Loader和Plugin原理.b2971b76.js"><link rel="prefetch" href="/myblog/assets/js/page-MySQL.0b1d704a.js"><link rel="prefetch" href="/myblog/assets/js/page-NPM.a55851b2.js"><link rel="prefetch" href="/myblog/assets/js/page-Node.ec405a21.js"><link rel="prefetch" href="/myblog/assets/js/page-Nodejs常见问题集合.12844e69.js"><link rel="prefetch" href="/myblog/assets/js/page-Node性能优化.b4ea1c34.js"><link rel="prefetch" href="/myblog/assets/js/page-Promise专题.7869a31b.js"><link rel="prefetch" href="/myblog/assets/js/page-React.d76cf0ac.js"><link rel="prefetch" href="/myblog/assets/js/page-SSG移动端项目实践.2122615b.js"><link rel="prefetch" href="/myblog/assets/js/page-TypeScript.4f597fda.js"><link rel="prefetch" href="/myblog/assets/js/page-Vite.637881bf.js"><link rel="prefetch" href="/myblog/assets/js/page-Vite原理解析.6677fdb4.js"><link rel="prefetch" href="/myblog/assets/js/page-Vue25项目webpack构建分析.7bbea0fa.js"><link rel="prefetch" href="/myblog/assets/js/page-Vue2VsVue3.10be4140.js"><link rel="prefetch" href="/myblog/assets/js/page-Vue2x原理源码分析.e9e753b6.js"><link rel="prefetch" href="/myblog/assets/js/page-Vue3基础.210247ff.js"><link rel="prefetch" href="/myblog/assets/js/page-Vue3源码分析.17379e04.js"><link rel="prefetch" href="/myblog/assets/js/page-VueCli源码分析.afc3c83f.js"><link rel="prefetch" href="/myblog/assets/js/page-VueRouter原理分析.0a092eb6.js"><link rel="prefetch" href="/myblog/assets/js/page-VueSSR原理分析.63006040.js"><link rel="prefetch" href="/myblog/assets/js/page-VueVsReact.2156be28.js"><link rel="prefetch" href="/myblog/assets/js/page-Vuex原理分析.5ba3e6e4.js"><link rel="prefetch" href="/myblog/assets/js/page-WEB安全.5aa0eeef.js"><link rel="prefetch" href="/myblog/assets/js/page-WebPack构建原理.9c29703e.js"><link rel="prefetch" href="/myblog/assets/js/page-webpackAPI分析.4c8b152b.js"><link rel="prefetch" href="/myblog/assets/js/page-webpack优化.dcc6c3bc.js"><link rel="prefetch" href="/myblog/assets/js/page-webpack基础.3820ee6c.js"><link rel="prefetch" href="/myblog/assets/js/page-webpack项目实践.77e22417.js"><link rel="prefetch" href="/myblog/assets/js/page-一次后台管理系统的性能优化.7c2d8712.js"><link rel="prefetch" href="/myblog/assets/js/page-从零到一搭建SSR项目.855376fc.js"><link rel="prefetch" href="/myblog/assets/js/page-从零到一搭建Vue2项目和规范设计.93017fd2.js"><link rel="prefetch" href="/myblog/assets/js/page-从零到一搭建Vue3单页面应用.de152d54.js"><link rel="prefetch" href="/myblog/assets/js/page-从零到一搭建移动端SSG项目.9c113d06.js"><link rel="prefetch" href="/myblog/assets/js/page-使用docker部署Node服务.5cf328fd.js"><link rel="prefetch" href="/myblog/assets/js/page-分治.e3dfc22d.js"><link rel="prefetch" href="/myblog/assets/js/page-前端发版静态资源404问题.9eb1ca89.js"><link rel="prefetch" href="/myblog/assets/js/page-前端存储.cd82cf54.js"><link rel="prefetch" href="/myblog/assets/js/page-前端工程化.1e6e58d0.js"><link rel="prefetch" href="/myblog/assets/js/page-前端性能优化方案.83718d22.js"><link rel="prefetch" href="/myblog/assets/js/page-前端架构实践.171dbc0f.js"><link rel="prefetch" href="/myblog/assets/js/page-前端渲染架构.3b783de8.js"><link rel="prefetch" href="/myblog/assets/js/page-前端自动部署.5076846c.js"><link rel="prefetch" href="/myblog/assets/js/page-前端部署原理.82ecd8a7.js"><link rel="prefetch" href="/myblog/assets/js/page-动态规划.a3af92f1.js"><link rel="prefetch" href="/myblog/assets/js/page-哈希表.c76000e8.js"><link rel="prefetch" href="/myblog/assets/js/page-回溯算法.cd914c32.js"><link rel="prefetch" href="/myblog/assets/js/page-图.dfd9828a.js"><link rel="prefetch" href="/myblog/assets/js/page-基础.7bf5a37b.js"><link rel="prefetch" href="/myblog/assets/js/page-堆.4657e538.js"><link rel="prefetch" href="/myblog/assets/js/page-字符串.252f2a08.js"><link rel="prefetch" href="/myblog/assets/js/page-异步编程.904f4c65.js"><link rel="prefetch" href="/myblog/assets/js/page-性能优化指标和监控.f2175836.js"><link rel="prefetch" href="/myblog/assets/js/page-排序算法.c7a51b99.js"><link rel="prefetch" href="/myblog/assets/js/page-搭建低代码平台.19eaf5ec.js"><link rel="prefetch" href="/myblog/assets/js/page-操作系统.473c4281.js"><link rel="prefetch" href="/myblog/assets/js/page-数学运算.c82748fb.js"><link rel="prefetch" href="/myblog/assets/js/page-数据结构算法.84480586.js"><link rel="prefetch" href="/myblog/assets/js/page-数组.692b0d0a.js"><link rel="prefetch" href="/myblog/assets/js/page-权限管理.c7e10db0.js"><link rel="prefetch" href="/myblog/assets/js/page-查找.790e52df.js"><link rel="prefetch" href="/myblog/assets/js/page-栈和队列.8dbc3586.js"><link rel="prefetch" href="/myblog/assets/js/page-树.24efdeaa.js"><link rel="prefetch" href="/myblog/assets/js/page-浏览器.bee9ec04.js"><link rel="prefetch" href="/myblog/assets/js/page-混合桌面应用开发.9e10d1c3.js"><link rel="prefetch" href="/myblog/assets/js/page-登录.bb830451.js"><link rel="prefetch" href="/myblog/assets/js/page-目录.c85b4d0b.js"><link rel="prefetch" href="/myblog/assets/js/page-移动端开发.56ac22ec.js"><link rel="prefetch" href="/myblog/assets/js/page-组件和组件封装.b5e86da2.js"><link rel="prefetch" href="/myblog/assets/js/page-计算机网络基础.0a106662.js"><link rel="prefetch" href="/myblog/assets/js/page-设计模式.ffdc7cfd.js"><link rel="prefetch" href="/myblog/assets/js/page-调试技巧.485ae36e.js"><link rel="prefetch" href="/myblog/assets/js/page-贪心算法.0f417640.js"><link rel="prefetch" href="/myblog/assets/js/page-输入url到页面展示全过程.510aef2e.js"><link rel="prefetch" href="/myblog/assets/js/page-递归.5e55e552.js"><link rel="prefetch" href="/myblog/assets/js/page-链表.1cf6927f.js"><link rel="prefetch" href="/myblog/assets/js/page-项目总结.ffcd2a4b.js"><link rel="prefetch" href="/myblog/assets/js/vendors~docsearch.f3877d0d.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-components/Blog/BlogHome~layout-components/~5d377965.d9712593.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-Blog~layout-Layout~layout-components/Blog/ArticleItem~layout-components/Blog/ArticleL~b56f3aac.47bb5cb5.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-NotFound~layout-components/Common~layout-components/Page.57d58db9.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-Slide.81546b3b.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-components/AlgoliaSearch/Full.b30f067a.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-components/Blog/BlogPage.bcccbd38.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-components/Navbar/Navbar.e2a7361e.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-components/Page.6c65077c.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-components/Sidebar/Sidebar.34cd9cf7.js"><link rel="prefetch" href="/myblog/assets/js/vendors~photo-swipe.428df1da.js">
    <link rel="stylesheet" href="/myblog/assets/css/0.styles.645fbc6f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-sidebar has-anchor"><header class="navbar"><!----> <div class="content__navbar-start"></div> <button title="Sidebar Button" class="sidebar-button"><span class="icon"></span></button> <a href="/myblog/" class="home-link router-link-active"><img src="./mylogo.png" alt="Sewen 博客" class="logo"> <!----> <span class="site-name can-hide">Sewen 博客</span></a> <!----> <div class="content__navbar-center"></div> <div class="links"><button tabindex="-1" aria-hidden="true" class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">Theme Color:</label> <li><span class="default-theme"></span></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">Theme Mode:</label> <div class="darkmode-switch"><div class="item day"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon light-icon"><path d="M512 256a42.667 42.667 0 0 0 42.667-42.667V128a42.667 42.667 0 0 0-85.334 0v85.333A42.667 42.667 0 0 0 512 256zm384 213.333h-85.333a42.667 42.667 0 0 0 0 85.334H896a42.667 42.667 0 0 0 0-85.334zM256 512a42.667 42.667 0 0 0-42.667-42.667H128a42.667 42.667 0 0 0 0 85.334h85.333A42.667 42.667 0 0 0 256 512zm9.387-298.667a42.667 42.667 0 0 0-59.307 62.72l61.44 59.307a42.667 42.667 0 0 0 31.147 11.947 42.667 42.667 0 0 0 30.72-13.227 42.667 42.667 0 0 0 0-60.16zm459.946 133.974a42.667 42.667 0 0 0 29.44-11.947l61.44-59.307a42.667 42.667 0 0 0-57.6-62.72l-61.44 60.587a42.667 42.667 0 0 0 0 60.16 42.667 42.667 0 0 0 28.16 13.227zM512 768a42.667 42.667 0 0 0-42.667 42.667V896a42.667 42.667 0 0 0 85.334 0v-85.333A42.667 42.667 0 0 0 512 768zm244.48-79.36a42.667 42.667 0 0 0-59.307 61.44l61.44 60.587a42.667 42.667 0 0 0 29.44 11.946 42.667 42.667 0 0 0 30.72-12.8 42.667 42.667 0 0 0 0-60.586zm-488.96 0-61.44 59.307a42.667 42.667 0 0 0 0 60.586 42.667 42.667 0 0 0 30.72 12.8 42.667 42.667 0 0 0 28.587-10.666l61.44-59.307a42.667 42.667 0 0 0-59.307-61.44zM512 341.333A170.667 170.667 0 1 0 682.667 512 170.667 170.667 0 0 0 512 341.333z" fill="currentColor"></path></svg></div> <div class="item auto active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon auto-icon"><path d="M460.864 539.072H564.8L510.592 376l-49.728 163.072zM872 362.368V149.504H659.648L510.528 0l-149.12 149.504H149.12v212.928L0 511.872l149.12 149.504v212.928h212.352l149.12 149.504 149.12-149.504h212.352V661.376l149.12-149.504L872 362.368zM614.464 693.12l-31.616-90.624H438.272l-31.616 90.624h-85.888l144.576-407.68h90.368l144.576 407.68h-85.824zm0 0" fill="currentColor"></path></svg></div> <div class="item night"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon dark-icon"><path d="M935.539 630.402c-11.43-11.432-28.674-14.739-43.531-8.354-46.734 20.103-96.363 30.297-147.508 30.297-99.59 0-193.221-38.784-263.64-109.203-108.637-108.637-139.61-270.022-78.908-411.148a39.497 39.497 0 0 0-51.886-51.887c-52.637 22.64-100.017 54.81-140.826 95.616-85.346 85.346-132.346 198.821-132.346 319.52 0 120.7 47.001 234.172 132.347 319.519S408.063 947.11 528.76 947.11c120.7 0 234.172-47.003 319.52-132.351 40.809-40.81 72.978-88.19 95.616-140.826a39.497 39.497 0 0 0-8.356-43.532z" fill="currentColor"></path></svg></div></div> <!----></div></div></div></button> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/myblog/" class="nav-link router-link-active"><!---->
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Front-end Basics" class="dropdown-title"><span class="title"><!---->
        前端基础
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/html/" class="nav-link"><!---->
  HTML
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/css/" class="nav-link"><!---->
  Css
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/javascript/" class="nav-link"><!---->
  JavaScript
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/typescript/" class="nav-link"><!---->
  TypeScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title"><!---->
        计算机基础
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/algorithms/" class="nav-link"><!---->
  数据结构和算法
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/network/" class="nav-link"><!---->
  计算机网络/HTTP
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/network/输入url到页面展示全过程/" class="nav-link"><!---->
  输入url到页面展示全过程
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/operating-system/" class="nav-link"><!---->
  操作系统
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/design-model/" class="nav-link"><!---->
  设计模式
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/Web-Security/" class="nav-link"><!---->
  Web安全
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架和源码分析" class="dropdown-title"><span class="title"><!---->
        框架和源码分析
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/vue/Vue2原理和源码分析.html" class="nav-link"><!---->
  Vue 专题
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/React/" class="nav-link"><!---->
  React 专题
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/webpack/webpack构建原理.html" class="nav-link"><!---->
  webpack 专题
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/vite/" class="nav-link"><!---->
  vite 专题
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/axios/" class="nav-link"><!---->
  Axios 专题
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="浏览器" class="dropdown-title"><span class="title"><!---->
        浏览器
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/browser/浏览器原理/" class="nav-link"><!---->
  浏览器原理
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/browser/前端缓存和存储/" class="nav-link"><!---->
  前端缓存和存储
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/performance/前端调试技巧/" class="nav-link"><!---->
  前端调试技巧
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="node.js" class="dropdown-title"><span class="title"><!---->
        服务器
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/node/" class="nav-link"><!---->
  Node.js
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/linux/" class="nav-link"><!---->
  Linux
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/mysql/" class="nav-link"><!---->
  MySQL
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/nginx/" class="nav-link"><!---->
  Nginx
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/docker/" class="nav-link"><!---->
  Docker
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="浏览器和性能优化" class="dropdown-title"><span class="title"><!---->
        性能优化
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/performance/性能优化指标和监控/" class="nav-link"><!---->
  性能优化指标和监控
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/performance/前端性能优化方案/" class="nav-link"><!---->
  前端性能优化方案
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/performance/一次管理后台的渲染优化/" class="nav-link"><!---->
  一次管理后台的渲染优化
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端工程" class="dropdown-title"><span class="title"><!---->
        前端工程
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/Front-end-Engineering/前端工程化/" class="nav-link"><!---->
  前端工程化
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/Front-end-Engineering/前端渲染架构/" class="nav-link"><!---->
  前端渲染架构
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/Front-end-Engineering/前端架构实践/" class="nav-link"><!---->
  前端架构实践
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/Front-end-Engineering/npm/" class="nav-link"><!---->
  npm
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/git/" class="nav-link"><!---->
  Git
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/projectDeploy/自动构建和部署/" class="nav-link"><!---->
  自动构建和部署
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目实践" class="dropdown-title"><span class="title"><!---->
        项目实践
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/projectDeploy/" class="nav-link"><!---->
  前端部署
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/componentsEncapsulation/组件和组件封装实践.html" class="nav-link"><!---->
  组件和组件封装实践
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/projectsSummary/登录与单点登录/" class="nav-link"><!---->
  登录与单点登录
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/projectsSummary/权限管理方案实践/" class="nav-link"><!---->
  权限管理方案实践
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/projectsSummary/Echarts二次封装实践/" class="nav-link"><!---->
  Echarts二次封装实践
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/projectsSummary/文档在线预览和编辑方案/" class="nav-link"><!---->
  文档在线预览和编辑方案
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/projectsSummary/移动端开发实践/" class="nav-link"><!---->
  移动端开发实践
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目搭建到原理分析" class="dropdown-title"><span class="title"><!---->
        项目搭建
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/projectsSummary/从零到一搭建SSR项目/" class="nav-link"><!---->
  从零到一搭建SSR项目
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/projectsSummary/从零到一搭建移动端SSG项目/" class="nav-link"><!---->
  从零到一搭建移动端SSG项目
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/projectsSummary/移动端SSG项目实践/" class="nav-link"><!---->
  移动端SSG项目实践
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/projectsSummary/从零到一搭建Vue2工程化项目/" class="nav-link"><!---->
  从零到一搭建Vue2工程化项目
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/projectsSummary/从零到一搭建Vue3工程化项目/" class="nav-link"><!---->
  从零到一搭建Vue3工程化项目
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/projectsSummary/搭建低代码平台/" class="nav-link"><!---->
  搭建低代码平台
</a></li><li class="dropdown-item"><a href="/myblog/componentsEncapsulation/projectsSummary/混合桌面应用开发实践/" class="nav-link"><!---->
  混合桌面应用开发实践
</a></li></ul></div></div></nav> <!----> <!----> <!----> <div class="content__navbar-end"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><div vocab="https://schema.org/" typeof="Person" class="blogger-info mobile"><div data-balloon-pos="down" role="navigation" class="blogger hasIntro"><img property="image" alt="Blogger Avatar" src="./mylogo.png" class="avatar round"> <div property="name" class="name">Sewen 博客</div> <meta property="url" content="../outline.md"></div> <div class="num-wrapper"><div><div class="num">91</div> <div>Articles</div></div> <div><div class="num">0</div> <div>Category</div></div> <div><div class="num">0</div> <div>Tags</div></div> <div><div class="num">91</div> <div>Timeline</div></div></div> <div class="media-links-wrapper"><a href="https://github.com/Sewar-x/myblog" rel="noopener noreferrer" target="_blank" aria-label="Github" data-balloon-pos="up" class="media-link"><span class="sr-only">Github</span> <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon icon-github"><circle cx="512" cy="512" r="512" fill="#171515"></circle> <path d="M509.423 146.442c-200.317 0-362.756 162.42-362.756 362.8 0 160.266 103.936 296.24 248.109 344.217 18.139 3.327 24.76-7.872 24.76-17.486 0-8.613-.313-31.427-.49-61.702-100.912 21.923-122.205-48.63-122.205-48.63-16.495-41.91-40.28-53.067-40.28-53.067-32.937-22.51 2.492-22.053 2.492-22.053 36.407 2.566 55.568 37.386 55.568 37.386 32.362 55.438 84.907 39.43 105.58 30.143 3.296-23.444 12.667-39.43 23.032-48.498-80.557-9.156-165.246-40.28-165.246-179.297 0-39.604 14.135-71.988 37.342-97.348-3.731-9.178-16.18-46.063 3.556-96.009 0 0 30.46-9.754 99.76 37.19 28.937-8.048 59.97-12.071 90.823-12.211 30.807.14 61.843 4.165 90.822 12.21 69.26-46.944 99.663-37.189 99.663-37.189 19.792 49.946 7.34 86.831 3.61 96.01 23.25 25.359 37.29 57.742 37.29 97.347 0 139.366-84.82 170.033-165.637 179.013 13.026 11.2 24.628 33.342 24.628 67.182 0 48.498-.445 87.627-.445 99.521 0 9.702 6.535 20.988 24.945 17.444 144.03-48.067 247.881-183.95 247.881-344.175 0-200.378-162.442-362.798-362.802-362.798z" fill="#FFF"></path></svg></a><a href="1567910907" rel="noopener noreferrer" target="_blank" aria-label="Wechat" data-balloon-pos="up" class="media-link"><span class="sr-only">Wechat</span> <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon icon-wechat"><circle cx="512" cy="512" r="512" fill="#1AC88E"></circle> <path d="M827.551 578.742a176.583 176.583 0 0 0-185.685-158.379 172.942 172.942 0 0 0-186.3 158.379 172.942 172.942 0 0 0 185.686 158.379 282.169 282.169 0 0 0 65.536-10.923l60.689 32.768-16.384-54.613a166.275 166.275 0 0 0 76.458-125.611zm-245.76-27.307a21.845 21.845 0 1 1 0-43.69 24.872 24.872 0 0 1 27.307 21.845 24.872 24.872 0 0 1-27.921 21.845h.614zm121.356 0a21.845 21.845 0 1 1 0-43.69 24.872 24.872 0 0 1 27.306 21.845 24.872 24.872 0 0 1-28.512 21.845h1.206z" fill="#FFF"></path> <path d="M623.662 400.953h21.23A222.709 222.709 0 0 0 419.772 245.6a208.145 208.145 0 0 0-223.323 189.94 182.044 182.044 0 0 0 89.201 150.483l-22.436 67.356 78.279-39.435a389.575 389.575 0 0 0 78.279 10.923h20.616a163.226 163.226 0 0 1-6.667-46.718 182.044 182.044 0 0 1 189.94-177.197zm-121.379-60.69a27.921 27.921 0 1 1 0 55.843 31.562 31.562 0 0 1-33.36-27.921 31.562 31.562 0 0 1 34.59-27.921h-1.23zM346.34 396.107a31.562 31.562 0 0 1-33.383-27.921 31.562 31.562 0 0 1 33.383-27.921 27.921 27.921 0 1 1 0 55.842z" fill="#FFF"></path></svg></a></div></div> <hr> <!----> <div class="content__sidebar-top"></div> <nav class="sidebar-nav-links"><div class="nav-item"><a href="/myblog/" class="nav-link router-link-active"><!---->
  首页
</a></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="Front-end Basics" class="dropdown-title"><span class="title"><!---->
      前端基础
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/html/" class="nav-link"><!---->
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/css/" class="nav-link"><!---->
  Css
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/javascript/" class="nav-link"><!---->
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/typescript/" class="nav-link"><!---->
  TypeScript
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title"><!---->
      计算机基础
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/algorithms/" class="nav-link"><!---->
  数据结构和算法
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/network/" class="nav-link"><!---->
  计算机网络/HTTP
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/network/输入url到页面展示全过程/" class="nav-link"><!---->
  输入url到页面展示全过程
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/operating-system/" class="nav-link"><!---->
  操作系统
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/design-model/" class="nav-link"><!---->
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/Web-Security/" class="nav-link"><!---->
  Web安全
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="框架和源码分析" class="dropdown-title"><span class="title"><!---->
      框架和源码分析
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/vue/Vue2原理和源码分析.html" class="nav-link"><!---->
  Vue 专题
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/React/" class="nav-link"><!---->
  React 专题
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/webpack/webpack构建原理.html" class="nav-link"><!---->
  webpack 专题
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/vite/" class="nav-link"><!---->
  vite 专题
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/axios/" class="nav-link"><!---->
  Axios 专题
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="浏览器" class="dropdown-title"><span class="title"><!---->
      浏览器
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/browser/浏览器原理/" class="nav-link"><!---->
  浏览器原理
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/browser/前端缓存和存储/" class="nav-link"><!---->
  前端缓存和存储
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/performance/前端调试技巧/" class="nav-link"><!---->
  前端调试技巧
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="node.js" class="dropdown-title"><span class="title"><!---->
      服务器
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/node/" class="nav-link"><!---->
  Node.js
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/linux/" class="nav-link"><!---->
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/mysql/" class="nav-link"><!---->
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/nginx/" class="nav-link"><!---->
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/docker/" class="nav-link"><!---->
  Docker
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="浏览器和性能优化" class="dropdown-title"><span class="title"><!---->
      性能优化
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/performance/性能优化指标和监控/" class="nav-link"><!---->
  性能优化指标和监控
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/performance/前端性能优化方案/" class="nav-link"><!---->
  前端性能优化方案
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/performance/一次管理后台的渲染优化/" class="nav-link"><!---->
  一次管理后台的渲染优化
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="前端工程" class="dropdown-title"><span class="title"><!---->
      前端工程
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/Front-end-Engineering/前端工程化/" class="nav-link"><!---->
  前端工程化
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/Front-end-Engineering/前端渲染架构/" class="nav-link"><!---->
  前端渲染架构
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/Front-end-Engineering/前端架构实践/" class="nav-link"><!---->
  前端架构实践
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/Front-end-Engineering/npm/" class="nav-link"><!---->
  npm
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/git/" class="nav-link"><!---->
  Git
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/projectDeploy/自动构建和部署/" class="nav-link"><!---->
  自动构建和部署
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="项目实践" class="dropdown-title"><span class="title"><!---->
      项目实践
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/projectDeploy/" class="nav-link"><!---->
  前端部署
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/componentsEncapsulation/组件和组件封装实践.html" class="nav-link"><!---->
  组件和组件封装实践
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/projectsSummary/登录与单点登录/" class="nav-link"><!---->
  登录与单点登录
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/projectsSummary/权限管理方案实践/" class="nav-link"><!---->
  权限管理方案实践
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/projectsSummary/Echarts二次封装实践/" class="nav-link"><!---->
  Echarts二次封装实践
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/projectsSummary/文档在线预览和编辑方案/" class="nav-link"><!---->
  文档在线预览和编辑方案
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/projectsSummary/移动端开发实践/" class="nav-link"><!---->
  移动端开发实践
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="项目搭建到原理分析" class="dropdown-title"><span class="title"><!---->
      项目搭建
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/projectsSummary/从零到一搭建SSR项目/" class="nav-link"><!---->
  从零到一搭建SSR项目
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/projectsSummary/从零到一搭建移动端SSG项目/" class="nav-link"><!---->
  从零到一搭建移动端SSG项目
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/projectsSummary/移动端SSG项目实践/" class="nav-link"><!---->
  移动端SSG项目实践
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/projectsSummary/从零到一搭建Vue2工程化项目/" class="nav-link"><!---->
  从零到一搭建Vue2工程化项目
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/projectsSummary/从零到一搭建Vue3工程化项目/" class="nav-link"><!---->
  从零到一搭建Vue3工程化项目
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/projectsSummary/搭建低代码平台/" class="nav-link"><!---->
  搭建低代码平台
</a></li><li class="dropdown-item"><!----> <a href="/myblog/componentsEncapsulation/projectsSummary/混合桌面应用开发实践/" class="nav-link"><!---->
  混合桌面应用开发实践
</a></li></ul></div></div> <!----></nav> <!----> <div class="content__sidebar-center"></div> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span class="title">组件基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/myblog/componentsEncapsulation/%E7%BB%84%E4%BB%B6%E5%92%8C%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85%E5%AE%9E%E8%B7%B5/" class="sidebar-link">组件和组件封装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E7%BB%84%E4%BB%B6%E5%92%8C%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85%E5%AE%9E%E8%B7%B5/#vue2-组件基础" class="sidebar-link">Vue2 组件基础</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E7%BB%84%E4%BB%B6%E5%92%8C%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85%E5%AE%9E%E8%B7%B5/#web-components" class="sidebar-link">Web Components</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E7%BB%84%E4%BB%B6%E5%92%8C%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85%E5%AE%9E%E8%B7%B5/#参考资料" class="sidebar-link heading3">参考资料</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E7%BB%84%E4%BB%B6%E5%92%8C%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85%E5%AE%9E%E8%B7%B5/#高阶组件" class="sidebar-link">高阶组件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E7%BB%84%E4%BB%B6%E5%92%8C%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85%E5%AE%9E%E8%B7%B5/#概念" class="sidebar-link heading3">概念</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E7%BB%84%E4%BB%B6%E5%92%8C%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85%E5%AE%9E%E8%B7%B5/#特点" class="sidebar-link heading3">特点</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E7%BB%84%E4%BB%B6%E5%92%8C%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85%E5%AE%9E%E8%B7%B5/#规则" class="sidebar-link heading3">规则</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E7%BB%84%E4%BB%B6%E5%92%8C%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85%E5%AE%9E%E8%B7%B5/#实现" class="sidebar-link heading3">实现</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E7%BB%84%E4%BB%B6%E5%92%8C%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85%E5%AE%9E%E8%B7%B5/#命令式组件" class="sidebar-link">命令式组件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E7%BB%84%E4%BB%B6%E5%92%8C%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85%E5%AE%9E%E8%B7%B5/#概念-2" class="sidebar-link heading3">概念</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E7%BB%84%E4%BB%B6%E5%92%8C%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85%E5%AE%9E%E8%B7%B5/#为什么要用命令式组件" class="sidebar-link heading3">为什么要用命令式组件？</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E7%BB%84%E4%BB%B6%E5%92%8C%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85%E5%AE%9E%E8%B7%B5/#vue2-封装命令式组件" class="sidebar-link heading3">Vue2 封装命令式组件</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E7%BB%84%E4%BB%B6%E5%92%8C%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85%E5%AE%9E%E8%B7%B5/#vue3-封装命令式组件" class="sidebar-link heading3">Vue3 封装命令式组件</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E7%BB%84%E4%BB%B6%E5%92%8C%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85%E5%AE%9E%E8%B7%B5/#参考资料-2" class="sidebar-link heading3">参考资料</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E7%BB%84%E4%BB%B6%E5%92%8C%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85%E5%AE%9E%E8%B7%B5/#展示组件和容器组件" class="sidebar-link">展示组件和容器组件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E7%BB%84%E4%BB%B6%E5%92%8C%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85%E5%AE%9E%E8%B7%B5/#概念-3" class="sidebar-link heading3">概念</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E7%BB%84%E4%BB%B6%E5%92%8C%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85%E5%AE%9E%E8%B7%B5/#特点-2" class="sidebar-link heading3">特点</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E7%BB%84%E4%BB%B6%E5%92%8C%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85%E5%AE%9E%E8%B7%B5/#为什么要分离展示组件和容器组件" class="sidebar-link heading3">为什么要分离展示组件和容器组件？</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E7%BB%84%E4%BB%B6%E5%92%8C%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85%E5%AE%9E%E8%B7%B5/#参考资料-3" class="sidebar-link heading3">参考资料</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E7%BB%84%E4%BB%B6%E5%92%8C%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85%E5%AE%9E%E8%B7%B5/#hooks" class="sidebar-link">Hooks</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E7%BB%84%E4%BB%B6%E5%92%8C%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85%E5%AE%9E%E8%B7%B5/#json-配置组件" class="sidebar-link">JSON 配置组件</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><!----> <span class="title">组件封装实践</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/" aria-current="page" class="active sidebar-link">从零到一搭建公共组件库</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#为什么要搭建公共组件库" class="sidebar-link">为什么要搭建公共组件库？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#公共组件是什么" class="sidebar-link heading3">公共组件是什么？</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#开源组件库与系统关系" class="sidebar-link heading3">开源组件库与系统关系</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#为什么要搭建组件库" class="sidebar-link heading3">为什么要搭建组件库？</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#为什么要搭建前端公共组件库" class="sidebar-link heading3">为什么要搭建前端公共组件库？</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#项目目标" class="sidebar-link">项目目标</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#架构设计" class="sidebar-link">架构设计</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#foundation" class="sidebar-link heading3">Foundation</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#adapter" class="sidebar-link heading3">Adapter</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#实施计划" class="sidebar-link">实施计划</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#实施步骤" class="sidebar-link heading3">实施步骤</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#详细计划" class="sidebar-link heading3">详细计划</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#技术选型" class="sidebar-link">技术选型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#仓库管理" class="sidebar-link heading3">仓库管理</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#搭建-开发流程" class="sidebar-link">搭建/开发流程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#pnpm-创建-monorepo" class="sidebar-link heading3">pnpm 创建 MonoRepo</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#搭建组件库" class="sidebar-link heading3">搭建组件库</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#使用组件" class="sidebar-link heading3">使用组件</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#搭建组件库文档" class="sidebar-link heading3">搭建组件库文档</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#搭建组件测试项目" class="sidebar-link heading3">搭建组件测试项目</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#部署发布" class="sidebar-link heading3">部署发布</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#组件列表" class="sidebar-link">组件列表</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#组件分类" class="sidebar-link heading3">组件分类</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#参考资料" class="sidebar-link">参考资料</a></li></ul></li><li><a href="/myblog/componentsEncapsulation/Element%E4%BA%8C%E6%AC%A1%E5%B0%81%E8%A3%85/" class="sidebar-link">Element ui 与 Element-plus ui 二次封装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/Element%E4%BA%8C%E6%AC%A1%E5%B0%81%E8%A3%85/#背景" class="sidebar-link">背景</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/Element%E4%BA%8C%E6%AC%A1%E5%B0%81%E8%A3%85/#封装方案" class="sidebar-link">封装方案</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/Element%E4%BA%8C%E6%AC%A1%E5%B0%81%E8%A3%85/#单文件组件" class="sidebar-link">单文件组件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/Element%E4%BA%8C%E6%AC%A1%E5%B0%81%E8%A3%85/#组件封装目的" class="sidebar-link heading3">组件封装目的</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/Element%E4%BA%8C%E6%AC%A1%E5%B0%81%E8%A3%85/#封装示例" class="sidebar-link heading3">封装示例</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/Element%E4%BA%8C%E6%AC%A1%E5%B0%81%E8%A3%85/#组件封装技巧" class="sidebar-link heading3">组件封装技巧</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/Element%E4%BA%8C%E6%AC%A1%E5%B0%81%E8%A3%85/#json-配置组件封装" class="sidebar-link">JSON 配置组件封装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/Element%E4%BA%8C%E6%AC%A1%E5%B0%81%E8%A3%85/#背景-2" class="sidebar-link heading3">背景</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/Element%E4%BA%8C%E6%AC%A1%E5%B0%81%E8%A3%85/#百度-amis-框架思想" class="sidebar-link heading3">百度 amis 框架思想</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/Element%E4%BA%8C%E6%AC%A1%E5%B0%81%E8%A3%85/#json-配置组件实现方案" class="sidebar-link heading3">JSON 配置组件实现方案</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/Element%E4%BA%8C%E6%AC%A1%E5%B0%81%E8%A3%85/#elements-组件二次封装" class="sidebar-link heading3">elements 组件二次封装</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/Element%E4%BA%8C%E6%AC%A1%E5%B0%81%E8%A3%85/#业务组件封装" class="sidebar-link heading3">业务组件封装</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/Element%E4%BA%8C%E6%AC%A1%E5%B0%81%E8%A3%85/#组件封装示例" class="sidebar-link heading3">组件封装示例</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/Element%E4%BA%8C%E6%AC%A1%E5%B0%81%E8%A3%85/#参考资料" class="sidebar-link">参考资料</a></li></ul></li><li><a href="/myblog/componentsEncapsulation/JSON%E7%BB%84%E4%BB%B6/" class="sidebar-link">JSON配置化组件二次封装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/JSON%E7%BB%84%E4%BB%B6/#json配置化组件二次封装" class="sidebar-link">JSON配置化组件二次封装</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/JSON%E7%BB%84%E4%BB%B6/#设计思路" class="sidebar-link">设计思路</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/JSON%E7%BB%84%E4%BB%B6/#组件介绍" class="sidebar-link">组件介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/JSON%E7%BB%84%E4%BB%B6/#basiccomponent" class="sidebar-link heading3">BasicComponent</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/JSON%E7%BB%84%E4%BB%B6/#form" class="sidebar-link heading3">Form</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/JSON%E7%BB%84%E4%BB%B6/#table" class="sidebar-link heading3">Table</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/JSON%E7%BB%84%E4%BB%B6/#menu" class="sidebar-link heading3">Menu</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/JSON%E7%BB%84%E4%BB%B6/#dropdown" class="sidebar-link heading3">Dropdown</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/JSON%E7%BB%84%E4%BB%B6/#dialog" class="sidebar-link heading3">Dialog</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/JSON%E7%BB%84%E4%BB%B6/#descriptions" class="sidebar-link heading3">Descriptions</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/JSON%E7%BB%84%E4%BB%B6/#button" class="sidebar-link heading3">Button</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/JSON%E7%BB%84%E4%BB%B6/#icon、svgicon" class="sidebar-link heading3">Icon、SvgIcon</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/JSON%E7%BB%84%E4%BB%B6/#功能组件" class="sidebar-link">功能组件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/JSON%E7%BB%84%E4%BB%B6/#selectlist" class="sidebar-link heading3">SelectList</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/JSON%E7%BB%84%E4%BB%B6/#checkbox" class="sidebar-link heading3">CheckBox</a></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/JSON%E7%BB%84%E4%BB%B6/#attentionbutton" class="sidebar-link heading3">AttentionButton</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/JSON%E7%BB%84%E4%BB%B6/#hooks" class="sidebar-link">Hooks</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/componentsEncapsulation/JSON%E7%BB%84%E4%BB%B6/#descriptionedit" class="sidebar-link heading3">DescriptionEdit</a></li></ul></li></ul></li></ul></section></li></ul> <!----> <div class="content__sidebar-bottom"></div> <!----></aside> <main class="page"><nav class="breadcrumb disable"><!----></nav> <!----> <div class="content__page-top"></div> <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><!----> <span property="headline">从零到一搭建公共组件库</span></h1> <div class="page-info"><!----> <true-info defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/"></true-info><true-info defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/"></true-info><true-info defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/"></true-info><true-info defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/"></true-info><true-info defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/"></true-info><true-info defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/"></true-info><true-info defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/"></true-info></div> <!----> <hr></div> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#为什么要搭建公共组件库" class="anchor-link heading2"><div>为什么要搭建公共组件库？</div></a></li><li class="anchor"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#公共组件是什么" class="anchor-link heading3"><div>公共组件是什么？</div></a></li><li class="anchor"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#开源组件库与系统关系" class="anchor-link heading3"><div>开源组件库与系统关系</div></a></li><li class="anchor"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#为什么要搭建组件库" class="anchor-link heading3"><div>为什么要搭建组件库？</div></a></li><li class="anchor"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#为什么要搭建前端公共组件库" class="anchor-link heading3"><div>为什么要搭建前端公共组件库？</div></a></li><li class="anchor"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#项目目标" class="anchor-link heading2"><div>项目目标</div></a></li><li class="anchor"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#架构设计" class="anchor-link heading2"><div>架构设计</div></a></li><li class="anchor"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#foundation" class="anchor-link heading3"><div>Foundation</div></a></li><li class="anchor"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#adapter" class="anchor-link heading3"><div>Adapter</div></a></li><li class="anchor"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#实施计划" class="anchor-link heading2"><div>实施计划</div></a></li><li class="anchor"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#实施步骤" class="anchor-link heading3"><div>实施步骤</div></a></li><li class="anchor"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#详细计划" class="anchor-link heading3"><div>详细计划</div></a></li><li class="anchor"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#技术选型" class="anchor-link heading2"><div>技术选型</div></a></li><li class="anchor"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#仓库管理" class="anchor-link heading3"><div>仓库管理</div></a></li><li class="anchor"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#搭建-开发流程" class="anchor-link heading2"><div>搭建/开发流程</div></a></li><li class="anchor"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#pnpm-创建-monorepo" class="anchor-link heading3"><div>pnpm 创建 MonoRepo</div></a></li><li class="anchor"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#搭建组件库" class="anchor-link heading3"><div>搭建组件库</div></a></li><li class="anchor"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#使用组件" class="anchor-link heading3"><div>使用组件</div></a></li><li class="anchor"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#搭建组件库文档" class="anchor-link heading3"><div>搭建组件库文档</div></a></li><li class="anchor"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#搭建组件测试项目" class="anchor-link heading3"><div>搭建组件测试项目</div></a></li><li class="anchor"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#部署发布" class="anchor-link heading3"><div>部署发布</div></a></li><li class="anchor"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#组件列表" class="anchor-link heading2"><div>组件列表</div></a></li><li class="anchor"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#组件分类" class="anchor-link heading3"><div>组件分类</div></a></li><li class="anchor"><a href="/myblog/componentsEncapsulation/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E6%90%AD%E5%BB%BA%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93/#参考资料" class="anchor-link heading2"><div>参考资料</div></a></li></ul></div></aside></div> <!----> <div class="content__content-top"></div> <div class="theme-default-content content__default"><h1 id="从零到一搭建公共组件库"><a href="#从零到一搭建公共组件库" class="header-anchor">#</a> <strong>从零到一搭建公共组件库</strong></h1> <h2 id="为什么要搭建公共组件库"><a href="#为什么要搭建公共组件库" class="header-anchor">#</a> <strong>为什么要搭建公共组件库？</strong></h2> <h3 id="公共组件是什么"><a href="#公共组件是什么" class="header-anchor">#</a> 公共组件是什么？</h3> <p>看 <code>ChatGPT</code> 给出的定义：</p> <blockquote><p>前端公共组件是指在前端开发过程中，经常会被多个页面或多个项目<strong>复用的组件</strong>。</p> <p>这些组件通常具有一定的<strong>独立性和通用性</strong>，可以被封装成独立的模块，供多个页面或项目<strong>共享使用</strong>。</p> <p>前端公共组件可以包括但不限于按钮、表单、导航栏、轮播图、模态框、消息提示等常见的UI组件，也可以包括一些业务逻辑相关的组件，如登录组件、购物车组件等。</p></blockquote> <p>Vue3 官方文档中对组件定义：<a href="https://cn.vuejs.org/guide/essentials/component-basics.html" target="_blank" rel="noopener noreferrer">组件基础 | Vue.js (vuejs.org)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <blockquote><p>组件允许我们将 UI 划分为独立的、可重用的部分，并且可以对每个部分进行单独的思考。在实际应用中，组件常常被组织成层层嵌套的树状结构：</p> <img src="/myblog/assets/img/组件定义.34b4e327.png" alt="img" style="zoom:50%;"></blockquote> <p>实际上，在实际前端开发过程中，当接到一个新页面需求时候，一般流程为：</p> <ol><li><strong>将页面进行组件分析</strong>：分析页面中的模块，将页面拆分成一个个组件，分析复用部分，将复用部分封装成组件；</li> <li><strong>接口拆分</strong>：将页面拆成组件后，分析组件格式规范，并将接口拆分到不同组件。</li> <li><strong>开发组件</strong>：罗列所有拆分好的组件，分任务开发；</li> <li><strong>组合页面</strong>：将组件进行拼装组合形成页面。</li> <li><strong>组件联调</strong>：将拆分的组件组成一个页面之后，进行组件之间通信和交互联调；</li> <li><strong>接口联调测试</strong>：最后通过与后端联调测试页面。</li></ol> <h3 id="开源组件库与系统关系"><a href="#开源组件库与系统关系" class="header-anchor">#</a> <strong>开源组件库与系统关系</strong></h3> <p>在封装组件库系统之前，我们先来了解一下，目前开源的各大组件库和系统之前的关系，才能明白为什么要封装自己的组件库。</p> <p>以 <a href="https://element-plus.org/zh-CN/component/button.html" target="_blank" rel="noopener noreferrer"><code>Element-Plus</code> 组件库<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>为例：</p> <blockquote><p><a href="https://element-plus.org/zh-CN/component/button.html" target="_blank" rel="noopener noreferrer"><code>Element-Plus</code> 组件库<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>官方文档中，将组件库分为：</p> <p><strong>Basic 基础组件</strong>：</p> <ul><li>Button 按钮、Border 边框、Color 色彩、Container 布局容器、Icon 图标、Layout 布局、Link 链接、Text 文本、Scrollbar 滚动条、Space 间距、Typography 排版；</li></ul> <p><strong>配置组件：</strong></p> <ul><li>Config Provider 全局配置；</li></ul> <p><strong>Form 表单组件：</strong></p> <ul><li>Autocomplete 自动补全输入框、Cascader 级联选择器、Checkbox 多选框、Color Picker 取色器、Date Picker 日期选择器、DateTime Picker 日期时间选择器、Form 表单、Input 输入框、Input Number 数字输入框、Radio 单选框、Rate 评分、Select 选择器、Virtualized Select 虚拟化选择器、Slider 滑块、Switch 开关、Time Picker 时间选择器、Time Select 时间选择、Transfer 穿梭框、Upload 上传；</li></ul> <p><strong>Data 数据展示：</strong></p> <ul><li>Avatar 头像、Badge 徽章、Calendar 日历、Card 卡片、Carousel 走马灯、Collapse 折叠面板、Descriptions 描述列表、Empty 空状态、Image 图片、Infinite Scroll 无限滚动、Pagination 分页、Progress 进度条、Result 结果、Skeleton 骨架屏、Table 表格、Virtualized Table 虚拟化表格、Tag 标签、Timeline 时间线、Tour 漫游式引导、Tree 树形控件、TreeSelect 树形选择、Virtualized Tree 虚拟化树形控件、Statistic 统计组件（2.2.30）；</li></ul> <p><strong>Navigation 导航组件：</strong></p> <ul><li>Affix 固钉、Backtop 回到顶部、Breadcrumb 面包屑、Dropdown 下拉菜单、Menu 菜单、Page Header 页头、Steps 步骤条、Tabs 标签页；</li></ul> <p><strong>Feedback 反馈组件</strong>：</p> <ul><li>Alert 提示、Dialog 对话框、Drawer 抽屉、Loading 加载、Message 消息提示、Message Box 消息弹出框、Notification 通知、Popconfirm 气泡确认框、Popover 弹出框、Tooltip 文字提示；</li></ul> <p><strong>Others 其他组件：</strong></p> <ul><li>Divider 分割线、Watermark 水印；</li></ul></blockquote> <p>通过以上分类可以看到：Element-Plus 官方将组件库划分的组件粒度非常细，粒度细到按钮级别；Element-Plus 将组件粒度划分为那么细，个人认为是基于以下原因：</p> <ol><li><strong>可维护性和可复用性</strong>：Element-Plus作为开源组件库，需要考虑各种应用的需求场景，因此将组件拆分成较小的粒度，每个组件都承担特定的功能，这使得组件更易于理解和维护。同时，小粒度的组件也更易于复用，可以在不同的场景和项目中重复使用，提高了组件的利用率。</li> <li><strong>性能优化</strong>：小粒度的组件通常意味着更小的体积和更快的加载速度。这有助于提升应用的性能。</li> <li><strong>设计一致性</strong>：通过将组件拆分成较小的粒度，可以更容易地保持设计的一致性。每个组件都有明确的接口和规范，这使得不同组件之间的交互和配合更加顺畅，有助于提升整体的用户体验。</li></ol> <p>然而，通常系统中，存在许多相同或相似的组件/模块，特别是在 to B 端项目或中台系统中，大量存在各种各样的From 表单组件、表格组件、搜索组件和弹窗表单组件等。这些组件变化灵活，但又属于一类组件，</p> <p>以From表单组件为例：B端系统表单内容可以灵活多变，但是外部都是需要套用 element-plus 的 From 表单组件，有统一的提交事件和数据格式等；</p> <blockquote><p>示例表单A:</p> <img src="/myblog/assets/img/示例表单1.634294c8.png" alt="image-20240227110610238" style="zoom:25%;"> <p>示例表单B:</p> <img src="/myblog/assets/img/示例表单2.64763e76.png" alt="image-20240227110644196" style="zoom:50%;"> <p>表单A和表单B相同点：</p> <ul><li>都是以弹窗的形式弹出让用户填写表单信息，都需要弹窗组件包裹，因此需要统一的弹窗操作事件：关闭，显示等；</li> <li>都存在统一的操作：确认和取消；</li> <li>都存在统一的表单组件和数据格式：都需要使用 From 表单组件包裹和返回统一的数据格式给后端；</li></ul> <p>表单A和表单B不相同点：</p> <ul><li>表单项和数量不同；</li> <li>表单二存在提示组件；</li></ul></blockquote> <p>以上两个简单的表单组件，假如使用 Element-Plus 开源标签组件模式开发：</p> <ul><li>第一步：两个组件都在最外层使用一个弹窗组件包裹，并添加对应事件逻辑：<img src="/myblog/assets/img/弹窗组件示例.26134d50.png" alt="image-20240227111627921" style="zoom:50%;"></li> <li>第二步：添加From组件逻辑：所有 form 组件都需要组件标签，组件字段和组件事件代码。</li></ul> <img src="/myblog/assets/img/from组件示例.f38e0e99.png" alt="image-20240227114405741" style="zoom:50%;"> <ul><li>第三步：添加两个操作按钮；</li> <li>第四步：添加表单内容组件；</li></ul> <p>通过以上步骤可知：在B端系统中，同样是两个弹窗显示的表单组件，都需要重复以上四个步骤，并且以上四个步骤中第一第二步中都是一模一样的代码逻辑，如果采用单页面开发（一个表单一个页面）模式，重复开发弹窗和表单组件逻辑，随着表单数量增加，此类重复工作量将呈现量级增加！除此之外，项目可维护性也将非常差！一旦产品提出需要在所有弹窗中添加 标题或改动标题位置此类需求，需要找到所有弹窗组件进行修改。</p> <h3 id="为什么要搭建组件库"><a href="#为什么要搭建组件库" class="header-anchor">#</a> <strong>为什么要搭建组件库？</strong></h3> <p>通过以上分析。为了减少开发工作量，提高项目的可维护性，我们需要将一些通用的组件代码封装在一起，减少开发工作量和提高项目的可维护性，并统一所有组件的样式风格。</p> <p><strong>提高开发效率</strong></p> <p>组件化开发将常用的功能或模块封装成独立的组件，开发者在开发过程中可以直接使用这些组件，而不需要从头开始编写代码。这样可以大大减少重复劳动，提高开发效率。</p> <p><strong>降低维护成本</strong></p> <p>由于组件是独立的，因此当某个组件出现问题时，只需要对该组件进行维护，而不需要对整个项目进行重新开发和测试。这大大降低了维护成本。</p> <p><strong>统一风格和样式</strong></p> <p>通过搭建前端组件库，可以制定统一的开发标准，包括组件的命名、接口、样式等，这样可以保证团队成员在开发过程中遵循相同的规范和标准，提高代码的可读性和可维护性。</p> <p><strong>提高代码质量</strong></p> <p>组件库中的组件都是经过严格测试和验证的，可以确保组件的质量和稳定性。同时，组件化开发也鼓励开发者编写高内聚、低耦合的代码，这有助于提高代码质量。</p> <p><strong>促进团队协作</strong></p> <p>通过搭建前端组件库，团队成员可以共享组件和资源，减少沟通成本和重复开发。同时，组件库也可以作为团队的技术积累和传承，方便新成员快速融入团队和开发工作。</p> <h3 id="为什么要搭建前端公共组件库"><a href="#为什么要搭建前端公共组件库" class="header-anchor">#</a> <strong>为什么要搭建前端公共组件库？</strong></h3> <p>目前，通过搭建组件库的方式确实可以节省项目开发时间，然而，目前只是基于当前项目对组件进行二次封装。</p> <ul><li><strong>每个项目独立维护组件库</strong>：新增一个组件时，需要复制组件副本到其他项目并进行适配。</li></ul> <img src="/myblog/assets/img/公共组件库.3e45cc17.png" alt="image-20240228112407788" style="zoom:50%;"> <ul><li><p><strong>公共组件库</strong>：维护统一的组件库，所有系统引用公共组件库。</p> <img src="/myblog/assets/img/公共组件库2.f533fe94.png" alt="image-20240228112551631" style="zoom:50%;"></li></ul> <p>这种模式存在以下问题：</p> <ol><li><p><strong>跨项目复用难</strong>：在每个项目都搭建自己的公共组件库的方式，不仅耗费大量时间，并且项目之间的组件库也是相互独立，每次开发一个新系统，都需要搭建系统自己的组件库或者将有组件库系统的系统重新 copy 一份适配新的项目，这种方式极大浪费人力成本。</p></li> <li><p><strong>缺乏文档管理</strong>：除此之外，每个项目中的组件库都缺少文档，这样导致一个问题就是自己封装的组件别人不会用、不知道在哪里用，甚至不知道有这么个东西。</p></li> <li><p><strong>维护成本高</strong>：在每个项目都搭建自己的公共组件库的方式，一旦发现某个公共组件存在 bug，就需要在每个项目都修改对应 Bug，然后所有项目都要重新发版，修改公共组件中的 Bug 效率非常低下。</p></li></ol> <p>搭建前端公共组件库的原因主要有以下几点：</p> <p><strong>重用性</strong>：</p> <p>公共组件库允许开发团队在不同项目或同一项目的不同部分中重用组件。这避免了代码的重复编写，提高了开发效率。</p> <p><strong>一致性</strong>：</p> <p>公共组件库确保所有项目都使用相同的组件和接口，从而提高了用户体验的一致性。它还可以帮助维护者更容易地理解代码，因为组件的使用方式和行为在所有项目中都是一致的。</p> <p><strong>可维护性</strong>：</p> <p>当需要更新或修复组件时，只需要在一个地方进行修改，而不需要在整个代码库中查找和替换。这大大减少了维护成本。</p> <p><strong>促进团队协作</strong>：</p> <p>公共组件库可以作为团队的共享资源，帮助新成员更快地理解项目的架构和代码风格。它还可以作为团队内部的知识传递工具，使得团队成员能够共享彼此的经验和最佳实践。</p> <p><strong>降低学习曲线</strong>：</p> <p>对于新加入团队的成员来说，使用公共组件库可以降低学习曲线。他们可以快速了解并使用已经存在的组件，而不需要从头开始学习如何编写每一个细节。</p> <p><strong>技术积累和传承</strong>：</p> <p>公共组件库可以作为技术积累和传承的工具。随着时间的推移，团队可以积累更多的组件和最佳实践，并将其传递给新成员。</p> <h2 id="项目目标"><a href="#项目目标" class="header-anchor">#</a> <strong>项目目标</strong></h2> <p>搭建公司统一组件库，所有前端项目在此贡献并共享组件:</p> <ul><li><p>将组件库发布到<code>NPM</code>官网上，可以通过<code>npm install</code> 的方式引入组件库；</p></li> <li><p>组件库能按需引入；</p></li> <li><p>组件库配套文档；</p></li></ul> <p><strong>最终目标</strong>：</p> <ul><li>沉淀 Vue2、Vue3、React 组件库；</li> <li>打造不同平台上的通用组件库。</li></ul> <h2 id="架构设计"><a href="#架构设计" class="header-anchor">#</a> <strong>架构设计</strong></h2> <blockquote><p>整体架构参考 <a href="https://semi.design/zh-CN/start/introduction" target="_blank" rel="noopener noreferrer">Introduction 介绍 - Semi Design<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 设计方案</p></blockquote> <img src="/myblog/assets/img/image-20240306165441567.efcdc933.png" alt="image-20240306165441567" style="zoom:80%;"> <p>搭建适配层跨前端框架技术方案，F/A 分层设计，将每个组件的 JavaScript 拆分为两部分：Foundation 和 Adapter，这使得我们可以通过仅重新实现适配器来跨框架重用 Foundation 代码，例如 React、Vue 或者 WebComponent，快速打造不同平台上的通用组件库。。</p> <p><img src="/myblog/assets/img/image-20240306162345063.ebbbe5e0.png" alt="image-20240306162345063"></p> <h3 id="foundation"><a href="#foundation" class="header-anchor">#</a> Foundation</h3> <p>Foundation 包含最能代表组件交互的业务逻辑，包括 UI 行为触发后的各种计算、分支判断等逻辑，它并不直接操作或者引用 DOM，任意需要 DOM 操作，驱动组件渲染更新的部分会委派给 Adapter 执行。</p> <h3 id="adapter"><a href="#adapter" class="header-anchor">#</a> Adapter</h3> <p>Adapter 是一个接口，具有 Foundation 实现组件库业务逻辑所需的所有方法，并负责：</p> <ol><li>组件 DOM 结构声明；</li> <li>负责所有跟 DOM 操作/更新相关的逻辑，通常会使用框架 API 进行 setState、getState、addEventListener、removeListener 等操作。适配器可以有许多实现，允许与不同框架的互操作性。</li></ol> <h2 id="实施计划"><a href="#实施计划" class="header-anchor">#</a> <strong>实施计划</strong></h2> <h3 id="实施步骤"><a href="#实施步骤" class="header-anchor">#</a> <strong>实施步骤</strong></h3> <p>第一步：搭建兼容 <code>Vue3</code> 版本的组件库；</p> <p>第二步：组件库兼容 <code>Vue2</code> 版本；</p> <p>第三步：组件库兼容 <code>React</code> ；</p> <p>第四步：新增组件库适配层，将不同框架组件库通过适配层编译后形成统一的规范，在任意类型的框架中使用。</p> <p>该组件库主要适配 PC 端，面向中后台管理系统常见的各种业务场景，主要封装通用组件，如：表单，弹窗等，包括一些特殊组件复用到其他项目中，如：项目进度管理组件等。</p> <h3 id="详细计划"><a href="#详细计划" class="header-anchor">#</a> <strong>详细计划</strong></h3> <table><thead><tr><th>方向</th> <th>内容</th> <th>详细内容</th> <th>状态</th></tr></thead> <tbody><tr><td><strong>组件库搭建</strong></td> <td>文档库搭建</td> <td></td> <td>完成</td></tr> <tr><td></td> <td>组件库框架搭建</td> <td></td> <td>完成</td></tr> <tr><td></td> <td>文档站点配置</td> <td></td> <td></td></tr> <tr><td></td> <td>文档发布脚本</td> <td></td> <td></td></tr> <tr><td></td> <td>组件自动化测试项目搭建</td> <td></td> <td></td></tr> <tr><td></td> <td>文档库和组件库、测试项目联调</td> <td>输出组件demo 和文档，测试项目结果，完成相关文档</td> <td></td></tr> <tr><td></td> <td>组件库和文档构建联调</td> <td></td> <td></td></tr> <tr><td></td> <td>NPM私有仓库搭建</td> <td></td> <td></td></tr> <tr><td></td> <td>项目于组件库开发联调测试</td> <td></td> <td></td></tr> <tr><td></td> <td>组件库更新发版测试</td> <td></td> <td></td></tr> <tr><td><strong>组件库封装设计方案选型</strong></td> <td>对比纯 JSON 和 JSON 配置化方式哪个更好</td> <td></td> <td></td></tr> <tr><td></td> <td></td> <td></td> <td></td></tr> <tr><td><strong>ElementPlus 组件库封装</strong></td> <td></td> <td></td> <td></td></tr> <tr><td><strong>ElementUI 组件封装</strong></td> <td></td> <td></td> <td></td></tr> <tr><td><strong>Ant Design  React 组件封装</strong></td> <td><a href="https://ant-design.antgroup.com/index-cn" target="_blank" rel="noopener noreferrer">Ant Design - 一套企业级 UI 设计语言和 React 组件库 (antgroup.com)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td></td> <td></td></tr> <tr><td><strong>Ant Design Vue 组件封装</strong></td> <td><a href="https://www.antdv.com/docs/vue/introduce-cn" target="_blank" rel="noopener noreferrer">Ant Design of Vue - Ant Design Vue (antdv.com)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></td> <td></td> <td></td></tr> <tr><td><strong>Echarts 封装</strong></td> <td></td> <td></td> <td></td></tr> <tr><td></td> <td></td> <td></td> <td></td></tr></tbody></table> <h2 id="技术选型"><a href="#技术选型" class="header-anchor">#</a> <strong>技术选型</strong></h2> <table><thead><tr><th>项目</th> <th>技术</th> <th>作用</th></tr></thead> <tbody><tr><td>Vue3 组件库</td> <td>Element-Plus</td> <td></td></tr> <tr><td>Vue2 组件库</td> <td>Element-UI</td> <td></td></tr> <tr><td>React 组件库</td> <td>Ant Design</td> <td></td></tr> <tr><td>组件文档</td> <td>VitePress</td> <td></td></tr> <tr><td>站点部署</td> <td>Netlify</td> <td></td></tr> <tr><td>包管理</td> <td>pnpm</td> <td></td></tr> <tr><td>仓库管理</td> <td>MonoRepo</td> <td></td></tr> <tr><td>打包工具</td> <td>Vite</td> <td></td></tr></tbody></table> <h3 id="仓库管理"><a href="#仓库管理" class="header-anchor">#</a> <strong>仓库管理</strong></h3> <h4 id="monorepo"><a href="#monorepo" class="header-anchor">#</a> <strong>MonoRepo</strong></h4> <p>MonoRepo 是一种将多个项目代码存储在一个仓库中的软件开发策略。这种策略的主要优势包括代码复用、简化第三方库管理和原子提交。但是，使用 MonoRepo 也需要注意，因为需要拉取仓库中的全部代码，所以可能需要更多的存储空间。</p> <p><strong>MonoRepo 管理工具</strong>：</p> <table><thead><tr><th style="text-align:center;">工具名称</th> <th style="text-align:center;">描述</th> <th style="text-align:center;">特点</th> <th style="text-align:center;">优点</th> <th style="text-align:center;">缺点</th></tr></thead> <tbody><tr><td style="text-align:center;">Lerna</td> <td style="text-align:center;">一个用于管理具有多个包的JavaScript项目的工具</td> <td style="text-align:center;">独立的包管理，版本控制</td> <td style="text-align:center;">易于维护和管理多个包，支持多个版本控制</td> <td style="text-align:center;">配置相对复杂，依赖管理需要额外注意</td></tr> <tr><td style="text-align:center;">Yarn Workspaces</td> <td style="text-align:center;">Yarn提供的一个功能，用于管理多个包的MonoRepo</td> <td style="text-align:center;">包之间的依赖关系优化，安装速度提升</td> <td style="text-align:center;">简化依赖管理，提升构建和安装速度</td> <td style="text-align:center;">对Yarn版本有一定依赖，社区支持可能不如其他工具</td></tr> <tr><td style="text-align:center;">Nx</td> <td style="text-align:center;">强大的MonoRepo工具，支持多种语言和框架</td> <td style="text-align:center;">智能构建缓存，性能优化，支持多种语言和框架</td> <td style="text-align:center;">高度可定制，性能优化，支持大型项目</td> <td style="text-align:center;">学习曲线较陡峭，初始配置可能较复杂</td></tr> <tr><td style="text-align:center;">RushJS</td> <td style="text-align:center;">用于管理大型JavaScript MonoRepo的工具</td> <td style="text-align:center;">灵活的构建和部署系统，支持并发操作</td> <td style="text-align:center;">构建速度快，易于扩展和定制</td> <td style="text-align:center;">文档相对较少，社区支持有限</td></tr> <tr><td style="text-align:center;">Turbo</td> <td style="text-align:center;">高效的构建工具，支持MonoRepo和分布式构建</td> <td style="text-align:center;">增量构建，并行构建，缓存优化</td> <td style="text-align:center;">构建速度快，资源利用率高</td> <td style="text-align:center;">专注于构建，可能不适合所有MonoRepo场景</td></tr></tbody></table> <p>如果你使用 pnpm 这样的新一代包管理工具，可以通过指定工作空间的方式来支持 MonoRepo。</p> <p><strong>pnpm本身并不是一个MonoRepo工具</strong>，而是一个包管理工具。然而，它原生支持MonoRepo，可以在这种项目结构下有效地管理依赖和包。</p> <p>MonoRepo是一种项目管理方式，将多个项目放在一个仓库里面，而pnpm能够很好地支持这种管理方式，通过软链模式实现包的更小体积和更快下载速度。</p> <p>请注意，虽然pnpm可以在MonoRepo中使用，但有效的MonoRepo管理通常还需要其他工具或实践的配合，例如使用Lerna、Yarn Workspaces等工具来管理多个包和它们的依赖关系。在选择和管理MonoRepo工具时，建议根据项目需求、团队技术栈和社区支持等因素进行综合考虑。</p> <h2 id="搭建-开发流程"><a href="#搭建-开发流程" class="header-anchor">#</a> <strong>搭建/开发流程</strong></h2> <h3 id="pnpm-创建-monorepo"><a href="#pnpm-创建-monorepo" class="header-anchor">#</a> <strong>pnpm 创建 MonoRepo</strong></h3> <h4 id="搭建流程"><a href="#搭建流程" class="header-anchor">#</a> <strong>搭建流程</strong></h4> <p>使用 pnpm Workspaces 创建 MonoRepo 的流程大致如下：</p> <ol><li><p><strong>初始化项目</strong>：首先，你需要初始化一个新的 npm 项目。在项目的根目录下运行 <code>npm init</code>，并按照提示进行初始化操作。</p></li> <li><p><strong>安装 pnpm</strong>：由于我们要使用 pnpm 进行依赖管理，所以需要在项目中安装 pnpm。可以通过运行 <code>npm install -g pnpm</code> 来全局安装 pnpm。</p></li> <li><p><strong>幽灵依赖</strong>：创建 <code>.npmrc</code> 文件，并添加以下代码：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>shared-workspace-lockfile <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token comment"># 如果启用此选项，pnpm 会在工作空间的根目录中创建一个唯一的 pnpm-lock.yaml 文件, docs: https://pnpm.io/zh/next/npmrc#shared-workspace-lockfile</span>
shamefully-hoist <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment"># 解决幽灵依赖问题</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p><strong>创建 TypeScript 配置</strong>：在项目根目录下创建 <code>tsconfig.json</code> 文件，并添加以下代码：</p> <div class="language-tsx line-numbers-mode"><pre class="language-tsx"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esnext&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esnext&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;moduleResolution&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;strict&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;jsx&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-jsx&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;sourceMap&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;resolveJsonModule&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;esModuleInterop&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;lib&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;esnext&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;dom&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;allowJs&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;baseUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;paths&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;@xw-ui/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;./packages/*&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;./*&quot;</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;include&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;packages/*.d.ts&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;packages/element-plus/components&quot;</span><span class="token punctuation">,</span> <span class="token comment">// element-ui用js开发</span>
    <span class="token string">&quot;docs&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;exclude&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;node_modules&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div></li> <li><p><strong>创建 packages 目录</strong>：在项目的根目录下创建一个名为 <code>packages</code> 的目录，这个目录将用于存放各个子项目。</p></li> <li><p><strong>创建子项目</strong>：在 <code>packages</code> 目录下创建各个子项目。每个子项目都应该是一个独立的 npm 包，拥有自己的 <code>package.json</code> 文件。你可以手动创建这些子项目，也可以使用一些脚手架工具来快速生成。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">-</span> packages
<span class="token operator">|</span><span class="token operator">--</span>ant<span class="token operator">-</span>design # React 组件库
<span class="token operator">|</span><span class="token operator">--</span>element<span class="token operator">-</span>plus # Vue3 组件库
<span class="token operator">|</span><span class="token operator">--</span>element<span class="token operator">-</span>ui # Vue2 组件库
<span class="token operator">|</span><span class="token operator">--</span>shared
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p><strong>配置 pnpm-workspace.yaml</strong>：在项目的根目录下创建一个名为 <code>pnpm-workspace.yaml</code> 的文件，用于配置 pnpm Workspaces。在这个文件中，你需要指定哪些目录被视为工作空间的一部分。例如，如果你的子项目都位于 <code>packages</code> 目录下，你可以这样配置：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>packages:
  - packages/* <span class="token comment"># 将 packages 目录下所有文件夹项目视为独立项目，能独立安装 node_modules</span>
  - test/packages/* <span class="token comment"># 将 test/packages/ 目录下所有文件夹项目视为独立项目，能独立安装 node_modules</span>
  - docs
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p><strong>安装依赖</strong>：运行 <code>pnpm install</code> 命令来安装所有子项目的依赖。由于我们已经配置了 pnpm Workspaces，所以这个命令会自动处理子项目之间的依赖关系，并创建符号链接，使得各个子项目可以相互引用。</p></li> <li><p><strong>开发和管理子项目</strong>：进入子项目目录下，初始化 <code>pnpm</code>。如进入 <code>element-plus</code> 目录下，执行 <code>pnpm init</code> ，初始化 node 项目，将生成一个 <code>package.json</code> 文件，将该文件的 name 字段改成组件库名称：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@xw-ui/xw-element-plus&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 将改名字改成组件库名称，后面安装依赖时候需要使用</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;二次封装 element-plus&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dist/xw-element-plus.cjs.js&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;moudle&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dist/xw-element-plus.es.js&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite build&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;docs:build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vite build --mode docs&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ISC&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;peerDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;vue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.2.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;element-plus&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.2.0&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;@element-plus/icons-vue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.0.6&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;@xw-ui/xw-shared&quot;</span><span class="token operator">:</span> <span class="token string">&quot;workspace:*&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;@xw-ui/hooks&quot;</span><span class="token operator">:</span> <span class="token string">&quot;workspace:*&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lodash&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.17.21&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;@vitejs/plugin-vue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.3.3&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;element-plus&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.2.8&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;vue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.2.36&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;vue-router&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;less&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.1.3&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>同样方式，初始化 <code>element-ui</code> 和 <code>ant-design</code> 项目。</p></li> <li><p><strong>将组件库连接到全局 <code>node_modules</code> 中</strong>：三个包的组件库需要相互调用，因此需要将三个包组件库连接到全局的<code>node_modules</code> 中：通过在根目录安装组件包。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">cd</span> <span class="token punctuation">..</span>/<span class="token punctuation">..</span>/ <span class="token comment"># 回到根目录</span>
<span class="token function">pnpm</span> <span class="token function">install</span> @xw-ui/xw-element-plus <span class="token parameter variable">-w</span> <span class="token comment">#全局安装你开发的 element-plus 组件包</span>
<span class="token function">pnpm</span> <span class="token function">install</span> @xw-ui/xw-element-ui <span class="token parameter variable">-w</span> <span class="token comment">#全局安装你开发的 element-ui 组件包</span>
<span class="token function">pnpm</span> <span class="token function">install</span> @xw-ui/xw-ant-design <span class="token parameter variable">-w</span> <span class="token comment">#全局安装你开发的 ant-design 组件包</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p><strong><code>pnpm install</code> 命令的 -w 参数</strong>:</p> <p>在 <code>pnpm install</code> 命令中，<code>-w</code> 或 <code>--workspace</code> 参数是用来指定多工作区安装的。当你有一个 Monorepo（单仓库）项目，其中包含了多个独立的包或项目时，你可以使用 <code>-w</code> 参数来同时安装这些包的所有依赖。</p> <p>具体来说，<code>-w</code> 参数会告诉 <code>pnpm</code> 去查找 <code>package.json</code> 文件中定义的 <code>workspaces</code> 字段，并基于该字段中列出的包来安装依赖。这样，你可以确保整个 Monorepo 中的所有包都使用了正确版本的依赖，并且这些依赖只会被安装一次，从而节省了磁盘空间。</p></blockquote></li></ol> <h4 id="项目目录"><a href="#项目目录" class="header-anchor">#</a> <strong>项目目录</strong></h4> <p><img src="/myblog/assets/img/image-20240306163417751.39417ade.png" alt="image-20240306163417751"></p> <h3 id="搭建组件库"><a href="#搭建组件库" class="header-anchor">#</a> <strong>搭建组件库</strong></h3> <h4 id="elementplus-组件库"><a href="#elementplus-组件库" class="header-anchor">#</a> <strong>elementPlus 组件库</strong></h4> <h4 id="antdesign-组件库"><a href="#antdesign-组件库" class="header-anchor">#</a> <strong>AntDesign 组件库</strong></h4> <h3 id="使用组件"><a href="#使用组件" class="header-anchor">#</a> <strong>使用组件</strong></h3> <h3 id="搭建组件库文档"><a href="#搭建组件库文档" class="header-anchor">#</a> <strong>搭建组件库文档</strong></h3> <h4 id="技术栈"><a href="#技术栈" class="header-anchor">#</a> <strong>技术栈</strong></h4> <table><thead><tr><th>库</th> <th>作用</th></tr></thead> <tbody><tr><td>Vitepress</td> <td>搭建静态组件库文档</td></tr> <tr><td>element-plus</td> <td>组件库</td></tr> <tr><td>less</td> <td>css 预处理器</td></tr> <tr><td>vue^3.2.37</td> <td></td></tr></tbody></table> <h4 id="项目结构搭建"><a href="#项目结构搭建" class="header-anchor">#</a> <strong>项目结构搭建</strong></h4> <ol><li><strong>初始化项目</strong>：首先，创建一个新的项目文件夹 docs，并在终端中进入该文件夹。然后，使用<code>pnpm init</code>命令初始化项目，并按照提示填写相关信息。</li> <li><strong>安装Vite</strong>：在项目中安装 Vite 作为构建工具。运行<code>pnpm add vite --save-dev</code>命令来安装 <code>Vite</code>。</li> <li><strong>创建Vite配置文件</strong>：在项目的根目录下创建一个名为<code>vite.config.js</code>的文件，并添加以下内容：</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> sideBarPlugin <span class="token keyword">from</span> <span class="token string">'./plugins/side-bar-plugin'</span>
<span class="token keyword">import</span> sourceCode <span class="token keyword">from</span> <span class="token string">'./plugins/source-code'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vite'</span>
<span class="token keyword">import</span> path <span class="token keyword">from</span> <span class="token string">'path'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> alias <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../scripts'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> command<span class="token punctuation">,</span> mode <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">server</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">'/assets'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">'http://localhost:8080'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token function">sideBarPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 自动生成文档侧边栏插件</span>
      <span class="token function">sourceCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//将 Markdown 文件中的代码示例转换为可显示在网页上的代码片段</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">resolve</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token operator">...</span><span class="token keyword">await</span> <span class="token function">alias</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 统一项目包别名</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">find</span><span class="token operator">:</span> <span class="token string">'@/'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">replacement</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'/'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><ol start="4"><li><p><strong>创建组件库文档目录结构</strong>：在项目的<code>docs</code>目录下创建你的组件库目录结构，创建 <code>.vitepress</code> 目录，在该目录下搭建 <code>vitepress</code> 文档结构。详细搭建流程参考官方文档：<a href="https://vitepress.dev/zh/guide/getting-started" target="_blank" rel="noopener noreferrer">快速开始 | VitePress<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><strong>创建组件文档目录</strong>：在项目的<code>docs</code> 目录下创建 <code>zh-CN</code> 目录。该目录下分别存放组件库开发手册和组件文档。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>
<span class="token operator">|</span><span class="token operator">-</span>docs
<span class="token operator">|</span><span class="token operator">--</span> zh<span class="token operator">-</span><span class="token constant">CN</span>  # 中文文档目录
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> components  # 组件库文档
<span class="token operator">|</span>   <span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> ant<span class="token operator">-</span>design 
<span class="token operator">|</span>   <span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> element<span class="token operator">-</span>plus 
<span class="token operator">|</span>   <span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> element<span class="token operator">-</span>ui 
<span class="token operator">|</span>   <span class="token operator">|</span><span class="token operator">--</span> guide # 开发手册
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ol> <h4 id="编写组件文档"><a href="#编写组件文档" class="header-anchor">#</a> <strong>编写组件文档</strong></h4> <p>在完成一个组件开发后，下一步工作即为编写组件文档。</p> <p><strong>编写组件文档步骤</strong>：</p> <p>以编写一个 <code>element-plus</code> 的 <code>button</code> 组件文档为例，详细讲解如何编写组件文档：</p> <ol><li><p><strong>创建文件夹</strong>：在 <code>docs/zh-CN/components/element-plus/</code> 目录下创建 	<code>button</code> 组件的分类文件夹： <code>/Basic 基础</code> 文件夹，并创建 <code>button.md</code> 组件文档： <code>/Basic 基础/button.md</code>。</p> <blockquote><p>组件库文档会根据 <code>button.md</code> 的分类和目录，以 <code>Basic 基础</code> 为名称，生成一个<code>Basic 基础</code> 栏目和 button 文档。</p></blockquote></li> <li><p><strong>编写文档</strong>：文档一级标题表示组件文档侧边栏名称，如果文档内容中没有设置一级标题，则使用文档名称作为组件文档名称；</p></li> <li><p><strong>启动文档服务</strong>：启动文档服务后，自动生成文档配置。</p></li></ol> <h4 id="自动生成文档目录"><a href="#自动生成文档目录" class="header-anchor">#</a> <strong>自动生成文档目录</strong></h4> <p>启动文档服务后，Vite 会通过插件，自动遍历 <code>docs/zh-CN/components/element-plus/</code> 目录下问价夹，自动生成文档侧边栏配置。</p> <p>Vite 通过自定义文档目录插件，生成文档目录，插件位于 <code>docs/plugins/side-bar-plugin.ts</code>:</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> path <span class="token keyword">from</span> <span class="token string">'path'</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> fsPromises <span class="token keyword">from</span> <span class="token string">'fs/promises'</span>

<span class="token comment">// 组件文档目录</span>
<span class="token keyword">const</span> <span class="token function-variable function">componentBasePath</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../zh-CN/components'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 输出配置目录</span>
<span class="token keyword">const</span> <span class="token function-variable function">outPutBasePath</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../.vitepress/pages'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 生成组件文档侧边栏配置项</span>
<span class="token keyword">const</span> <span class="token function-variable function">getComponentsSideBar</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>path<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 组件文档路径</span>
  <span class="token keyword">const</span> resolvePath <span class="token operator">=</span> <span class="token function">componentBasePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> path
  <span class="token comment">// 文件数组</span>
  <span class="token keyword">const</span> dirArr <span class="token operator">=</span> <span class="token keyword">await</span> fsPromises<span class="token punctuation">.</span><span class="token function">readdir</span><span class="token punctuation">(</span>resolvePath<span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>dirArr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>dirItemPath<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 文件路径</span>
    <span class="token keyword">const</span> dirPath <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>resolvePath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dirItemPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token comment">// 文件内容</span>
    <span class="token keyword">const</span> fileArr <span class="token operator">=</span> <span class="token keyword">await</span> fsPromises<span class="token punctuation">.</span><span class="token function">readdir</span><span class="token punctuation">(</span>dirPath<span class="token punctuation">)</span>
    <span class="token comment">// 返回侧边栏配置项</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      text<span class="token operator">:</span> dirItemPath<span class="token punctuation">,</span>
      collapsible<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      collapsed<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      items<span class="token operator">:</span> <span class="token keyword">await</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>fileArr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>fileName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> buffer <span class="token operator">=</span> <span class="token keyword">await</span> fsPromises<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dirPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>fileName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> fileStr <span class="token operator">=</span> buffer<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?&lt;=#\s).*?(?=\n)</span><span class="token regex-delimiter">/</span></span>
        <span class="token keyword">const</span> regOpt <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(#+)[ \t]*(.+?)[ \t]*$</span><span class="token regex-delimiter">/</span></span>

		<span class="token comment">// 使用文档中一级标题作为侧边栏名称，没有设置一级标题则使用文档名称作为组件名称</span>
        <span class="token keyword">const</span> sideName <span class="token operator">=</span> <span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>fileStr<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>fileStr<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>fileName<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
          text<span class="token operator">:</span> sideName<span class="token punctuation">,</span>
          link<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/zh-CN/components</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dirItemPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>fileName<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> mdFilePath <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'/element-plus'</span><span class="token punctuation">,</span> <span class="token string">'/element-ui'</span><span class="token punctuation">,</span> <span class="token string">'/ant-design'</span><span class="token punctuation">]</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">sideBarPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token comment">//在服务器启动时被调用</span>
    <span class="token function-variable function">buildStart</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> filePath <span class="token keyword">of</span> mdFilePath<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 侧边栏配置</span>
        <span class="token keyword">const</span> sideBarArr <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getComponentsSideBar</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span>
        <span class="token comment">// 输出路径</span>
        <span class="token keyword">const</span> outPutFile <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">outPutBasePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>filePath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.json</span><span class="token template-punctuation string">`</span></span>
        <span class="token comment">// 写入文件</span>
        <span class="token keyword">await</span> fsPromises<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>outPutFile<span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>sideBarArr<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
          encoding<span class="token operator">:</span> <span class="token string">'utf-8'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br></div></div><h4 id="组件-demo-展示组件"><a href="#组件-demo-展示组件" class="header-anchor">#</a> <strong>组件 Demo 展示组件</strong></h4> <p>为了展示组件库组件的用法，我们需要开发一个类似 <a href="https://element-plus.org/zh-CN/component/button.html" target="_blank" rel="noopener noreferrer">Element-Plus 官方文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中组件展示的组件。以官方文档中按钮组件展示示例：<img src="/myblog/assets/img/image-20240307135445467.9dd21193.png" alt="image-20240307135445467" style="zoom:50%;"></p> <p><strong>扩展vitepress主题</strong></p> <p>由于需要修改 Vue 应用实例，开发注册自定义组件Demo展示组件，因此需要扩展 vitepress 主题。</p> <blockquote><p>扩展 vitepress 主题步骤参考 <a href="https://vitepress.dev/zh/guide/extending-default-theme#extending-the-default-theme" target="_blank" rel="noopener noreferrer">扩展默认主题 | VitePress<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p>可以通过创建一个 <code>/docs/.vitepress/theme/index.js</code> 或 <code>/docs/.vitepress/theme/index.ts</code> 文件 (即“主题入口文件”) 来启用自定义主题：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>├─ docs                # 项目根目录
│  ├─ .vitepress
│  │  ├─ theme
│  │  │  └─ index.ts   # 主题入口
│  │  └─ config.ts     # 配置文件
│  └─ index.md
└─ package.json
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>当检测到存在主题入口文件时，VitePress 总会使用自定义主题而不是默认主题。</p> <p>使用扩展组件：（ <code>.vitepress/theme/index.ts</code> 文件）</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> App<span class="token punctuation">,</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Theme <span class="token keyword">from</span> <span class="token string">'vitepress/theme'</span>
<span class="token keyword">import</span> <span class="token string">'../../public/css/custom-style.css'</span>
<span class="token keyword">import</span> <span class="token string">'element-plus/dist/index.css'</span>
<span class="token keyword">import</span> <span class="token string">'element-plus/theme-chalk/dark/css-vars.css'</span>
<span class="token keyword">import</span> XWComponents <span class="token keyword">from</span> <span class="token string">'@xw-ui/xw-element-plus'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> globals <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../components'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token comment">// 使用 vitepress 默认主题</span>
  <span class="token operator">...</span>Theme<span class="token punctuation">,</span>
  <span class="token comment">//扩展另一个主题，在我们的主题之前调用它的 `enhanceApp`</span>
  <span class="token function">enhanceApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span> app <span class="token punctuation">}</span><span class="token operator">:</span> <span class="token punctuation">{</span> app<span class="token operator">:</span> App <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 全局注册 element-plus 组件库，在 markdown 中使用</span>
    app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>XWComponents<span class="token punctuation">)</span>
    <span class="token comment">// 全局注册 demo 展示组件</span>
    globals<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>comp<span class="token operator">:</span> Component<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span>comp<span class="token punctuation">.</span>name <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">,</span> comp<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><blockquote><ul><li><p>将文档 Demo 展示组件在 enhanceApp 中引入 <code>globals</code> 全局注册组件，文档中能直接 demo 组件，文档中使用 demo 组件示例：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>xw-demo</span>
    <span class="token attr-name">demo-height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100px<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">source-code</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>element-plus:::button/button-demo<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>使用 demo 组件展示组件示例，通过 <code>xw-demo</code> 组件展示，并传入 <code>sourceCode</code> 属性，属性配置如下：</p> <ul><li><p><code>sourceCode</code> : 配置 demo 组件源码, <code>sourceCode</code> 最终通过插件会得到个经过 <code>encode</code> 的 html 代码。</p> <ul><li><p>必填项</p></li> <li><p>示例： <code>sourceCode=element-plus:::table/table-custom-columns</code></p></li> <li><p>属性值模式： <code>项目名:::组件路由地址</code> ，通过 <code>:::</code> 符号对项目名和组件路由地址进行分割;</p></li> <li><p>分割得到项目名 <code>element-plus</code> 会采用 <code>element-plus</code> 对应的 dev 端口，且会在 <code>element-plus</code> 项目中读取源代码。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>开发环境下 element-plus对应值为： 'http://localhost:3333/'
生产环境下 element-plus对应值为： '/element-plus/'
详细值通过 docs/ 文件下 .env 和 .env.production 环境变量中配置
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>分割得到路径 <code>table/table-custom-columns</code> ，插件会到对应项目的 demo 目录下读取源码文件 (源码文件位于<code>packages/element-plus/demo/table/table-custom-columns</code>)，并通过 <code>prismjs</code> 对源码进行高亮等处理。</p></li> <li><p>注意 <strong>demo 组件的文件名需要和对应的路由path 一致</strong>（对应案例中的：<code>/table-custom-columns</code>），插件会根据文件名拼接 dev 环境的 demo 组件访问地址。</p></li></ul></li></ul></li></ul></blockquote> <p>开发 Demo 展示组件，在 <code>/docs/.vitepress/components</code> 下创建自定义文档组件 <code>xw-demo.vue</code></p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ 'full-screen-container': isFullScreen }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>demo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!--操作菜单--&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>menu<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span>
          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon in iconColorArr<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon.color<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ backgroundColor: icon.color }<span class="token punctuation">&quot;</span></span>
        <span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-icon</span>
            <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon.name === 'scale'<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>d-caret<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleToggleFullScreen<span class="token punctuation">&quot;</span></span>
            <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DCaret</span>
          <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-icon</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
       <span class="token comment">&lt;!--demo展示组件，使用 iframe 内嵌组件--&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>elp-iframe<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ 'full-screen-iframe': isFullScreen }<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>`${baseUrl[props.libType]}#/${props.iframeSrc}`<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ height: demoHeight }<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>options<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-tooltip</span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>全屏预览<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placement</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bottom<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-icon</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>option-item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleToggleFullScreen<span class="token punctuation">&quot;</span></span>
          <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>FullScreen</span>
        <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-icon</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-tooltip</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-tooltip</span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>复制代码<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placement</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bottom<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-icon</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>option-item<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>copyCode<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CopyDocument</span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-icon</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-tooltip</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-tooltip</span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>查看源码<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placement</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bottom<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>option-item code-btn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleToggleCode<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token entity named-entity" title="&lt;">&amp;lt;</span>/<span class="token entity named-entity" title="&gt;">&amp;gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-tooltip</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>El-collapse-transition</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>source-code<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isShowCode<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--demo 源码内嵌显示--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>decode<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>decoded<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hide-code-btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span> <span class="token attr-name">link</span> <span class="token attr-name">:icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>CaretTop<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleToggleCode<span class="token punctuation">&quot;</span></span>
            <span class="token punctuation">&gt;</span></span>隐藏源代码<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span>
          <span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>El-collapse-transition</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> computed<span class="token punctuation">,</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  ElIcon<span class="token punctuation">,</span>
  ElTooltip<span class="token punctuation">,</span>
  ElCollapseTransition<span class="token punctuation">,</span>
  ElButton<span class="token punctuation">,</span>
  ElMessage<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;element-plus&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> FullScreen<span class="token punctuation">,</span> DCaret<span class="token punctuation">,</span> CaretTop<span class="token punctuation">,</span> CopyDocument <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@element-plus/icons-vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useClipboard <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;prismjs/themes/prism-tomorrow.css&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">libType</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 组件库名称</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&quot;element-plus&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">iframeSrc</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">demoHeight</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&quot;320px&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">sourceCode</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">rawSource</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> decoded <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">decodeURIComponent</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>sourceCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 组件库 demo 构建地址</span>
<span class="token keyword">const</span> baseUrl <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string-property property">&quot;element-plus&quot;</span><span class="token operator">:</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VITE_ELP_DEV_BASE</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;element-ui&quot;</span><span class="token operator">:</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VITE_ELU_DEV_BASE</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;ant-design&quot;</span><span class="token operator">:</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VITE_ANT_DEV_BASE</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> iconColorArr <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&quot;#fe5f57&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&quot;#ffbc2d&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;scale&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&quot;#27c83e&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> isFullScreen <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> isShowCode <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//全屏预览</span>
<span class="token keyword">const</span> <span class="token function-variable function">handleToggleFullScreen</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>isFullScreen<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token operator">!</span>isFullScreen<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//查看源码</span>
<span class="token keyword">const</span> <span class="token function-variable function">handleToggleCode</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>isShowCode<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token operator">!</span>isShowCode<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//复制源码</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> copy<span class="token punctuation">,</span> isSupported <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useClipboard</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">source</span><span class="token operator">:</span> <span class="token function">decodeURIComponent</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>rawSource<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">read</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">copyCode</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isSupported<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ElMessage<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;不支持复制&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">copy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ElMessage<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">&quot;复制成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ElMessage<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 监听键盘 esc键，退出全屏</span>
  document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;keyup&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">&quot;Escape&quot;</span> <span class="token operator">||</span> e<span class="token punctuation">.</span>key <span class="token operator">===</span> <span class="token string">&quot;Esc&quot;</span><span class="token punctuation">)</span> isFullScreen<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;XwDemo&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token atrule"><span class="token rule">@menu-height</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span></span>

<span class="token selector">.container</span> <span class="token punctuation">{</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #dcdfe6b2<span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--xw-border-radius-base<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.full-screen-container</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100vw<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100vh<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> 10000<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.demo</span> <span class="token punctuation">{</span>
  <span class="token selector">.menu</span> <span class="token punctuation">{</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--xw-border-radius-base<span class="token punctuation">)</span> <span class="token function">var</span><span class="token punctuation">(</span>--xw-border-radius-base<span class="token punctuation">)</span> 0 0<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@menu-height</span><span class="token punctuation">;</span></span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> <span class="token atrule"><span class="token rule">@menu-height</span><span class="token punctuation">;</span></span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--xw-custom-block-details-bg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0 16px<span class="token punctuation">;</span>
    <span class="token selector">.icon</span> <span class="token punctuation">{</span>
      <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
      <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
      <span class="token property">height</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
      <span class="token property">margin-right</span><span class="token punctuation">:</span> 6px<span class="token punctuation">;</span>
      <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
      <span class="token selector">&amp;:hover</span> <span class="token punctuation">{</span>
        <span class="token selector">.d-caret</span> <span class="token punctuation">{</span>
          <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token selector">.d-caret</span> <span class="token punctuation">{</span>
        <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
        <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
        <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-50%<span class="token punctuation">,</span> -50%<span class="token punctuation">)</span> <span class="token function">rotate</span><span class="token punctuation">(</span>-45deg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--xw-c-text-2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.elp-iframe</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 24px<span class="token punctuation">;</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.full-screen-iframe</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100vw<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100vh - <span class="token atrule"><span class="token rule">@menu-height</span><span class="token punctuation">)</span> <span class="token important">!important</span><span class="token punctuation">;</span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token selector">.options</span> <span class="token punctuation">{</span>
  <span class="token property">border-top</span><span class="token punctuation">:</span> 1px solid #dcdfe6b2<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">justify-content</span><span class="token punctuation">:</span> flex-end<span class="token punctuation">;</span>
  <span class="token selector">.option-item</span> <span class="token punctuation">{</span>
    <span class="token property">margin-right</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>
    <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--xw-c-text-2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
    <span class="token selector">&amp;:hover</span> <span class="token punctuation">{</span>
      <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--xw-c-text-1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token selector">.source-code</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #f6f8fa<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">border-top</span><span class="token punctuation">:</span> 1px solid #dcdfe6b2<span class="token punctuation">;</span>
  <span class="token selector">.decode</span> <span class="token punctuation">{</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0 16px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">.hide-code-btn</span> <span class="token punctuation">{</span>
    <span class="token property">border-top</span><span class="token punctuation">:</span> 1px solid #dcdfe6b2<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 0 0 <span class="token function">var</span><span class="token punctuation">(</span>--xw-border-radius-base<span class="token punctuation">)</span> <span class="token function">var</span><span class="token punctuation">(</span>--xw-border-radius-base<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> sticky<span class="token punctuation">;</span>
    <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--xw-c-bg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">z-index</span><span class="token punctuation">:</span> 10<span class="token punctuation">;</span>
    <span class="token selector">.icon</span> <span class="token punctuation">{</span>
      <span class="token property">margin-right</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">&amp;::hover</span><span class="token punctuation">{</span>
      <span class="token property">color</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br></div></div><blockquote><p>该组件主要用于展示组件Demo 示例和源码：</p> <ul><li><p>组件内通过 <code>iframe</code> 展示 Demo 组件示例：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code> <span class="token comment">&lt;!--demo展示组件，使用 iframe 内嵌组件--&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>elp-iframe<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ 'full-screen-iframe': isFullScreen }<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>`${baseUrl[props.libType]}#/${props.iframeSrc}`<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ height: demoHeight }<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>其中:</p> <ul><li><p><code>props.iframeSrc</code> 表示 demo 组件的路由地址；（<code>iframeSrc</code> 为 示例组件开发时，配置的组件路由地址，配置位于 <code>packages/element-plus/demo/router.ts</code> ）</p></li> <li><p><code>base Url</code> : 为 <code>vitepress</code> 根目录中：</p> <ul><li><p>开发环境 <code>.env</code> 文件中配置，配置如下：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>VITE_BASE <span class="token operator">=</span> <span class="token string">'/public/'</span>
<span class="token comment"># 开发环境下预览文档 demo iframe 服务地址</span>
VITE_ELP_DEV_BASE <span class="token operator">=</span> <span class="token string">'http://localhost:3333/'</span> <span class="token comment"># element plus demo 开发服务地址</span>
VITE_ELU_DEV_BASE <span class="token operator">=</span> <span class="token string">'http://localhost:3633/'</span> <span class="token comment"># element ui demo 开发服务地址</span>
VITE_ANT_DEV_BASE <span class="token operator">=</span> <span class="token string">'http://localhost:3933/'</span> <span class="token comment"># ant design demo 开发服务地址</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>生产环境中在<code>.env.production</code> 配置：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 生产环境下预览文档 demo iframe 服务地址</span>
VITE_ELP_DEV_BASE <span class="token operator">=</span> <span class="token string">'/element-plus/'</span> <span class="token comment"># element plus demo 部署地址</span>
VITE_ELU_DEV_BASE <span class="token operator">=</span> <span class="token string">'/element-ui/'</span>   <span class="token comment"># element ui demo 部署地址</span>
VITE_ANT_DEV_BASE <span class="token operator">=</span> <span class="token string">'/ant-design/'</span>   <span class="token comment"># ant design demo 部署地址</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul></li> <li><p>通过以上配置，最终在测试服务，生成的 <code>iframe</code> 的 <code>src</code> 属性为 <code>http://localhost:3633/#/组件路由地址</code> （以 <code>element ui</code> 为例）。以下图中是文档中 demo 组件展示的调试源码，可以看到组件是通过 <code>iframe</code> 内嵌到页面中：</p> <p><img src="/myblog/assets/img/image-20240307155022633.03d823c8.png" alt="image-20240307155022633"></p></li></ul></li> <li><p>开发环境实现原理如下：</p></li></ul> <img src="/myblog/assets/img/image-20240307163613269.bdb8360c.png" alt="image-20240307163613269" style="zoom:50%;"> <p>如上图所示，不同的 ui框架 启动的 dev server 端口号不同。在文档项目的开发环境中，即是通过不同的端口号在 <code>iframe</code> 中导入用不同的UI框架组件库，所以如果要正确预览组件，也需要把对应项目的 <code>dev server</code>给启动起来。</p></blockquote> <h4 id="源码展示解析插件"><a href="#源码展示解析插件" class="header-anchor">#</a> <strong>源码展示解析插件</strong></h4> <p>Demo 展示组件中，除了展示组件的示例外，还需要展示示例用法的代码，示例组件的源码，在组件库中 <code>demo</code> 目录下，以 <code>element-ui</code> 组件库中 table 组件 demo 用法为例，文档中展示结果如下：</p> <img src="/myblog/assets/img/image-20240307155515300.65bcb57a.png" alt="image-20240307155515300" style="zoom:67%;"> <p>上半部分为组件效果，下半部分为使用代码示例。组件的使用代码示例在 <code>packages/element-ui/demo/table/table-custom-columns.vue</code> 下：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>x-table</span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tableData<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:default-columns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>defaultColumns<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span>
        <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>date<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>日期<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>90<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table-column</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span>
        <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>姓名<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>90<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table-column</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span>
        <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>age<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>年龄<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>90<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table-column</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span>
        <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>address<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>地址<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table-column</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>x-table</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> XTable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@xw-ui/xw-element-ui'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'TableCustomColumns'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span> XTable <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">defaultColumns</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'日期'</span><span class="token punctuation">,</span> <span class="token string">'姓名'</span><span class="token punctuation">,</span> <span class="token string">'地址'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">tableData</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        <span class="token literal-property property">date</span><span class="token operator">:</span> <span class="token string">'2016-05-02'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'王小虎'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
        <span class="token literal-property property">address</span><span class="token operator">:</span> <span class="token string">'上海市普陀区金沙江路 1518 弄'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">date</span><span class="token operator">:</span> <span class="token string">'2016-05-04'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'王小虎'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
        <span class="token literal-property property">address</span><span class="token operator">:</span> <span class="token string">'上海市普陀区金沙江路 1517 弄'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">date</span><span class="token operator">:</span> <span class="token string">'2016-05-01'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'王小虎'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
        <span class="token literal-property property">address</span><span class="token operator">:</span> <span class="token string">'上海市普陀区金沙江路 1519 弄'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">date</span><span class="token operator">:</span> <span class="token string">'2016-05-03'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'王小虎'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
        <span class="token literal-property property">address</span><span class="token operator">:</span> <span class="token string">'上海市普陀区金沙江路 1516 弄111'</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br></div></div><p>从以上代码可以看到，table 组件使用示例源码和文档中展示的源码一模一样。</p> <p><strong>在 demo 目录下编写的代码将映射到文档的组件使用示例源码中。</strong></p> <p>文档中引入示例组件方式：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>xw-demo</span>
    <span class="token attr-name">demo-height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100px<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">source-code</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>element-plus:::button/button-demo<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>源码解析插件主要作用是解析示例组件的 <code>source-code</code> 属性</strong>（该属性值为 <code>项目名:::组件路由地址</code> ，通过 <code>:::</code> 符号对项目名和组件路由地址进行分割），解析该属性指定的 demo 组件的源码，将源码进行编码成字符串，作为 <code>xw-demo</code> 的值传入。</p> <p>源码解析插件位于 <code>docs/plugins/source-code.ts</code>，该插件通过使用 <code>vite</code> 编译的  <code>transform</code> 钩子，在每个传入 markdown 文件被请求时候，解析出 markdown 中 <code>xw-demo</code> 组件中的  <code>source-code</code> 对应的源码，转为字符串：</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> path <span class="token keyword">from</span> <span class="token string">'path'</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> fsPromises <span class="token keyword">from</span> <span class="token string">'fs/promises'</span>
<span class="token keyword">import</span> Prism <span class="token keyword">from</span> <span class="token string">'prismjs'</span>
<span class="token keyword">import</span> loadLanguages <span class="token keyword">from</span> <span class="token string">'prismjs/components/index'</span> <span class="token comment">// 语法高亮</span>

<span class="token function">loadLanguages</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'markup'</span><span class="token punctuation">,</span> <span class="token string">'css'</span><span class="token punctuation">,</span> <span class="token string">'javascript'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// 将源码使用 &lt;pre&gt; 标签包裹</span>
<span class="token keyword">const</span> <span class="token function-variable function">warp</span> <span class="token operator">=</span> code <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;pre v-pre&gt;&lt;code&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>code<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/code&gt;&lt;/pre&gt;</span><span class="token template-punctuation string">`</span></span>
<span class="token comment">/**
 * 实现原理是将一个字符串按照特定的模式（.*?source-code=&quot;(.*)&quot;）进行匹配，然后将匹配到的结果按照:::分割成数组
 * @param _ 
 * @returns 
 */</span>
<span class="token keyword">function</span> <span class="token function">sourceSplit</span><span class="token punctuation">(</span>_<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.*?source-code=&quot;(.*)&quot;</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>_<span class="token punctuation">)</span>
  <span class="token keyword">const</span> originPath <span class="token operator">=</span> <span class="token punctuation">(</span>result <span class="token operator">&amp;&amp;</span> result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">??</span> <span class="token string">''</span>
  <span class="token keyword">return</span> originPath<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">':::'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 项目包路径</span>
<span class="token keyword">const</span> packagesPath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../../packages/'</span><span class="token punctuation">)</span>
<span class="token comment">/**
 * 用于将 Markdown 文件中的代码示例转换为可显示在网页上的代码片段。
 * 它首先会提取模块代码中的 source-code 属性，然后读取相应的文件，并将文件内容替换到属性中。
 * 这样，浏览器就可以直接解析模块代码中的代码片段了
 * docs:https://rollupjs.org/plugin-development/#transform
 * @param src string 源代码字符串
 * @param id  string | SourceMap;
 * @returns 
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">sourceCode</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>

    <span class="token comment">//在每个传入模块请求时被调用  transform 钩子</span>
    <span class="token keyword">async</span> <span class="token function">transform</span><span class="token punctuation">(</span>src<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> mdFile <span class="token operator">=</span> <span class="token string">'.md'</span> <span class="token comment">// 文件类型</span>
      <span class="token comment">// 文件非 markodwn 类型，返回</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>id<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>mdFile<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
      <span class="token comment">// 提取示例组件中source-code属性值</span>
      <span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">source-code=&quot;(.*)&quot;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span>
      <span class="token comment">// 示例组件中不存在source-code属性，返回</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>src<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
      <span class="token comment">//使用正则表达式从模块代码中提取 source-code 属性，并将其替换为实际的代码内容。</span>
      <span class="token keyword">const</span> match <span class="token operator">=</span> src<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token operator">?.</span><span class="token function">map</span><span class="token punctuation">(</span>_ <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 获取示例组件项目名和文件地址，通过 “项目名:::组件路由地址” 进行分割</span>
        <span class="token keyword">const</span> <span class="token punctuation">[</span>packageName<span class="token punctuation">,</span> compPath<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">sourceSplit</span><span class="token punctuation">(</span>_<span class="token punctuation">)</span>
        <span class="token comment">// 获取项目类型，react 使用ant design 组件，使用 jsx 语法， Vue 使用</span>
        <span class="token keyword">const</span> suffix <span class="token operator">=</span> packageName<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'ant'</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">'jsx'</span> <span class="token operator">:</span> <span class="token string">'vue'</span>
        <span class="token comment">// 返回读取的文件内容</span>
        <span class="token keyword">return</span> fsPromises<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>packagesPath<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>packageName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/demo/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>compPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>suffix<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> filesRes <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>match<span class="token punctuation">)</span>

      <span class="token comment">//正则表达式 /source-code=&quot;(.*)&quot;/g 可能会匹配到多个匹配项，因此在替换时需要使用 i++ 来确保每次替换都是唯一的。</span>
      <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span>
      <span class="token comment">//读取模块代码中的所有文件，并将其内容合并到模块代码中</span>
      <span class="token keyword">return</span> src<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>reg<span class="token punctuation">,</span> <span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
         <span class="token comment">// 获取示例组件项目名和文件地址，通过 “项目名:::组件路由地址” 进行分割</span>
        <span class="token keyword">const</span> <span class="token punctuation">[</span>packageName<span class="token punctuation">,</span> compPath<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">sourceSplit</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
        <span class="token comment">// 获取示例组件地址</span>
        <span class="token keyword">const</span> compPathStrArr <span class="token operator">=</span> compPath<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
        <span class="token comment">// iframe src 地址</span>
        <span class="token keyword">const</span> iframeSrc <span class="token operator">=</span> compPathStrArr<span class="token punctuation">[</span>compPathStrArr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>
        <span class="token keyword">const</span> file <span class="token operator">=</span> filesRes<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
        i<span class="token operator">++</span>
        <span class="token comment">// 返回编码后的源码文件内容</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">source-code=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span><span class="token function">warp</span><span class="token punctuation">(</span>Prism<span class="token punctuation">.</span><span class="token function">highlight</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> Prism<span class="token punctuation">.</span>languages<span class="token punctuation">.</span>markup<span class="token punctuation">,</span> <span class="token string">'markup'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; raw-source=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; lib-type=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>packageName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot; iframe-src=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>iframeSrc<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span><span class="token template-punctuation string">`</span></span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> sourceCode
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br></div></div><h3 id="搭建组件测试项目"><a href="#搭建组件测试项目" class="header-anchor">#</a> <strong>搭建组件测试项目</strong></h3> <h3 id="部署发布"><a href="#部署发布" class="header-anchor">#</a> <strong>部署发布</strong></h3> <p>完成一个组件开发后，编写组件项目文档，测试完成后进行部署</p> <p>部署分为两个部分：</p> <ol><li>部署组件库文档</li> <li>发布 npm 组件库</li></ol> <h4 id="文档部署"><a href="#文档部署" class="header-anchor">#</a> <strong>文档部署</strong></h4> <p><strong>使用 Git page 部署</strong></p> <p>使用 Git page 部署有两种方式：</p> <ol><li>GitHub Pages 站点配置为在将更改推送到特定分支时发布；</li> <li>编写 GitHub Actions 工作流程来发布站点</li></ol> <blockquote><p>详细部署流程参考文档：<a href="https://docs.github.com/en/pages/getting-started-with-github-pages/configuring-a-publishing-source-for-your-github-pages-site" target="_blank" rel="noopener noreferrer">为 GitHub Pages 站点配置发布源 - GitHub 文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p><strong>GitHub Pages 站点配置</strong></p> <p>使用GitHub Pages 站点配置部署流程：</p> <ol><li>创建部署分支 (<code>gh-deploy</code>): 部署分支用于编辑发布部署相关代码，如：部署脚本和部署配置项；</li> <li>创建页面发布分支 (<code>gh-pages</code>)： 页面发布分支保存构建出来的静态页面，并在设置为 github pages 的页面分支；</li> <li>配置页面站点(<code>gh-pages</code>)：页面站点配置展示静态页面的分支 。</li></ol> <p>站点分支配置如下：</p> <img src="/myblog/assets/img/image-20240319110839777.82a1211f.png" alt="image-20240319110839777" style="zoom:80%;"> <blockquote><p><code>mater</code>: 主分支，保护，确认版本后发布到主分支；</p> <p><code>gh-deploy</code>: git page 发布分支，完成组件开发后，合并到该分支进行 git page 发布；</p> <p><code>gh-pages</code>:  git page 静态页面分支，主要用于发布构建出的静态页面到 git page；</p> <p><code>main</code>:  GitHub Actions 工作流程发布分支，使用  GitHub Actions 工作流程发布 发布时，组件开发完成后，合并到该分支进行线上构建和发布；</p></blockquote> <p><strong>部署分支 (<code>gh-deploy</code>)</strong>
部署分支用于编辑发布部署相关代码，当使用本地构建发布时， 完成组件开发后，合并到该分支进行 git page 发布；</p> <p>该分支主要区别为保存了 <code>git page</code> 发布的 vitepress 配置和 <code>deploy.sh</code> 发布脚本；</p> <p><code>deploy.sh</code> 发布脚：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/usr/bin/env sh</span>

<span class="token comment"># 确保脚本抛出遇到的错误</span>
<span class="token builtin class-name">set</span> <span class="token parameter variable">-e</span>

<span class="token comment"># 生成静态文件</span>
<span class="token function">pnpm</span> docs:build

<span class="token comment"># 进入生成的文件夹</span>
<span class="token builtin class-name">cd</span> docs/.vitepress/dist

<span class="token comment"># 如果是发布到自定义域名</span>
<span class="token comment"># echo 'www.yourwebsite.com' &gt; CNAME</span>

<span class="token comment"># 初始化git仓库（如果尚未初始化）</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-d</span> <span class="token string">&quot;.git&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token function">git</span> init
<span class="token keyword">fi</span>

<span class="token comment"># 检查deploy分支是否存在</span>
<span class="token function">git</span> branch <span class="token parameter variable">-a</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-qw</span> <span class="token string">&quot;gh-pages&quot;</span>

<span class="token comment"># 根据是否存在deploy分支，创建临时分支</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$?</span> <span class="token parameter variable">-eq</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token comment"># deploy分支存在，直接切换到该分支</span>
    <span class="token function">git</span> checkout gh-pages
<span class="token keyword">else</span>
    <span class="token comment"># deploy分支不存在，创建并切换到该分支</span>
    <span class="token function">git</span> checkout <span class="token parameter variable">-b</span> gh-pages
<span class="token keyword">fi</span>
<span class="token function">git</span> <span class="token function">add</span> <span class="token parameter variable">-A</span>
<span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">'deploy'</span>

<span class="token comment"># 如果发布到 https://USERNAME.github.io/&lt;REPO&gt;  REPO=github上的项目</span>
<span class="token function">git</span> push <span class="token parameter variable">-f</span> https://github.com/Sewar-x/X-UI.git gh-pages:gh-pages

<span class="token builtin class-name">cd</span> -

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><p><strong>发布 git page 流程</strong>：</p> <ol><li>切换分支 <code>git checkout git gh-deploy</code></li> <li>使用 shell 执行发布脚本命令：<code>pnpm run docs:deploy</code></li></ol> <p><strong>使用 GitHub Actions 工作流程发布站点</strong></p> <p>使用该模式，需要在项目中添加自动 action 构建脚本，并推送到仓库中，会自动触发构建脚本进行线上构建；</p> <p>创建工作流脚本：</p> <ol><li><p>配置github page 通过 action 工作量构建：</p> <ol><li><p>在 GitHub 上，导航到站点的存储库。</p></li> <li><p>在存储库名称下，单击**“设置**”。如果您看不到“设置”选项卡，请选择下拉菜单，然后单击<strong>设置</strong>。</p> <p><img src="/myblog/assets/img/repo-actions-settings.ff440ce1.png" alt="显示选项卡的存储库标头的屏幕截图。“设置”选项卡以深橙色轮廓突出显示。"></p></li> <li><p>在边栏的“代码和自动化”部分，点击<strong>页面</strong>.</p></li> <li><p>在“生成和部署”下的“源”下，选择 <strong>GitHub Actions</strong></p></li></ol></li> <li><p>创建构建脚本：</p> <ol><li><p>在项目根目录下创建脚本： <code>.github/workflows/deploy.yml</code></p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment"># 构建 VitePress 站点并将其部署到 GitHub Pages 的示例工作流程</span>
<span class="token comment">#</span>
<span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy VitePress site to Pages

<span class="token key atrule">on</span><span class="token punctuation">:</span>
  <span class="token comment"># 在针对 `main` 分支的推送上运行。如果你</span>
  <span class="token comment"># 使用 `master` 分支作为默认分支，请将其更改为 `master`</span>
  <span class="token key atrule">push</span><span class="token punctuation">:</span>
    <span class="token key atrule">branches</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span>

  <span class="token comment"># 允许你从 Actions 选项卡手动运行此工作流程</span>
  <span class="token key atrule">workflow_dispatch</span><span class="token punctuation">:</span>

<span class="token comment"># 设置 GITHUB_TOKEN 的权限，以允许部署到 GitHub Pages</span>
<span class="token key atrule">permissions</span><span class="token punctuation">:</span>
  <span class="token key atrule">contents</span><span class="token punctuation">:</span> read
  <span class="token key atrule">pages</span><span class="token punctuation">:</span> write
  <span class="token key atrule">id-token</span><span class="token punctuation">:</span> write

<span class="token comment"># 只允许同时进行一次部署，跳过正在运行和最新队列之间的运行队列</span>
<span class="token comment"># 但是，不要取消正在进行的运行，因为我们希望允许这些生产部署完成</span>
<span class="token key atrule">concurrency</span><span class="token punctuation">:</span>
  <span class="token key atrule">group</span><span class="token punctuation">:</span> pages
  <span class="token key atrule">cancel-in-progress</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token comment"># 构建工作</span>
  <span class="token key atrule">build</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Checkout
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v4
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">fetch-depth</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token comment"># 如果未启用 lastUpdated，则不需要</span>
      <span class="token punctuation">-</span> <span class="token key atrule">uses</span><span class="token punctuation">:</span> pnpm/action<span class="token punctuation">-</span>setup@v2.1.0  
        <span class="token key atrule">with</span><span class="token punctuation">:</span>  
          <span class="token key atrule">version</span><span class="token punctuation">:</span> 6.x <span class="token comment"># 你可以指定你需要的 pnpm 版本  </span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Setup Node
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>node@v4
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">node-version</span><span class="token punctuation">:</span> <span class="token number">18</span>
          <span class="token key atrule">cache</span><span class="token punctuation">:</span> pnpm <span class="token comment"># 或 pnpm / yarn</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Setup Pages
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/configure<span class="token punctuation">-</span>pages@v4
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install dependencies
        <span class="token key atrule">run</span><span class="token punctuation">:</span>  pnpm install <span class="token comment"># 或 pnpm install / yarn install / bun install</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Build with VitePress
        <span class="token key atrule">run</span><span class="token punctuation">:</span>  pnpm run docs<span class="token punctuation">:</span>build <span class="token comment"># 或 pnpm docs:build / yarn docs:build / bun run docs:build</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Upload artifact
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/upload<span class="token punctuation">-</span>pages<span class="token punctuation">-</span>artifact@v3
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">path</span><span class="token punctuation">:</span> docs/.vitepress/dist

  <span class="token comment"># 部署工作</span>
  <span class="token key atrule">deploy</span><span class="token punctuation">:</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> github<span class="token punctuation">-</span>pages
      <span class="token key atrule">url</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> steps.deployment.outputs.page_url <span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token key atrule">needs</span><span class="token punctuation">:</span> build
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy to GitHub Pages
        <span class="token key atrule">id</span><span class="token punctuation">:</span> deployment
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/deploy<span class="token punctuation">-</span>pages@v4
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br></div></div></li> <li><p>修改代码，推送代码到main分支，线上会根据以上脚本配置，自动触发 action 工作流。</p></li></ol></li></ol> <h2 id="组件列表"><a href="#组件列表" class="header-anchor">#</a> <strong>组件列表</strong></h2> <h3 id="组件分类"><a href="#组件分类" class="header-anchor">#</a> <strong>组件分类</strong></h3> <h4 id="基础组件"><a href="#基础组件" class="header-anchor">#</a> <strong>基础组件</strong></h4> <h4 id="扩展组件"><a href="#扩展组件" class="header-anchor">#</a> <strong>扩展组件</strong></h4> <h2 id="参考资料"><a href="#参考资料" class="header-anchor">#</a> <strong>参考资料</strong></h2> <p><a href="https://juejin.cn/post/7120893568553582622" target="_blank" rel="noopener noreferrer">快上车！从零开始搭建一个属于自己的组件库！ - 掘金 (juejin.cn)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <!----> <div class="content__content-bottom"></div> <footer class="page-meta"><!----> <div class="meta-item update-time"><span class="label">Last update:</span> <span class="info">March 20, 2024 13:47</span></div> <div class="meta-item contributors"><span class="label">Contributors: </span> <span class="info"><span title="email: 596777598@qq.com" class="contributor">
          sewar
        </span> <!----></span></div></footer> <!----> <!----> <!----> <div class="content__page-bottom"></div></main> <!----></div><div class="global-ui"><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="Close" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">This app can be installed on your PC or mobile device.  This will allow this web app to look and behave like any other installed app.  You will find it in your app lists and be able to pin it to your home screen, start menus or task bars.  This installed web app will also be able to safely interact with other apps and your operating system. </p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>Description</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        Install <span></span></button> <button class="cancel-button">
        Cancel
      </button></div></div></div></div><!----><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button title="Close" aria-label="Close" class="pswp__button pswp__button--close"></button> <button title="Share" aria-label="Share" class="pswp__button pswp__button--share"></button> <button title="Switch to full screen" aria-label="Switch to full screen" class="pswp__button pswp__button--fs"></button> <button title="Zoom in/out" aria-label="Zoom in/out" class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button title="Prev (Arrow Left)" aria-label="Prev (Arrow Left)" class="pswp__button pswp__button--arrow--left"></button> <button title="Next (Arrow Right)" aria-label="Next (Arrow Right)" class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></div></div>
    <script src="/myblog/assets/js/app.9d2b617a.js" defer></script><script src="/myblog/assets/js/layout-Layout.d2d4ce64.js" defer></script><script src="/myblog/assets/js/page-从零到一搭建公共组件库.93278073.js" defer></script><script src="/myblog/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-components/Blog/BlogHome~layout-components/~2222f443.5835591a.js" defer></script>
  </body>
</html>
