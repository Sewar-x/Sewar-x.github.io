(window.webpackJsonp=window.webpackJsonp||[]).push([[166],{1147:function(s,t,n){s.exports=n.p+"assets/img/event-loop.089f9a93.gif"},1148:function(s,t,n){s.exports=n.p+"assets/img/eventCycle.1e11ac01.png"},1149:function(s,t){s.exports="data:image/png;base64,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"},1150:function(s,t,n){s.exports=n.p+"assets/img/node时间循环流程.bd5636b3.png"},1151:function(s,t,n){s.exports=n.p+"assets/img/event-loop-node.b953bfba.png"},1152:function(s,t,n){s.exports=n.p+"assets/img/async1.ac2ac713.png"},1153:function(s,t,n){s.exports=n.p+"assets/img/async2.e39cf562.png"},1154:function(s,t,n){s.exports=n.p+"assets/img/async-awiat1.d75210cf.png"},1155:function(s,t,n){s.exports=n.p+"assets/img/async-awiat2.6445b468.png"},1156:function(s,t,n){s.exports=n.p+"assets/img/async-awiat3.e55956af.png"},1157:function(s,t,n){s.exports=n.p+"assets/img/async-awiat4.dc4e7508.png"},1158:function(s,t,n){s.exports=n.p+"assets/img/async-awiat5.9e31417e.png"},1694:function(s,t,n){"use strict";n.r(t);var a=n(1),e=Object(a.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"异步编程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#异步编程"}},[s._v("#")]),s._v(" 异步编程")]),s._v(" "),t("h2",{attrs:{id:"宏任务-微任务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#宏任务-微任务"}},[s._v("#")]),s._v(" 宏任务&微任务")]),s._v(" "),t("p",[t("strong",[s._v("事件循环")]),s._v("：event loop 宏任务：macrotask 也称为 task 微任务：microtask 也称为 jobs")]),s._v(" "),t("p",[t("strong",[s._v("微任务")])]),s._v(" "),t("ul",[t("li",[s._v("process.nextTick (Node)")]),s._v(" "),t("li",[s._v("promise.then()，Promise.resolve()")]),s._v(" "),t("li",[s._v("Object.observe")]),s._v(" "),t("li",[s._v("MutationObserver (浏览器)")])]),s._v(" "),t("p",[t("strong",[s._v("宏任务")])]),s._v(" "),t("ul",[t("li",[s._v("script(主程序代码)")]),s._v(" "),t("li",[s._v("setTimeout, setInterval, setImmediate,")]),s._v(" "),t("li",[s._v("I/O, UI rendering")]),s._v(" "),t("li",[s._v("回调函数（事件、ajax等）")])]),s._v(" "),t("p",[t("img",{attrs:{src:n(504),alt:""}})]),s._v(" "),t("p",[t("strong",[s._v("过程")]),s._v("： 在一次事件循环中，会先执行js线程的主任务，然后会去查找是否有微任务microtask（promise），如果有那就优先执行所有微任务，如果没有，在去查找宏任务macrotask（setTimeout、setInterval）进行执行。")]),s._v(" "),t("p",[s._v("一个事件循环的执行步骤：")]),s._v(" "),t("ul",[t("li",[s._v("执行同步代码，这属于宏任务\n"),t("ul",[t("li",[s._v("在执行宏任务时，如遇到微任务，将微任务添加到本次循环的微任务队列中；")])])]),s._v(" "),t("li",[s._v("执行所有微任务")]),s._v(" "),t("li",[s._v("渲染 UI")]),s._v(" "),t("li",[s._v("然后开始下一轮 Event loop，执行宏任务中的异步代码")])]),s._v(" "),t("p",[t("img",{attrs:{src:n(1147),alt:""}})]),s._v(" "),t("h2",{attrs:{id:"浏览器事件循环"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#浏览器事件循环"}},[s._v("#")]),s._v(" 浏览器事件循环")]),s._v(" "),t("p",[t("img",{attrs:{src:n(1148),alt:""}})]),s._v(" "),t("p",[s._v("浏览器的事件循环（Event Loop）是一种机制，用于管理 JavaScript 代码的执行顺序和处理异步事件。")]),s._v(" "),t("p",[s._v("它确保 JavaScript 代码能够按照正确的顺序执行，并且能够响应用户交互、网络请求、计时器等异步事件。")]),s._v(" "),t("p",[s._v("浏览器事件循环过程：")]),s._v(" "),t("p",[s._v("JS 是"),t("strong",[s._v("单线程")]),s._v("（指 JS 引擎线程）运行的，在代码执行的时候，通过将不同函数的执行上下文压入执行栈中来保证代码的有序执行：")]),s._v(" "),t("ol",[t("li",[t("p",[t("strong",[s._v("执行同步代码")]),s._v("：")]),s._v(" "),t("ul",[t("li",[s._v("JavaScript 代码从上到下按顺序执行，遇到同步任务就立即执行。")]),s._v(" "),t("li",[s._v("同步任务包括函数调用、变量赋值、计算等。")]),s._v(" "),t("li",[s._v("在执行同步代码的时候，如果遇到了异步事件，将异步事件添加到事件队列，继续执行执行栈中的其他任务。")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("处理微任务（Microtask）队列")]),s._v("：")]),s._v(" "),t("ul",[t("li",[s._v("在执行完所有同步代码后，浏览器会检查是否存在微任务队列。")]),s._v(" "),t("li",[s._v("微任务包括 Promise 的回调函数、MutationObserver 的回调函数等。")]),s._v(" "),t("li",[s._v("如果存在微任务，会按顺序执行微任务队列中的所有任务，直到队列为空。")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("渲染页面")]),s._v("：")]),s._v(" "),t("ul",[t("li",[s._v("在执行完微任务后，浏览器会根据需要更新页面的显示。")]),s._v(" "),t("li",[s._v("渲染页面通过 GUI 渲染线程渲染。")]),s._v(" "),t("li",[s._v("这包括执行布局计算、样式计算等，以确保页面的可见部分保持最新状态。")])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("处理宏任务（Macrotask）队列（Web APIS）")]),s._v("：")]),s._v(" "),t("ul",[t("li",[s._v("在执行完微任务并完成页面渲染后，浏览器会检查是否存在宏任务队列。")]),s._v(" "),t("li",[s._v("宏任务包括DOM 操作、定时器（setTimeout、setInterval）、事件回调（如点击事件、AJAX 请求的回调）等。")]),s._v(" "),t("li",[s._v("如果存在宏任务，会从队列中取出一个任务执行。执行完当前宏任务后，再次检查微任务队列。")]),s._v(" "),t("li",[s._v("宏任务通过其他线程（非 JS 线程）：事件触发线程、定时触发器线程、异步 http 请求线程 执行。")])])]),s._v(" "),t("li",[t("p",[s._v("重复执行：")]),s._v(" "),t("ul",[t("li",[s._v("上述步骤会不断重复，即先执行微任务，然后渲染页面，再执行宏任务，以此类推。")]),s._v(" "),t("li",[s._v("这个过程就是事件循环的基本流程。")])])])]),s._v(" "),t("p",[s._v("注意："),t("strong",[s._v("微任务优先级高于宏任务，即在每个宏任务执行完毕后，会先执行所有的微任务，然后再执行下一个宏任务")]),s._v("。这保证了微任务的优先级和响应性能。")]),s._v(" "),t("p",[s._v("总结：")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("浏览器的事件循环机制确保 JavaScript 代码的按序执行，并处理异步事件。")])]),s._v(" "),t("li",[t("p",[s._v("它包括执行同步代码、处理微任务队列、渲染页面、处理宏任务队列等步骤，不断重复以实现异步任务的执行和页面的更新。")])]),s._v(" "),t("li",[t("p",[s._v("微任务优先级高于宏任务，确保微任务能够及时响应和执行。")])])]),s._v(" "),t("p",[s._v("关于浏览器的线程，可以参考另一篇 "),t("a",{attrs:{href:"https://sewar-x.github.io/browser/browser/#%E6%B5%8F%E8%A7%88%E5%99%A8%E8%BF%9B%E7%A8%8B",target:"_blank",rel:"noopener noreferrer"}},[s._v("浏览器进程"),t("OutboundLink")],1),s._v(" 文章。")]),s._v(" "),t("p",[t("strong",[s._v("参考资料")])]),s._v(" "),t("p",[t("a",{attrs:{href:"https://juejin.cn/post/6844903764202094606#heading-26",target:"_blank",rel:"noopener noreferrer"}},[s._v("一次弄懂Event Loop"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"node-事件循环"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#node-事件循环"}},[s._v("#")]),s._v(" Node 事件循环")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("Node 事件循环模型：")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("Node 的 event loop 分为6个阶段，它们会按照顺序反复运行，分别如下:")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("timers")]),s._v("：执行 "),t("code",[s._v("setTimeout()")]),s._v(" 和 "),t("code",[s._v("setInterval()")]),s._v(" 中到期的callback;")]),s._v(" "),t("li",[t("code",[s._v("I/O callbacks")]),s._v("：上一轮循环中有少数的 "),t("code",[s._v("I/O callback")]),s._v(" 会被延迟到这一轮的这一阶段执行;")]),s._v(" "),t("li",[t("code",[s._v("idle, prepare")]),s._v("：队列的移动，仅内部使用;")]),s._v(" "),t("li",[t("code",[s._v("poll")]),s._v("：最为重要的阶段，执行 "),t("code",[s._v("I/O callback")]),s._v("，在适当的条件下会阻塞在这个阶段")]),s._v(" "),t("li",[t("code",[s._v("check")]),s._v("：执行 "),t("code",[s._v("setImmediate")]),s._v(" 的 callback")]),s._v(" "),t("li",[t("code",[s._v("close callbacks")]),s._v("：执行 close 事件的 callback，例如 "),t("code",[s._v('socket.on("close",func)')])])]),s._v(" "),t("p",[t("img",{attrs:{src:n(1149),alt:""}})])]),s._v(" "),t("li",[t("p",[s._v("不同于浏览器的是，在每个阶段完成后，而不是 macroTask 任务完成后，microTask队列就会被执行。这就导致了"),t("strong",[s._v("同样的代码在不同的上下文环境下会出现不同的结果")]),s._v(".")])]),s._v(" "),t("li",[t("p",[s._v("如果在 timers 阶段执行时创建了 setImmediate 则会在此轮循环的 check 阶段执行，如果在 timers 阶段创建了 setTimeout，由于 timers 已取出完毕，则会进入下轮循环，check 阶段创建 timers 任务同理。")])])])]),s._v(" "),t("li",[t("p",[s._v("流程："),t("img",{attrs:{src:n(1150),alt:"第46页-24"}})]),s._v(" "),t("ul",[t("li",[t("p",[s._v("在Node中，同样存在宏任务和微任务，与浏览器中的事件循环相似")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("微任务对应有：")]),s._v(" "),t("ul",[t("li",[t("p",[t("strong",[s._v("next tick queue")]),s._v(":process.nextTick")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("other queue")]),s._v(":Promise的then回调、queueMicrotask")])])])]),s._v(" "),t("li",[t("p",[s._v("宏任务对应有：")]),s._v(" "),t("ul",[t("li",[t("p",[t("strong",[s._v("timer queue")]),s._v(":setTimeout、setlnterval")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("poll queue")]),s._v(":IO事件")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("check queue")]),s._v(":setlmmediate")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("close queue")]),s._v(":close事件")])])])]),s._v(" "),t("li",[t("p",[s._v("其执行顺序为：next tick microtask queue")]),s._v(" "),t("ul",[t("li",[s._v("other microtask queue")]),s._v(" "),t("li",[s._v("timer queue")]),s._v(" "),t("li",[s._v("poll queue")]),s._v(" "),t("li",[s._v("check queue")]),s._v(" "),t("li",[s._v("close queue")])])])])])])]),s._v(" "),t("li",[t("p",[s._v("Node 事件循环底层实现：")]),s._v(" "),t("ul",[t("li",[t("p",[t("code",[s._v("Node")]),s._v("中的"),t("code",[s._v("Event Loop")]),s._v("是基于"),t("code",[s._v("libuv")]),s._v("实现的，而"),t("code",[s._v("libuv")]),s._v("是 "),t("code",[s._v("Node")]),s._v(" 的新跨平台抽象层，libuv使用异步，事件驱动的编程方式，核心是提供"),t("code",[s._v("i/o")]),s._v("的事件循环和异步回调。")])]),s._v(" "),t("li",[t("p",[s._v("libuv的"),t("code",[s._v("API")]),s._v("包含有时间，非阻塞的网络，异步文件操作，子进程等等。 "),t("code",[s._v("Event Loop")]),s._v("就是在"),t("code",[s._v("libuv")]),s._v("中实现的。")]),s._v(" "),t("p",[t("img",{attrs:{src:n(1151),alt:""}})])])])]),s._v(" "),t("li",[t("p",[s._v("事件顺序的示例:")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello => number 1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setImmediate")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Running before the timeout => number 3"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setTimeout")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"The timeout running last => number 4"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nprocess"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nextTick")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Running at next tick => number 2"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//输出结果")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//Hello => number 1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//Running at next tick => number 2")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//Running before the timeout => number 3")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//The timeout running last => number 4")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])])])]),s._v(" "),t("h2",{attrs:{id:"浏览器-node-事件循环区别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#浏览器-node-事件循环区别"}},[s._v("#")]),s._v(" 浏览器&Node 事件循环区别")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("执行顺序区别：")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("浏览器先执行所有宏任务，然后再执行所有微任务")])]),s._v(" "),t("li",[t("p",[s._v("Node 按 6 阶段顺序执行，先执行 timer 任务，后执行microtask队列的所有任务")])]),s._v(" "),t("li",[t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setTimeout")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'timer1'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    Promise"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("then")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'promise1'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setTimeout")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'timer2'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    Promise"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("then")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'promise2'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n浏览器输出：\ntime1\npromise1\ntime2\npromise2\n\nNode输出：\ntime1\ntime2\npromise1\npromise2\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br")])]),t("ul",[t("li",[s._v("浏览器：两个setTimeout作为两个MacroTask, 所以先输出timer1, promise1，再输出timer2，promise2；")]),s._v(" "),t("li",[s._v("Node：最初timer1和timer2就在timers阶段中。开始时首先进入timers阶段，执行timer1的回调函数，打印timer1，并将promise1.then回调放入microtask队列，同样的步骤执行timer2，打印timer2；\n至此，timer阶段执行结束，event loop进入下一个阶段之前，执行microtask队列的所有任务，依次打印promise1、promise2。")])])])])])]),s._v(" "),t("h2",{attrs:{id:"异步编程方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#异步编程方式"}},[s._v("#")]),s._v(" 异步编程方式")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("回调函数（Callback）：将一个函数作为参数传递给另一个函数，在异步操作完成后，通过回调函数处理结果。")]),s._v(" "),t("ul",[t("li",[s._v("优点：简单、容易理解；")]),s._v(" "),t("li",[s._v("缺点：导致回调地狱和代码可读性差的问题，不利于维护，代码耦合高")])])]),s._v(" "),t("li",[t("p",[s._v("事件监听: 采用时间驱动模式，取决于某个事件是否发生")]),s._v(" "),t("ul",[t("li",[s._v("优点：容易理解，可以绑定多个事件，每个事件可以指定多个回调函；")]),s._v(" "),t("li",[s._v("缺点：事件驱动型，流程不够清晰")])])]),s._v(" "),t("li",[t("p",[s._v("发布/订阅(观察者模式):  类似于事件监听，但是可以通过 消息中心，了解现在有多少发布者，多少订阅者 Promise对象")]),s._v(" "),t("ul",[t("li",[s._v("优点：可以利用 then方法，进行链式写法；可以书写错误时的回调函数；")]),s._v(" "),t("li",[s._v("缺点：编写和理解，相对比较难")])])]),s._v(" "),t("li",[t("p",[s._v("Promise 函数：Promise对象表示一个异步操作的最终完成或失败，并可链式调用"),t("code",[s._v(".then()")]),s._v("和"),t("code",[s._v(".catch()")]),s._v("等方法处理操作结果。")])]),s._v(" "),t("li",[t("p",[s._v("Generator 函数")]),s._v(" "),t("ul",[t("li",[s._v("优点：函数体内外的数据交换、错误处理机制；")]),s._v(" "),t("li",[s._v("缺点：流程管理不方便")])])]),s._v(" "),t("li",[t("p",[s._v("async 函数：异步函数是ES7引入的一种基于Promise的语法糖，使异步代码看起来更像同步代码。")]),s._v(" "),t("ul",[t("li",[s._v("优点：内置执行器、更好的语义、更广的适用性、返回的是Promise、结构清晰；")]),s._v(" "),t("li",[s._v("缺点：错误处理机制")])])])]),s._v(" "),t("p",[s._v("异步处理方法的比较: 参考 "),t("a",{attrs:{href:"https://es6.ruanyifeng.com/#docs/async#%E4%B8%8E%E5%85%B6%E4%BB%96%E5%BC%82%E6%AD%A5%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95%E7%9A%84%E6%AF%94%E8%BE%83",target:"_blank",rel:"noopener noreferrer"}},[s._v("《ES6》"),t("OutboundLink")],1)]),s._v(" "),t("p",[t("img",{attrs:{src:n(1152),alt:""}})]),s._v(" "),t("h2",{attrs:{id:"模拟异步操作方式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#模拟异步操作方式"}},[s._v("#")]),s._v(" 模拟异步操作方式")]),s._v(" "),t("p",[t("img",{attrs:{src:n(1153),alt:""}})]),s._v(" "),t("h2",{attrs:{id:"pomise-对象"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pomise-对象"}},[s._v("#")]),s._v(" Pomise 对象")]),s._v(" "),t("p",[s._v("promise 相关知识点和题目参考: "),t("a",{attrs:{href:"https://gitee.com/jokerxw/myNotes/tree/master/javascript/%E5%8E%9F%E7%90%86%E5%AE%9E%E7%8E%B0/promise",target:"_blank",rel:"noopener noreferrer"}},[s._v("promise 总结"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"async-await"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#async-await"}},[s._v("#")]),s._v(" async await")]),s._v(" "),t("p",[t("img",{attrs:{src:n(1154),alt:""}})]),s._v(" "),t("p",[t("img",{attrs:{src:n(1155),alt:""}})]),s._v(" "),t("p",[t("img",{attrs:{src:n(1156),alt:""}})]),s._v(" "),t("p",[t("img",{attrs:{src:n(1157),alt:""}})]),s._v(" "),t("p",[t("img",{attrs:{src:n(1158),alt:""}})]),s._v(" "),t("p",[s._v("async 函数，使得异步操作变得更加方便，它就是 Generator 函数的语法糖")]),s._v(" "),t("ul",[t("li",[s._v("内置执行器：Generator 函数的执行必须靠执行器，"),t("code",[s._v("async")]),s._v("函数自带执行器")]),s._v(" "),t("li",[s._v("更好的语义")]),s._v(" "),t("li",[s._v("更广的适用性："),t("code",[s._v("async")]),s._v("函数的"),t("code",[s._v("await")]),s._v("命令后面，可以是 Promise 对象和原始类型的值（数值、字符串和布尔值，但这时会自动转成立即 resolved 的 Promise 对象）")]),s._v(" "),t("li",[s._v("返回值是 Promise")])]),s._v(" "),t("p",[t("strong",[s._v("注意：")])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("await 后面代码会立即执行，执行后结果和 await 下面代码会被当做回调函数内容添加到微任务队列中")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("示例：")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("async1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'async1 start'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("async2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'async1 end'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("async2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'async2'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nconsole"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'script start'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setTimeout")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'setTimeout'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("async1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Promise")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("resolve")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'promise1'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("then")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'promise2'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nconsole"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'script end'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//------输出--------")]),s._v("\nscript start\nasync1 start\nasync2\npromise1\nscript end\nasync1 end\npromise2\nsetTimeout\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br")])]),t("blockquote",[t("p",[s._v("注意以下几点:")]),s._v(" "),t("ul",[t("li",[s._v("定义 async1()，async2()，不会立即执行")]),s._v(" "),t("li",[s._v("await async2(); 表示先执行 async2()，然后将 await 后面的代码当作 .then() 中的回调来处理，因此执行 async2() 以后，返回值和后面代码添加到微任务队列中")]),s._v(" "),t("li",[s._v("初始化 promise，promise 中的代码会立即执行")])])])])])])]),s._v(" "),t("p",[s._v("参考："),t("a",{attrs:{href:"https://es6.ruanyifeng.com/#docs/async",target:"_blank",rel:"noopener noreferrer"}},[s._v("《ES6 教程》"),t("OutboundLink")],1)]),s._v(" "),t("h2",{attrs:{id:"异步循环"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#异步循环"}},[s._v("#")]),s._v(" 异步循环")]),s._v(" "),t("blockquote",[t("p",[s._v("异步循环：在循环中包含异步操作")])]),s._v(" "),t("ul",[t("li",[t("p",[s._v("解决思路： promise + async wait: 使用promise封装异步操作，使用async await执行循环")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("getSomething")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("param")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Promise")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("reslove"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" reject")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setTimeout")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("reslove")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token template-string"}},[t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("get ")]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("param"),t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("getAll")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" i "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" result "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getSomething")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("i"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("result"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getAll")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])])])]),s._v(" "),t("h2",{attrs:{id:"异步串行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#异步串行"}},[s._v("#")]),s._v(" 异步串行")]),s._v(" "),t("blockquote",[t("p",[s._v("异步方案有：")]),s._v(" "),t("ul",[t("li",[s._v("回调")]),s._v(" "),t("li",[s._v("promise")]),s._v(" "),t("li",[s._v("async await")])])]),s._v(" "),t("h3",{attrs:{id:"回调实现"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#回调实现"}},[s._v("#")]),s._v(" 回调实现")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// operations defined elsewhere and ready to execute")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" operations "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("func")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" function1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("args")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" args1 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("func")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" function2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("args")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" args2 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("func")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" function3"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("args")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" args3 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("executeFunctionWithArgs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("operation"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" callback")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// executes function")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" args"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" func "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" operation"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("func")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("args"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" callback"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 传入参数并执行函数")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("serialProcedure")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("operation")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("operation"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" process"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("exit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// finished")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("executeFunctionWithArgs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("operation"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("result")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// continue AFTER callback")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("serialProcedure")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("operations"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("shift")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//回调中执行下一个异步函数")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("serialProcedure")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("operations"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("shift")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])]),t("h2",{attrs:{id:"异步并行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#异步并行"}},[s._v("#")]),s._v(" 异步并行")]),s._v(" "),t("h3",{attrs:{id:"全并行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#全并行"}},[s._v("#")]),s._v(" 全并行")]),s._v(" "),t("ul",[t("li",[s._v("全并行：全部异步函数同时并发执行，不限制数据量")]),s._v(" "),t("li",[s._v("题目：实现通过电子邮件发送 1,000,000 个电子邮件收件人的列表。")])]),s._v(" "),t("h4",{attrs:{id:"回调实现-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#回调实现-2"}},[s._v("#")]),s._v(" 回调实现")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" count "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" success "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" failed "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" recipients "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Bart'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("email")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'bart@tld'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Marge'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("email")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'marge@tld'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Homer'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("email")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'homer@tld'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Lisa'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("email")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'lisa@tld'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Maggie'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("email")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'maggie@tld'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("dispatch")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("recipient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" callback")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// `sendEmail` is a hypothetical SMTP client")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sendMail")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("subject")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Dinner tonight'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("message")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'We have lots of cabbage on the plate. You coming?'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("smtp")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" recipient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("email"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    callback\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("final")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("result")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token template-string"}},[t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("Result: ")]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("result"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("count"),t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v(" attempts \\\n      & ")]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("result"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("success"),t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v(" succeeded emails")]),t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("result"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("failed"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("length"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token template-string"}},[t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("Failed to send to: \\\n        \\n")]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("result"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("failed"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("join")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\\n'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\\n")]),t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nrecipients"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("forEach")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("recipient")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("dispatch")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("recipient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("err")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      success "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      failed"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("push")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("recipient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    count "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("count "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" recipients"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("length"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("final")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        count"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        success"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        failed"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br")])]),t("h3",{attrs:{id:"有限并行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#有限并行"}},[s._v("#")]),s._v(" 有限并行")]),s._v(" "),t("ul",[t("li",[s._v("优先并行：通过控制限制并发数量，实现并发请求")])]),s._v(" "),t("h4",{attrs:{id:"回调实现-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#回调实现-3"}},[s._v("#")]),s._v(" 回调实现")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" successCount "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 记录成功发送的邮件数量")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" parallelCount "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 并发执行数量")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("final")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token template-string"}},[t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("dispatched ")]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("successCount"),t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v(" emails")]),t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 打印成功发送的邮件数量")]),s._v("\n  console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'finished'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 打印任务完成的消息")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("dispatch")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("recipient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" callback")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// `sendEmail` 是一个假设的 SMTP 客户端，用于发送邮件")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sendMail")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("subject")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Dinner tonight'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("message")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'We have lots of cabbage on the plate. You coming?'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("smtp")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" recipient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("email"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    callback\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sendOneMillionEmailsOnly")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getListOfTenMillionGreatEmails")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" bigList")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throw")]),s._v(" err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("parallel")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("recipients")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" count "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 并行发送的邮件计数器")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" index "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 收件人列表的索引")]),s._v("\n\n      "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sendNext")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("count "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("final")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 达到发送限制时调用 final 函数结束发送")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("index "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),s._v(" recipients"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("length"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 所有收件人都已处理完毕时直接返回")]),s._v("\n\n        "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("dispatch")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("recipients"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("index"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("_err")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("_err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            successCount "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 更新成功发送的邮件数量")]),s._v("\n            count "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 更新并行发送的邮件计数器")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          index "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 更新收件人列表的索引")]),s._v("\n          "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sendNext")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 递归调用 sendNext 处理下一个收件人")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n      "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" i "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" parallelCount"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sendNext")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 启动并行发送任务")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("parallel")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("bigList"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("slice")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" parallelCount"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 将收件人列表切片为大小为 parallelCount 的子列表作为初始并行任务的输入")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sendOneMillionEmailsOnly")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 启动发送一百万封电子邮件的过程")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br")])]),t("h2",{attrs:{id:"异步题目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#异步题目"}},[s._v("#")]),s._v(" 异步题目")]),s._v(" "),t("h3",{attrs:{id:"异步api执行顺序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#异步api执行顺序"}},[s._v("#")]),s._v(" 异步API执行顺序")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("题目一：以下代码输出结果")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("async1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'async1 start'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("async2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'async1 end'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("async2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'async2'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nconsole"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'script start'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setTimeout")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'setTimeout0'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setTimeout")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'setTimeout2'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("300")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setImmediate")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'setImmediate'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nprocess"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nextTick")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'nextTick1'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("async1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nprocess"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("nextTick")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'nextTick2'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Promise")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("resolve")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'promise1'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'promise2'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("then")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'promise3'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nconsole"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'script end'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br")])]),t("ul",[t("li",[t("p",[s._v("结果：")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("script start\nasync1 start\nasync2\npromise1\npromise2\nscript end\nnextTick1\nnextTick2\nasync1 end\npromise3\nsetTimeout0\nsetImmediate\nsetTimeout2\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("分析：")]),s._v(" "),t("blockquote",[t("ol",[t("li",[s._v("首先，代码从顶部开始执行，"),t("strong",[s._v("输出"),t("code",[s._v("script start")]),s._v("。")])]),s._v(" "),t("li",[s._v("接下来，"),t("code",[s._v("async1()")]),s._v("函数被调用，"),t("strong",[s._v("输出"),t("code",[s._v("async1 start")]),s._v("。")])]),s._v(" "),t("li",[s._v("在"),t("code",[s._v("async1()")]),s._v("函数内部，遇到了"),t("code",[s._v("await async2()")]),s._v("语句。由于"),t("code",[s._v("async2()")]),s._v("函数是一个异步函数，所以它会返回一个Promise并暂停"),t("code",[s._v("async1()")]),s._v("函数的执行（async await 后面的函数被放入微任务列队）。")]),s._v(" "),t("li",[s._v("此时，JavaScript引擎继续执行后面的代码。"),t("strong",[s._v("输出"),t("code",[s._v("async2")])]),s._v("，这是由于"),t("code",[s._v("async2()")]),s._v("函数被调用。")]),s._v(" "),t("li",[s._v("紧接着，"),t("strong",[s._v("输出"),t("code",[s._v("promise1")])]),s._v("，这是因为"),t("code",[s._v("new Promise")]),s._v("的回调函数立即执行。")]),s._v(" "),t("li",[s._v("继续执行，"),t("strong",[s._v("输出"),t("code",[s._v("promise2")])]),s._v("，然后调用"),t("code",[s._v("resolve()")]),s._v("。")]),s._v(" "),t("li",[s._v("Promise的"),t("code",[s._v("resolve()")]),s._v("方法并不会立即执行"),t("code",[s._v("then")]),s._v("方法中的回调函数，而是将其放入事件队列中，等待当前执行栈为空后执行。")]),s._v(" "),t("li",[s._v("继续执行主任务，"),t("strong",[s._v("输出"),t("code",[s._v("script end")])]),s._v("。")]),s._v(" "),t("li",[t("strong",[s._v("输出"),t("code",[s._v("nextTick1")])]),s._v("，这是由于"),t("code",[s._v("process.nextTick()")]),s._v("方法的回调函数会在当前执行栈执行完成后立即执行。")]),s._v(" "),t("li",[t("strong",[s._v("输出"),t("code",[s._v("nextTick2")])]),s._v("，这是因为在上一个"),t("code",[s._v("nextTick")]),s._v("回调函数之后，又调用了"),t("code",[s._v("process.nextTick()")]),s._v("方法。")]),s._v(" "),t("li",[s._v("回到"),t("code",[s._v("async1()")]),s._v("函数，"),t("strong",[s._v("输出"),t("code",[s._v("async1 end")])]),s._v("。")]),s._v(" "),t("li",[s._v("然后，"),t("code",[s._v("promise.then()")]),s._v("中的回调函数被放入事件队列中，等待当前执行栈为空后执行。")]),s._v(" "),t("li",[t("strong",[s._v("输出"),t("code",[s._v("promise3")])]),s._v("，这是因为"),t("code",[s._v("then")]),s._v("方法中的回调函数在上一步骤中被调用。")]),s._v(" "),t("li",[t("code",[s._v("setTimeout0")]),s._v("回调函数被放入事件队列中，等待至少达到设定的延迟时间（0ms）后执行，"),t("strong",[s._v("输出"),t("code",[s._v("setTimeout0")])]),s._v("。")]),s._v(" "),t("li",[t("code",[s._v("setImmediate")]),s._v("回调函数被放入事件队列中，等待当前执行栈为空后执行，"),t("strong",[s._v("输出"),t("code",[s._v("setImmediate")])]),s._v("。")]),s._v(" "),t("li",[t("code",[s._v("setTimeout2")]),s._v("回调函数被放入事件队列中，等待至少达到设定的延迟时间（300ms）后执行，"),t("strong",[s._v("输出"),t("code",[s._v("setTimeout2")])]),s._v("。")])]),s._v(" "),t("p",[s._v("最后，根据事件循环机制和各个定时器的规则，事件循环会按照一定的顺序处理事件队列中的回调函数。因此，"),t("code",[s._v("setImmediate")]),s._v("回调函数会在"),t("code",[s._v("setTimeout")]),s._v("回调函数之前执行，而"),t("code",[s._v("setTimeout0")]),s._v("回调函数会在"),t("code",[s._v("setTimeout2")]),s._v("回调函数之前执行。")])])])])])]),s._v(" "),t("h3",{attrs:{id:"settimeout-与-setimmediate-输出顺序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#settimeout-与-setimmediate-输出顺序"}},[s._v("#")]),s._v(" setTimeout 与 setImmediate 输出顺序")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("以下代码输出结果为：")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setTimeout")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"setTimeout"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setImmediate")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"setImmediate"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("ul",[t("li",[t("p",[s._v("结果：")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("情况一：\nsetTimeout\nsetImmediate\n情况二：\nsetImmediate\nsetTimeout\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("分析：")]),s._v(" "),t("blockquote",[t("p",[s._v("● 外层同步代码一次性全部执行完，遇到异步API就塞到对应的阶段")]),s._v(" "),t("p",[s._v("● 遇到setTimeout,虽然设置的是0毫秒触发，但实际上会被强制改成1ms,时间到了然后塞入times阶段")]),s._v(" "),t("p",[s._v("● 遇到setImmediate塞入check 阶段")]),s._v(" "),t("p",[s._v("● 同步代码执行完毕，进入Event Loop")]),s._v(" "),t("p",[s._v("● 先进入times阶段，检查当前时间过去了1毫秒没有，如果过了1毫秒，满足setTimeout条件，执行回调，如果没过1毫秒，跳过")]),s._v(" "),t("p",[s._v("● 跳过空的阶段，进入check阶段，执行setImmediate回调")]),s._v(" "),t("p",[s._v("这里的关键在于这1ms,如果同步代码执行时间较长，进入Event Loop的时候1毫秒已经过了，setTimeout先执行，如果1毫秒还没到，就先执行了setImmediate")])])])])])])])}),[],!1,null,null,null);t.default=e.exports},504:function(s,t,n){s.exports=n.p+"assets/img/task=performance.d107c2fd.png"}}]);