<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>异步编程 | Sewen 博客</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="./mylogo.png">
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
    <link rel="manifest" href="/myblog/manifest.webmanifest" crossorigin="use-credentials">
    <link rel="alternate" type="application/atom+xml" href="https://sewar-x.github.io/myblog/atom.xml" title="Sewen 博客 Atom Feed">
    <link rel="alternate" type="application/json" href="https://sewar-x.github.io/myblog/rss.xml" title="Sewen 博客 JSON Feed">
    <link rel="alternate" type="application/rss+xml" href="https://sewar-x.github.io/myblog/rss.xml" title="Sewen 博客 RSS Feed">
    <meta name="description" content="sewen 的前端学习笔记、博客、前端基础总结、技术深度剖析、面试题总结、算法总结、项目过程总结">
    <meta property="og:url" content="https://sewar-x.github.io/myblog/javascript/%E5%BC%82%E6%AD%A5.html">
    <meta property="og:site_name" content="Sewen 博客">
    <meta property="og:title" content="异步编程">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="en-US">
    <meta name="theme-color" content="#46bd87">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <link rel="preload" href="/myblog/assets/css/0.styles.645fbc6f.css" as="style"><link rel="preload" href="/myblog/assets/js/app.9d2b617a.js" as="script"><link rel="preload" href="/myblog/assets/js/layout-Layout.d2d4ce64.js" as="script"><link rel="preload" href="/myblog/assets/js/page-异步编程.904f4c65.js" as="script"><link rel="preload" href="/myblog/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-components/Blog/BlogHome~layout-components/~2222f443.5835591a.js" as="script"><link rel="prefetch" href="/myblog/assets/js/199.a9216960.js"><link rel="prefetch" href="/myblog/assets/js/200.4c66fc79.js"><link rel="prefetch" href="/myblog/assets/js/layout-Blog.1fca7e90.js"><link rel="prefetch" href="/myblog/assets/js/layout-NotFound.3c74e8aa.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/AlgoliaSearch/Dropdown.70fcebe7.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Anchor.3235541c.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/ArticleInfo.7b815b20.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/ArticleItem.b0e177e1.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/ArticleList.d1cf1b24.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/ArticleType.b630b80e.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/BlogHero.621312ba.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/BlogHome.4fe44489.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/BlogInfo.b2a94760.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/BlogPage.e0fbe820.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/BloggerInfo.0df38355.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/CategoryList.ec1bcd96.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/ProjectList.8550a110.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/TagList.bcf7b782.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/Timeline.b6cf5471.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/TimelineList.3c6e08a6.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Clipboard.e940a903.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Common.820a8694.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Home.70383986.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/MyTransition.0de46069.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Navbar/DropdownLink.e3f6c118.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Navbar/NavLink.93b11770.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Navbar/NavLinks.8ba214e6.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Navbar/Navbar.b90a94f9.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Navbar/RepoLink.663a7f55.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Navbar/SidebarButton.76b0035a.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Page.98b5d09c.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/PageFooter.20bc9bd8.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/PageMeta.b7e6b12f.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/PageNav.8305dd1f.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Password.45e0e82a.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Sidebar/DropdownTransition.068c5eea.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Sidebar/Sidebar.f6f90d52.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Sidebar/SidebarDropdownLink.505127a8.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Sidebar/SidebarGroup.7eecf370.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Sidebar/SidebarLink.6e39fe32.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Sidebar/SidebarNavLinks.0f8566cb.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Theme/DarkmodeSwitch.20ac7b92.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Theme/ThemeColor.6086e4ed.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Theme/ThemeOptions.483238c9.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/ArticleIcon.0a22e2b1.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/AutoIcon.2ff1c790.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/BookIcon.419b49ba.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/DarkIcon.7d81873b.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/EditIcon.8ada485d.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/EmptyIcon.d704a5cf.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/I18nIcon.ffad8b3e.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/LightIcon.47d807da.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/LinkIcon.1a8a7826.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/LockIcon.a29a2b79.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/NextIcon.0214ee59.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/Page404Icon.8bc1ebbb.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/PresentationIcon.17500d9b.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/PrevIcon.2ae04a70.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/ProjectIcon.b336d567.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/StickyIcon.0f509b9d.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Baidu.244b9a41.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Bitbucket.11ba94e1.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Dingding.e8a3d90d.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Discord.3295a55b.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Dribbble.464dac3b.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Email.f9254caa.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Evernote.991472fb.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Facebook.08e78e47.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Flipboard.a1124d0f.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Gitee.c44bc20a.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Github.5667e5ae.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Gitlab.ad95c7a7.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Gmail.b5acc6bc.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Instagram.56be85f2.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Lines.d9db3dce.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Linkedin.b82d8d8b.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Pinterest.0f3ffe71.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Pocket.41ef3c92.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/QQ.7558f4ba.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Qzone.bf658fae.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Reddit.9c4c95ee.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Rss.9780139e.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Steam.06abbae2.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Twitter.26fa5bda.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Wechat.9cac8c4c.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Weibo.5206a632.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Whatsapp.0738f1e3.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Youtube.f41fd7f2.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Zhihu.4d851d2f.js"><link rel="prefetch" href="/myblog/assets/js/page--0abc50bf.0d6f1484.js"><link rel="prefetch" href="/myblog/assets/js/page--1cd40f4c.dd76c7b3.js"><link rel="prefetch" href="/myblog/assets/js/page--53f93199.e80bdec8.js"><link rel="prefetch" href="/myblog/assets/js/page--5afd2fd0.adea4e92.js"><link rel="prefetch" href="/myblog/assets/js/page--67c584d3.0a3f3cd9.js"><link rel="prefetch" href="/myblog/assets/js/page--776a8506.cdf48aac.js"><link rel="prefetch" href="/myblog/assets/js/page-CSS.eb94b29f.js"><link rel="prefetch" href="/myblog/assets/js/page-Chrome开发工具使用指南.a2675120.js"><link rel="prefetch" href="/myblog/assets/js/page-DevServer.0281863d.js"><link rel="prefetch" href="/myblog/assets/js/page-Echarts二次封装.4387b8ad.js"><link rel="prefetch" href="/myblog/assets/js/page-Elementui与Element-plusui二次封装.82f12a09.js"><link rel="prefetch" href="/myblog/assets/js/page-Git基础.03c616ad.js"><link rel="prefetch" href="/myblog/assets/js/page-Git规范.e2fdc38a.js"><link rel="prefetch" href="/myblog/assets/js/page-HTML.1e3c14b9.js"><link rel="prefetch" href="/myblog/assets/js/page-Home.f0b7e772.js"><link rel="prefetch" href="/myblog/assets/js/page-JSON配置化组件二次封装.12060fd9.js"><link rel="prefetch" href="/myblog/assets/js/page-JS原理实现.3c427e19.js"><link rel="prefetch" href="/myblog/assets/js/page-JS应用题.3d313b34.js"><link rel="prefetch" href="/myblog/assets/js/page-JavaScript基础.551be887.js"><link rel="prefetch" href="/myblog/assets/js/page-Linux.c6159ebd.js"><link rel="prefetch" href="/myblog/assets/js/page-Loader和Plugin原理.b2971b76.js"><link rel="prefetch" href="/myblog/assets/js/page-MySQL.0b1d704a.js"><link rel="prefetch" href="/myblog/assets/js/page-NPM.a55851b2.js"><link rel="prefetch" href="/myblog/assets/js/page-Node.ec405a21.js"><link rel="prefetch" href="/myblog/assets/js/page-Nodejs常见问题集合.12844e69.js"><link rel="prefetch" href="/myblog/assets/js/page-Node性能优化.b4ea1c34.js"><link rel="prefetch" href="/myblog/assets/js/page-Promise专题.7869a31b.js"><link rel="prefetch" href="/myblog/assets/js/page-React.d76cf0ac.js"><link rel="prefetch" href="/myblog/assets/js/page-SSG移动端项目实践.2122615b.js"><link rel="prefetch" href="/myblog/assets/js/page-TypeScript.4f597fda.js"><link rel="prefetch" href="/myblog/assets/js/page-Vite.637881bf.js"><link rel="prefetch" href="/myblog/assets/js/page-Vite原理解析.6677fdb4.js"><link rel="prefetch" href="/myblog/assets/js/page-Vue25项目webpack构建分析.7bbea0fa.js"><link rel="prefetch" href="/myblog/assets/js/page-Vue2VsVue3.10be4140.js"><link rel="prefetch" href="/myblog/assets/js/page-Vue2x原理源码分析.e9e753b6.js"><link rel="prefetch" href="/myblog/assets/js/page-Vue3基础.210247ff.js"><link rel="prefetch" href="/myblog/assets/js/page-Vue3源码分析.17379e04.js"><link rel="prefetch" href="/myblog/assets/js/page-VueCli源码分析.afc3c83f.js"><link rel="prefetch" href="/myblog/assets/js/page-VueRouter原理分析.0a092eb6.js"><link rel="prefetch" href="/myblog/assets/js/page-VueSSR原理分析.63006040.js"><link rel="prefetch" href="/myblog/assets/js/page-VueVsReact.2156be28.js"><link rel="prefetch" href="/myblog/assets/js/page-Vuex原理分析.5ba3e6e4.js"><link rel="prefetch" href="/myblog/assets/js/page-WEB安全.5aa0eeef.js"><link rel="prefetch" href="/myblog/assets/js/page-WebPack构建原理.9c29703e.js"><link rel="prefetch" href="/myblog/assets/js/page-webpackAPI分析.4c8b152b.js"><link rel="prefetch" href="/myblog/assets/js/page-webpack优化.dcc6c3bc.js"><link rel="prefetch" href="/myblog/assets/js/page-webpack基础.3820ee6c.js"><link rel="prefetch" href="/myblog/assets/js/page-webpack项目实践.77e22417.js"><link rel="prefetch" href="/myblog/assets/js/page-一次后台管理系统的性能优化.7c2d8712.js"><link rel="prefetch" href="/myblog/assets/js/page-从零到一搭建SSR项目.855376fc.js"><link rel="prefetch" href="/myblog/assets/js/page-从零到一搭建Vue2项目和规范设计.93017fd2.js"><link rel="prefetch" href="/myblog/assets/js/page-从零到一搭建Vue3单页面应用.de152d54.js"><link rel="prefetch" href="/myblog/assets/js/page-从零到一搭建公共组件库.93278073.js"><link rel="prefetch" href="/myblog/assets/js/page-从零到一搭建移动端SSG项目.9c113d06.js"><link rel="prefetch" href="/myblog/assets/js/page-使用docker部署Node服务.5cf328fd.js"><link rel="prefetch" href="/myblog/assets/js/page-分治.e3dfc22d.js"><link rel="prefetch" href="/myblog/assets/js/page-前端发版静态资源404问题.9eb1ca89.js"><link rel="prefetch" href="/myblog/assets/js/page-前端存储.cd82cf54.js"><link rel="prefetch" href="/myblog/assets/js/page-前端工程化.1e6e58d0.js"><link rel="prefetch" href="/myblog/assets/js/page-前端性能优化方案.83718d22.js"><link rel="prefetch" href="/myblog/assets/js/page-前端架构实践.171dbc0f.js"><link rel="prefetch" href="/myblog/assets/js/page-前端渲染架构.3b783de8.js"><link rel="prefetch" href="/myblog/assets/js/page-前端自动部署.5076846c.js"><link rel="prefetch" href="/myblog/assets/js/page-前端部署原理.82ecd8a7.js"><link rel="prefetch" href="/myblog/assets/js/page-动态规划.a3af92f1.js"><link rel="prefetch" href="/myblog/assets/js/page-哈希表.c76000e8.js"><link rel="prefetch" href="/myblog/assets/js/page-回溯算法.cd914c32.js"><link rel="prefetch" href="/myblog/assets/js/page-图.dfd9828a.js"><link rel="prefetch" href="/myblog/assets/js/page-基础.7bf5a37b.js"><link rel="prefetch" href="/myblog/assets/js/page-堆.4657e538.js"><link rel="prefetch" href="/myblog/assets/js/page-字符串.252f2a08.js"><link rel="prefetch" href="/myblog/assets/js/page-性能优化指标和监控.f2175836.js"><link rel="prefetch" href="/myblog/assets/js/page-排序算法.c7a51b99.js"><link rel="prefetch" href="/myblog/assets/js/page-搭建低代码平台.19eaf5ec.js"><link rel="prefetch" href="/myblog/assets/js/page-操作系统.473c4281.js"><link rel="prefetch" href="/myblog/assets/js/page-数学运算.c82748fb.js"><link rel="prefetch" href="/myblog/assets/js/page-数据结构算法.84480586.js"><link rel="prefetch" href="/myblog/assets/js/page-数组.692b0d0a.js"><link rel="prefetch" href="/myblog/assets/js/page-权限管理.c7e10db0.js"><link rel="prefetch" href="/myblog/assets/js/page-查找.790e52df.js"><link rel="prefetch" href="/myblog/assets/js/page-栈和队列.8dbc3586.js"><link rel="prefetch" href="/myblog/assets/js/page-树.24efdeaa.js"><link rel="prefetch" href="/myblog/assets/js/page-浏览器.bee9ec04.js"><link rel="prefetch" href="/myblog/assets/js/page-混合桌面应用开发.9e10d1c3.js"><link rel="prefetch" href="/myblog/assets/js/page-登录.bb830451.js"><link rel="prefetch" href="/myblog/assets/js/page-目录.c85b4d0b.js"><link rel="prefetch" href="/myblog/assets/js/page-移动端开发.56ac22ec.js"><link rel="prefetch" href="/myblog/assets/js/page-组件和组件封装.b5e86da2.js"><link rel="prefetch" href="/myblog/assets/js/page-计算机网络基础.0a106662.js"><link rel="prefetch" href="/myblog/assets/js/page-设计模式.ffdc7cfd.js"><link rel="prefetch" href="/myblog/assets/js/page-调试技巧.485ae36e.js"><link rel="prefetch" href="/myblog/assets/js/page-贪心算法.0f417640.js"><link rel="prefetch" href="/myblog/assets/js/page-输入url到页面展示全过程.510aef2e.js"><link rel="prefetch" href="/myblog/assets/js/page-递归.5e55e552.js"><link rel="prefetch" href="/myblog/assets/js/page-链表.1cf6927f.js"><link rel="prefetch" href="/myblog/assets/js/page-项目总结.ffcd2a4b.js"><link rel="prefetch" href="/myblog/assets/js/vendors~docsearch.f3877d0d.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-components/Blog/BlogHome~layout-components/~5d377965.d9712593.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-Blog~layout-Layout~layout-components/Blog/ArticleItem~layout-components/Blog/ArticleL~b56f3aac.47bb5cb5.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-NotFound~layout-components/Common~layout-components/Page.57d58db9.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-Slide.81546b3b.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-components/AlgoliaSearch/Full.b30f067a.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-components/Blog/BlogPage.bcccbd38.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-components/Navbar/Navbar.e2a7361e.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-components/Page.6c65077c.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-components/Sidebar/Sidebar.34cd9cf7.js"><link rel="prefetch" href="/myblog/assets/js/vendors~photo-swipe.428df1da.js">
    <link rel="stylesheet" href="/myblog/assets/css/0.styles.645fbc6f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-sidebar has-anchor"><header class="navbar"><!----> <div class="content__navbar-start"></div> <button title="Sidebar Button" class="sidebar-button"><span class="icon"></span></button> <a href="/myblog/" class="home-link router-link-active"><img src="./mylogo.png" alt="Sewen 博客" class="logo"> <!----> <span class="site-name can-hide">Sewen 博客</span></a> <!----> <div class="content__navbar-center"></div> <div class="links"><button tabindex="-1" aria-hidden="true" class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">Theme Color:</label> <li><span class="default-theme"></span></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">Theme Mode:</label> <div class="darkmode-switch"><div class="item day"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon light-icon"><path d="M512 256a42.667 42.667 0 0 0 42.667-42.667V128a42.667 42.667 0 0 0-85.334 0v85.333A42.667 42.667 0 0 0 512 256zm384 213.333h-85.333a42.667 42.667 0 0 0 0 85.334H896a42.667 42.667 0 0 0 0-85.334zM256 512a42.667 42.667 0 0 0-42.667-42.667H128a42.667 42.667 0 0 0 0 85.334h85.333A42.667 42.667 0 0 0 256 512zm9.387-298.667a42.667 42.667 0 0 0-59.307 62.72l61.44 59.307a42.667 42.667 0 0 0 31.147 11.947 42.667 42.667 0 0 0 30.72-13.227 42.667 42.667 0 0 0 0-60.16zm459.946 133.974a42.667 42.667 0 0 0 29.44-11.947l61.44-59.307a42.667 42.667 0 0 0-57.6-62.72l-61.44 60.587a42.667 42.667 0 0 0 0 60.16 42.667 42.667 0 0 0 28.16 13.227zM512 768a42.667 42.667 0 0 0-42.667 42.667V896a42.667 42.667 0 0 0 85.334 0v-85.333A42.667 42.667 0 0 0 512 768zm244.48-79.36a42.667 42.667 0 0 0-59.307 61.44l61.44 60.587a42.667 42.667 0 0 0 29.44 11.946 42.667 42.667 0 0 0 30.72-12.8 42.667 42.667 0 0 0 0-60.586zm-488.96 0-61.44 59.307a42.667 42.667 0 0 0 0 60.586 42.667 42.667 0 0 0 30.72 12.8 42.667 42.667 0 0 0 28.587-10.666l61.44-59.307a42.667 42.667 0 0 0-59.307-61.44zM512 341.333A170.667 170.667 0 1 0 682.667 512 170.667 170.667 0 0 0 512 341.333z" fill="currentColor"></path></svg></div> <div class="item auto active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon auto-icon"><path d="M460.864 539.072H564.8L510.592 376l-49.728 163.072zM872 362.368V149.504H659.648L510.528 0l-149.12 149.504H149.12v212.928L0 511.872l149.12 149.504v212.928h212.352l149.12 149.504 149.12-149.504h212.352V661.376l149.12-149.504L872 362.368zM614.464 693.12l-31.616-90.624H438.272l-31.616 90.624h-85.888l144.576-407.68h90.368l144.576 407.68h-85.824zm0 0" fill="currentColor"></path></svg></div> <div class="item night"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon dark-icon"><path d="M935.539 630.402c-11.43-11.432-28.674-14.739-43.531-8.354-46.734 20.103-96.363 30.297-147.508 30.297-99.59 0-193.221-38.784-263.64-109.203-108.637-108.637-139.61-270.022-78.908-411.148a39.497 39.497 0 0 0-51.886-51.887c-52.637 22.64-100.017 54.81-140.826 95.616-85.346 85.346-132.346 198.821-132.346 319.52 0 120.7 47.001 234.172 132.347 319.519S408.063 947.11 528.76 947.11c120.7 0 234.172-47.003 319.52-132.351 40.809-40.81 72.978-88.19 95.616-140.826a39.497 39.497 0 0 0-8.356-43.532z" fill="currentColor"></path></svg></div></div> <!----></div></div></div></button> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/myblog/" class="nav-link router-link-active"><!---->
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Front-end Basics" class="dropdown-title"><span class="title"><!---->
        前端基础
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/javascript/html/" class="nav-link"><!---->
  HTML
</a></li><li class="dropdown-item"><a href="/myblog/javascript/css/" class="nav-link"><!---->
  Css
</a></li><li class="dropdown-item"><a href="/myblog/javascript/javascript/" class="nav-link"><!---->
  JavaScript
</a></li><li class="dropdown-item"><a href="/myblog/javascript/typescript/" class="nav-link"><!---->
  TypeScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title"><!---->
        计算机基础
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/javascript/algorithms/" class="nav-link"><!---->
  数据结构和算法
</a></li><li class="dropdown-item"><a href="/myblog/javascript/network/" class="nav-link"><!---->
  计算机网络/HTTP
</a></li><li class="dropdown-item"><a href="/myblog/javascript/network/输入url到页面展示全过程/" class="nav-link"><!---->
  输入url到页面展示全过程
</a></li><li class="dropdown-item"><a href="/myblog/javascript/operating-system/" class="nav-link"><!---->
  操作系统
</a></li><li class="dropdown-item"><a href="/myblog/javascript/design-model/" class="nav-link"><!---->
  设计模式
</a></li><li class="dropdown-item"><a href="/myblog/javascript/Web-Security/" class="nav-link"><!---->
  Web安全
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架和源码分析" class="dropdown-title"><span class="title"><!---->
        框架和源码分析
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/javascript/vue/Vue2原理和源码分析.html" class="nav-link"><!---->
  Vue 专题
</a></li><li class="dropdown-item"><a href="/myblog/javascript/React/" class="nav-link"><!---->
  React 专题
</a></li><li class="dropdown-item"><a href="/myblog/javascript/webpack/webpack构建原理.html" class="nav-link"><!---->
  webpack 专题
</a></li><li class="dropdown-item"><a href="/myblog/javascript/vite/" class="nav-link"><!---->
  vite 专题
</a></li><li class="dropdown-item"><a href="/myblog/javascript/axios/" class="nav-link"><!---->
  Axios 专题
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="浏览器" class="dropdown-title"><span class="title"><!---->
        浏览器
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/javascript/browser/浏览器原理/" class="nav-link"><!---->
  浏览器原理
</a></li><li class="dropdown-item"><a href="/myblog/javascript/browser/前端缓存和存储/" class="nav-link"><!---->
  前端缓存和存储
</a></li><li class="dropdown-item"><a href="/myblog/javascript/performance/前端调试技巧/" class="nav-link"><!---->
  前端调试技巧
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="node.js" class="dropdown-title"><span class="title"><!---->
        服务器
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/javascript/node/" class="nav-link"><!---->
  Node.js
</a></li><li class="dropdown-item"><a href="/myblog/javascript/linux/" class="nav-link"><!---->
  Linux
</a></li><li class="dropdown-item"><a href="/myblog/javascript/mysql/" class="nav-link"><!---->
  MySQL
</a></li><li class="dropdown-item"><a href="/myblog/javascript/nginx/" class="nav-link"><!---->
  Nginx
</a></li><li class="dropdown-item"><a href="/myblog/javascript/docker/" class="nav-link"><!---->
  Docker
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="浏览器和性能优化" class="dropdown-title"><span class="title"><!---->
        性能优化
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/javascript/performance/性能优化指标和监控/" class="nav-link"><!---->
  性能优化指标和监控
</a></li><li class="dropdown-item"><a href="/myblog/javascript/performance/前端性能优化方案/" class="nav-link"><!---->
  前端性能优化方案
</a></li><li class="dropdown-item"><a href="/myblog/javascript/performance/一次管理后台的渲染优化/" class="nav-link"><!---->
  一次管理后台的渲染优化
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端工程" class="dropdown-title"><span class="title"><!---->
        前端工程
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/javascript/Front-end-Engineering/前端工程化/" class="nav-link"><!---->
  前端工程化
</a></li><li class="dropdown-item"><a href="/myblog/javascript/Front-end-Engineering/前端渲染架构/" class="nav-link"><!---->
  前端渲染架构
</a></li><li class="dropdown-item"><a href="/myblog/javascript/Front-end-Engineering/前端架构实践/" class="nav-link"><!---->
  前端架构实践
</a></li><li class="dropdown-item"><a href="/myblog/javascript/Front-end-Engineering/npm/" class="nav-link"><!---->
  npm
</a></li><li class="dropdown-item"><a href="/myblog/javascript/git/" class="nav-link"><!---->
  Git
</a></li><li class="dropdown-item"><a href="/myblog/javascript/projectDeploy/自动构建和部署/" class="nav-link"><!---->
  自动构建和部署
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目实践" class="dropdown-title"><span class="title"><!---->
        项目实践
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/javascript/projectDeploy/" class="nav-link"><!---->
  前端部署
</a></li><li class="dropdown-item"><a href="/myblog/javascript/componentsEncapsulation/组件和组件封装实践.html" class="nav-link"><!---->
  组件和组件封装实践
</a></li><li class="dropdown-item"><a href="/myblog/javascript/projectsSummary/登录与单点登录/" class="nav-link"><!---->
  登录与单点登录
</a></li><li class="dropdown-item"><a href="/myblog/javascript/projectsSummary/权限管理方案实践/" class="nav-link"><!---->
  权限管理方案实践
</a></li><li class="dropdown-item"><a href="/myblog/javascript/projectsSummary/Echarts二次封装实践/" class="nav-link"><!---->
  Echarts二次封装实践
</a></li><li class="dropdown-item"><a href="/myblog/javascript/projectsSummary/文档在线预览和编辑方案/" class="nav-link"><!---->
  文档在线预览和编辑方案
</a></li><li class="dropdown-item"><a href="/myblog/javascript/projectsSummary/移动端开发实践/" class="nav-link"><!---->
  移动端开发实践
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目搭建到原理分析" class="dropdown-title"><span class="title"><!---->
        项目搭建
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/javascript/projectsSummary/从零到一搭建SSR项目/" class="nav-link"><!---->
  从零到一搭建SSR项目
</a></li><li class="dropdown-item"><a href="/myblog/javascript/projectsSummary/从零到一搭建移动端SSG项目/" class="nav-link"><!---->
  从零到一搭建移动端SSG项目
</a></li><li class="dropdown-item"><a href="/myblog/javascript/projectsSummary/移动端SSG项目实践/" class="nav-link"><!---->
  移动端SSG项目实践
</a></li><li class="dropdown-item"><a href="/myblog/javascript/projectsSummary/从零到一搭建Vue2工程化项目/" class="nav-link"><!---->
  从零到一搭建Vue2工程化项目
</a></li><li class="dropdown-item"><a href="/myblog/javascript/projectsSummary/从零到一搭建Vue3工程化项目/" class="nav-link"><!---->
  从零到一搭建Vue3工程化项目
</a></li><li class="dropdown-item"><a href="/myblog/javascript/projectsSummary/搭建低代码平台/" class="nav-link"><!---->
  搭建低代码平台
</a></li><li class="dropdown-item"><a href="/myblog/javascript/projectsSummary/混合桌面应用开发实践/" class="nav-link"><!---->
  混合桌面应用开发实践
</a></li></ul></div></div></nav> <!----> <!----> <!----> <div class="content__navbar-end"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><div vocab="https://schema.org/" typeof="Person" class="blogger-info mobile"><div data-balloon-pos="down" role="navigation" class="blogger hasIntro"><img property="image" alt="Blogger Avatar" src="./mylogo.png" class="avatar round"> <div property="name" class="name">Sewen 博客</div> <meta property="url" content="../outline.md"></div> <div class="num-wrapper"><div><div class="num">91</div> <div>Articles</div></div> <div><div class="num">0</div> <div>Category</div></div> <div><div class="num">0</div> <div>Tags</div></div> <div><div class="num">91</div> <div>Timeline</div></div></div> <div class="media-links-wrapper"><a href="https://github.com/Sewar-x/myblog" rel="noopener noreferrer" target="_blank" aria-label="Github" data-balloon-pos="up" class="media-link"><span class="sr-only">Github</span> <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon icon-github"><circle cx="512" cy="512" r="512" fill="#171515"></circle> <path d="M509.423 146.442c-200.317 0-362.756 162.42-362.756 362.8 0 160.266 103.936 296.24 248.109 344.217 18.139 3.327 24.76-7.872 24.76-17.486 0-8.613-.313-31.427-.49-61.702-100.912 21.923-122.205-48.63-122.205-48.63-16.495-41.91-40.28-53.067-40.28-53.067-32.937-22.51 2.492-22.053 2.492-22.053 36.407 2.566 55.568 37.386 55.568 37.386 32.362 55.438 84.907 39.43 105.58 30.143 3.296-23.444 12.667-39.43 23.032-48.498-80.557-9.156-165.246-40.28-165.246-179.297 0-39.604 14.135-71.988 37.342-97.348-3.731-9.178-16.18-46.063 3.556-96.009 0 0 30.46-9.754 99.76 37.19 28.937-8.048 59.97-12.071 90.823-12.211 30.807.14 61.843 4.165 90.822 12.21 69.26-46.944 99.663-37.189 99.663-37.189 19.792 49.946 7.34 86.831 3.61 96.01 23.25 25.359 37.29 57.742 37.29 97.347 0 139.366-84.82 170.033-165.637 179.013 13.026 11.2 24.628 33.342 24.628 67.182 0 48.498-.445 87.627-.445 99.521 0 9.702 6.535 20.988 24.945 17.444 144.03-48.067 247.881-183.95 247.881-344.175 0-200.378-162.442-362.798-362.802-362.798z" fill="#FFF"></path></svg></a><a href="1567910907" rel="noopener noreferrer" target="_blank" aria-label="Wechat" data-balloon-pos="up" class="media-link"><span class="sr-only">Wechat</span> <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon icon-wechat"><circle cx="512" cy="512" r="512" fill="#1AC88E"></circle> <path d="M827.551 578.742a176.583 176.583 0 0 0-185.685-158.379 172.942 172.942 0 0 0-186.3 158.379 172.942 172.942 0 0 0 185.686 158.379 282.169 282.169 0 0 0 65.536-10.923l60.689 32.768-16.384-54.613a166.275 166.275 0 0 0 76.458-125.611zm-245.76-27.307a21.845 21.845 0 1 1 0-43.69 24.872 24.872 0 0 1 27.307 21.845 24.872 24.872 0 0 1-27.921 21.845h.614zm121.356 0a21.845 21.845 0 1 1 0-43.69 24.872 24.872 0 0 1 27.306 21.845 24.872 24.872 0 0 1-28.512 21.845h1.206z" fill="#FFF"></path> <path d="M623.662 400.953h21.23A222.709 222.709 0 0 0 419.772 245.6a208.145 208.145 0 0 0-223.323 189.94 182.044 182.044 0 0 0 89.201 150.483l-22.436 67.356 78.279-39.435a389.575 389.575 0 0 0 78.279 10.923h20.616a163.226 163.226 0 0 1-6.667-46.718 182.044 182.044 0 0 1 189.94-177.197zm-121.379-60.69a27.921 27.921 0 1 1 0 55.843 31.562 31.562 0 0 1-33.36-27.921 31.562 31.562 0 0 1 34.59-27.921h-1.23zM346.34 396.107a31.562 31.562 0 0 1-33.383-27.921 31.562 31.562 0 0 1 33.383-27.921 27.921 27.921 0 1 1 0 55.842z" fill="#FFF"></path></svg></a></div></div> <hr> <!----> <div class="content__sidebar-top"></div> <nav class="sidebar-nav-links"><div class="nav-item"><a href="/myblog/" class="nav-link router-link-active"><!---->
  首页
</a></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="Front-end Basics" class="dropdown-title"><span class="title"><!---->
      前端基础
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/javascript/html/" class="nav-link"><!---->
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/css/" class="nav-link"><!---->
  Css
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/javascript/" class="nav-link"><!---->
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/typescript/" class="nav-link"><!---->
  TypeScript
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title"><!---->
      计算机基础
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/javascript/algorithms/" class="nav-link"><!---->
  数据结构和算法
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/network/" class="nav-link"><!---->
  计算机网络/HTTP
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/network/输入url到页面展示全过程/" class="nav-link"><!---->
  输入url到页面展示全过程
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/operating-system/" class="nav-link"><!---->
  操作系统
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/design-model/" class="nav-link"><!---->
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/Web-Security/" class="nav-link"><!---->
  Web安全
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="框架和源码分析" class="dropdown-title"><span class="title"><!---->
      框架和源码分析
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/javascript/vue/Vue2原理和源码分析.html" class="nav-link"><!---->
  Vue 专题
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/React/" class="nav-link"><!---->
  React 专题
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/webpack/webpack构建原理.html" class="nav-link"><!---->
  webpack 专题
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/vite/" class="nav-link"><!---->
  vite 专题
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/axios/" class="nav-link"><!---->
  Axios 专题
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="浏览器" class="dropdown-title"><span class="title"><!---->
      浏览器
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/javascript/browser/浏览器原理/" class="nav-link"><!---->
  浏览器原理
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/browser/前端缓存和存储/" class="nav-link"><!---->
  前端缓存和存储
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/performance/前端调试技巧/" class="nav-link"><!---->
  前端调试技巧
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="node.js" class="dropdown-title"><span class="title"><!---->
      服务器
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/javascript/node/" class="nav-link"><!---->
  Node.js
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/linux/" class="nav-link"><!---->
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/mysql/" class="nav-link"><!---->
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/nginx/" class="nav-link"><!---->
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/docker/" class="nav-link"><!---->
  Docker
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="浏览器和性能优化" class="dropdown-title"><span class="title"><!---->
      性能优化
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/javascript/performance/性能优化指标和监控/" class="nav-link"><!---->
  性能优化指标和监控
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/performance/前端性能优化方案/" class="nav-link"><!---->
  前端性能优化方案
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/performance/一次管理后台的渲染优化/" class="nav-link"><!---->
  一次管理后台的渲染优化
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="前端工程" class="dropdown-title"><span class="title"><!---->
      前端工程
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/javascript/Front-end-Engineering/前端工程化/" class="nav-link"><!---->
  前端工程化
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/Front-end-Engineering/前端渲染架构/" class="nav-link"><!---->
  前端渲染架构
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/Front-end-Engineering/前端架构实践/" class="nav-link"><!---->
  前端架构实践
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/Front-end-Engineering/npm/" class="nav-link"><!---->
  npm
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/git/" class="nav-link"><!---->
  Git
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/projectDeploy/自动构建和部署/" class="nav-link"><!---->
  自动构建和部署
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="项目实践" class="dropdown-title"><span class="title"><!---->
      项目实践
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/javascript/projectDeploy/" class="nav-link"><!---->
  前端部署
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/componentsEncapsulation/组件和组件封装实践.html" class="nav-link"><!---->
  组件和组件封装实践
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/projectsSummary/登录与单点登录/" class="nav-link"><!---->
  登录与单点登录
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/projectsSummary/权限管理方案实践/" class="nav-link"><!---->
  权限管理方案实践
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/projectsSummary/Echarts二次封装实践/" class="nav-link"><!---->
  Echarts二次封装实践
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/projectsSummary/文档在线预览和编辑方案/" class="nav-link"><!---->
  文档在线预览和编辑方案
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/projectsSummary/移动端开发实践/" class="nav-link"><!---->
  移动端开发实践
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="项目搭建到原理分析" class="dropdown-title"><span class="title"><!---->
      项目搭建
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/javascript/projectsSummary/从零到一搭建SSR项目/" class="nav-link"><!---->
  从零到一搭建SSR项目
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/projectsSummary/从零到一搭建移动端SSG项目/" class="nav-link"><!---->
  从零到一搭建移动端SSG项目
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/projectsSummary/移动端SSG项目实践/" class="nav-link"><!---->
  移动端SSG项目实践
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/projectsSummary/从零到一搭建Vue2工程化项目/" class="nav-link"><!---->
  从零到一搭建Vue2工程化项目
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/projectsSummary/从零到一搭建Vue3工程化项目/" class="nav-link"><!---->
  从零到一搭建Vue3工程化项目
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/projectsSummary/搭建低代码平台/" class="nav-link"><!---->
  搭建低代码平台
</a></li><li class="dropdown-item"><!----> <a href="/myblog/javascript/projectsSummary/混合桌面应用开发实践/" class="nav-link"><!---->
  混合桌面应用开发实践
</a></li></ul></div></div> <!----></nav> <!----> <div class="content__sidebar-center"></div> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span class="title">JavaScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/myblog/javascript/" aria-current="page" class="sidebar-link">JavaScript 基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/javascript/#es6新特性" class="sidebar-link">ES6新特性</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#严格模式的限制" class="sidebar-link">严格模式的限制</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#script-标签加载脚本" class="sidebar-link">Script 标签加载脚本</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#js-延迟加载方式" class="sidebar-link">JS 延迟加载方式</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#内存分类" class="sidebar-link">内存分类</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#数据类型" class="sidebar-link">数据类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/javascript/#undefined-null" class="sidebar-link heading3">undefined &amp; null</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#nan" class="sidebar-link heading3">NaN</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#精度丢失" class="sidebar-link">精度丢失</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#整数相关问题" class="sidebar-link">整数相关问题</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#显示转换-隐式转换" class="sidebar-link">显示转换&amp;隐式转换</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#运算符规则" class="sidebar-link">运算符规则</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#位运算符" class="sidebar-link">位运算符</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/javascript/#异或运算" class="sidebar-link heading3">异或运算</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#尾后逗号" class="sidebar-link">尾后逗号</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#symbol" class="sidebar-link">Symbol</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#类型判断" class="sidebar-link">类型判断</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/javascript/#typeof-操作符" class="sidebar-link heading3">typeof 操作符</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#instanceof-操作符" class="sidebar-link heading3">instanceof 操作符</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#数据类型判断方法" class="sidebar-link heading3">数据类型判断方法</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#数组" class="sidebar-link">数组</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/javascript/#数组创建和检测" class="sidebar-link heading3">数组创建和检测</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#数组方法" class="sidebar-link heading3">数组方法</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#会改变原数组方法" class="sidebar-link heading3">会改变原数组方法</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#数组迭代" class="sidebar-link heading3">数组迭代</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#for-in-与-for-of-比较" class="sidebar-link heading3">for...in 与 for...of 比较</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#类数组" class="sidebar-link">类数组</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#字符串" class="sidebar-link">字符串</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/javascript/#字符串的不可变性" class="sidebar-link heading3">字符串的不可变性</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#object-对象" class="sidebar-link">Object 对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/javascript/#对象访问" class="sidebar-link heading3">对象访问</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#对象方法" class="sidebar-link heading3">对象方法</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#对象属性" class="sidebar-link heading3">对象属性</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#对象属性方法" class="sidebar-link heading3">对象属性方法</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#防篡改对象" class="sidebar-link heading3">防篡改对象</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#假值对象" class="sidebar-link heading3">假值对象</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#内置对象" class="sidebar-link heading3">内置对象</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#new操作符" class="sidebar-link heading3">new操作符</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#深浅拷贝" class="sidebar-link">深浅拷贝</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#集合" class="sidebar-link">集合</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/javascript/#set-集合" class="sidebar-link heading3">Set 集合</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#weakset" class="sidebar-link heading3">WeakSet</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#map-集合" class="sidebar-link heading3">Map 集合</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#set、map、object-比较" class="sidebar-link heading3">Set、Map、Object 比较</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#变量" class="sidebar-link">变量</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/javascript/#变量声明方式" class="sidebar-link heading3">变量声明方式</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#变量提升和函数提升" class="sidebar-link heading3">变量提升和函数提升</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#this-和-this-绑定" class="sidebar-link">this 和 this 绑定</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#执行环境-环境栈" class="sidebar-link">执行环境&amp;环境栈</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#作用域-作用域链" class="sidebar-link">作用域&amp;作用域链</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#闭包" class="sidebar-link">闭包</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#prototype-对象" class="sidebar-link">Prototype 对象</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#prototype属性和proto-属性" class="sidebar-link">Prototype属性和proto 属性</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#获取原型方法" class="sidebar-link">获取原型方法</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#constructor-属性" class="sidebar-link">constructor 属性</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#原型-原型链" class="sidebar-link">原型&amp;原型链</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#函数" class="sidebar-link">函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/javascript/#es5-函数" class="sidebar-link heading3">ES5 函数</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#箭头函数" class="sidebar-link heading3">箭头函数</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#箭头函数与普通函数的区别" class="sidebar-link heading3">箭头函数与普通函数的区别</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#其他函数" class="sidebar-link heading3">其他函数</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#函数柯里化" class="sidebar-link heading3">函数柯里化</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#对象" class="sidebar-link">对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/javascript/#创建对象方式有哪些" class="sidebar-link heading3">创建对象方式有哪些</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#创建对象方式比较" class="sidebar-link heading3">创建对象方式比较</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#对象继承方式" class="sidebar-link heading3">对象继承方式</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#对象继承方式比较" class="sidebar-link heading3">对象继承方式比较</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#类" class="sidebar-link">类</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/javascript/#class-类" class="sidebar-link heading3">Class 类</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#class-继承" class="sidebar-link heading3">Class 继承</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#reflect-对象" class="sidebar-link">Reflect 对象</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#object-defineproperty" class="sidebar-link">Object.defineProperty</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#proxy-对象" class="sidebar-link">Proxy 对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/javascript/#object-defineproperty-和-proxy-比较" class="sidebar-link heading3">Object.defineProperty 和 Proxy 比较</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#模块加载方案" class="sidebar-link">模块加载方案</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/javascript/#commonjs-模块" class="sidebar-link heading3">CommonJS 模块</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#es6模块" class="sidebar-link heading3">ES6模块</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#模块加载混合引用" class="sidebar-link heading3">模块加载混合引用</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#模块加载循环引用" class="sidebar-link heading3">模块加载循环引用</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#定时器" class="sidebar-link">定时器</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#垃圾回收" class="sidebar-link">垃圾回收</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/javascript/#内存泄漏" class="sidebar-link heading3">内存泄漏</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#ajax" class="sidebar-link">AJax</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/javascript/#创建-ajax-过程" class="sidebar-link heading3">创建 Ajax 过程</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#消息推送技术" class="sidebar-link">消息推送技术</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/javascript/#sse实现" class="sidebar-link heading3">SSE实现</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#websocket-实现" class="sidebar-link heading3">websocket 实现</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#跨页面通信方法" class="sidebar-link">跨页面通信方法</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#iframe框架" class="sidebar-link">Iframe框架</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#bom" class="sidebar-link">BOM</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#dom" class="sidebar-link">DOM</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/javascript/#dom事件分类" class="sidebar-link heading3">DOM事件分类</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#事件流" class="sidebar-link">事件流</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/javascript/#事件是如果实现的" class="sidebar-link heading3">事件是如果实现的？</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#事件委托-代理" class="sidebar-link heading3">事件委托(代理)</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#js-兼容性" class="sidebar-link">JS 兼容性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/javascript/#兼容性问题" class="sidebar-link heading3">兼容性问题</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/#兼容性统一处理方案" class="sidebar-link heading3">兼容性统一处理方案</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><!----> <span class="title">专题</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/myblog/javascript/%E5%BC%82%E6%AD%A5/" aria-current="page" class="active sidebar-link">异步编程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%BC%82%E6%AD%A5/#宏任务-微任务" class="sidebar-link">宏任务&amp;微任务</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%BC%82%E6%AD%A5/#浏览器事件循环" class="sidebar-link">浏览器事件循环</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%BC%82%E6%AD%A5/#node-事件循环" class="sidebar-link">Node 事件循环</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%BC%82%E6%AD%A5/#浏览器-node-事件循环区别" class="sidebar-link">浏览器&amp;Node 事件循环区别</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%BC%82%E6%AD%A5/#异步编程方式" class="sidebar-link">异步编程方式</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%BC%82%E6%AD%A5/#模拟异步操作方式" class="sidebar-link">模拟异步操作方式</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%BC%82%E6%AD%A5/#pomise-对象" class="sidebar-link">Pomise 对象</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%BC%82%E6%AD%A5/#async-await" class="sidebar-link">async await</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%BC%82%E6%AD%A5/#异步循环" class="sidebar-link">异步循环</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%BC%82%E6%AD%A5/#异步串行" class="sidebar-link">异步串行</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%BC%82%E6%AD%A5/#回调实现" class="sidebar-link heading3">回调实现</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%BC%82%E6%AD%A5/#异步并行" class="sidebar-link">异步并行</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%BC%82%E6%AD%A5/#全并行" class="sidebar-link heading3">全并行</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%BC%82%E6%AD%A5/#有限并行" class="sidebar-link heading3">有限并行</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%BC%82%E6%AD%A5/#异步题目" class="sidebar-link">异步题目</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%BC%82%E6%AD%A5/#异步api执行顺序" class="sidebar-link heading3">异步API执行顺序</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%BC%82%E6%AD%A5/#settimeout-与-setimmediate-输出顺序" class="sidebar-link heading3">setTimeout 与 setImmediate 输出顺序</a></li></ul></li></ul></li><li><a href="/myblog/javascript/Promise/" class="sidebar-link">Promise 专题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/javascript/Promise/#promise-基础" class="sidebar-link">Promise 基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/javascript/Promise/#promise-概念" class="sidebar-link heading3">Promise 概念</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/Promise/#then" class="sidebar-link heading3">then()</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/Promise/#错误处理" class="sidebar-link heading3">错误处理</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/Promise/#promise-值穿透" class="sidebar-link heading3">Promise 值穿透</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/Promise/#finally" class="sidebar-link heading3">finally()</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/Promise/#包装pomise-对象" class="sidebar-link heading3">包装Pomise 对象</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/Promise/#并发方法" class="sidebar-link heading3">并发方法</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/javascript/Promise/#promise-原理实现" class="sidebar-link">Promise 原理实现</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/Promise/#promise-执行顺序" class="sidebar-link">Promise 执行顺序</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/Promise/#promise-封装异步操作" class="sidebar-link">Promise 封装异步操作</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/Promise/#promise-特性" class="sidebar-link">Promise 特性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/javascript/Promise/#promise-特性问题" class="sidebar-link heading3">Promise 特性问题</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/Promise/#promise-应用题" class="sidebar-link heading3">Promise 应用题</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/javascript/Promise/#promisec串行" class="sidebar-link">Promisec串行</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/javascript/Promise/#串行概念" class="sidebar-link heading3">串行概念</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/Promise/#pomise-串行实现" class="sidebar-link heading3">Pomise 串行实现</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/Promise/#串行应用" class="sidebar-link heading3">串行应用</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/javascript/Promise/#promise-并行" class="sidebar-link">Promise 并行</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/javascript/Promise/#并行执行-api" class="sidebar-link heading3">并行执行 API</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/Promise/#并发控制" class="sidebar-link heading3">并发控制</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/javascript/Promise/#参考资料" class="sidebar-link">参考资料</a></li></ul></li><li><a href="/myblog/javascript/%E5%8E%9F%E7%90%86%E5%AE%9E%E7%8E%B0/" class="sidebar-link">JS原理实现</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%8E%9F%E7%90%86%E5%AE%9E%E7%8E%B0/#实现-new-操作符" class="sidebar-link">实现 new 操作符</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%8E%9F%E7%90%86%E5%AE%9E%E7%8E%B0/#实现-instanceof-操作符" class="sidebar-link">实现 instanceof 操作符</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%8E%9F%E7%90%86%E5%AE%9E%E7%8E%B0/#实现-object-create" class="sidebar-link">实现 Object.create()</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%8E%9F%E7%90%86%E5%AE%9E%E7%8E%B0/#实现-call" class="sidebar-link">实现 call()</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%8E%9F%E7%90%86%E5%AE%9E%E7%8E%B0/#实现-apply" class="sidebar-link">实现 apply()</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%8E%9F%E7%90%86%E5%AE%9E%E7%8E%B0/#实现-bind" class="sidebar-link">实现 bind()</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%8E%9F%E7%90%86%E5%AE%9E%E7%8E%B0/#实现-sort" class="sidebar-link">实现 sort()</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%8E%9F%E7%90%86%E5%AE%9E%E7%8E%B0/#实现准时的-settimeout" class="sidebar-link">实现准时的 setTimeout</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%8E%9F%E7%90%86%E5%AE%9E%E7%8E%B0/#实现深拷贝" class="sidebar-link">实现深拷贝</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%8E%9F%E7%90%86%E5%AE%9E%E7%8E%B0/#实现防抖" class="sidebar-link">实现防抖</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%8E%9F%E7%90%86%E5%AE%9E%E7%8E%B0/#实现节流" class="sidebar-link">实现节流</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%8E%9F%E7%90%86%E5%AE%9E%E7%8E%B0/#实现函数柯里化" class="sidebar-link">实现函数柯里化</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%8E%9F%E7%90%86%E5%AE%9E%E7%8E%B0/#柯里化函数题目" class="sidebar-link">柯里化函数题目</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%8E%9F%E7%90%86%E5%AE%9E%E7%8E%B0/#实现图片懒加载" class="sidebar-link">实现图片懒加载</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%8E%9F%E7%90%86%E5%AE%9E%E7%8E%B0/#实现-jsonp" class="sidebar-link">实现 JSONP</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%8E%9F%E7%90%86%E5%AE%9E%E7%8E%B0/#实现单例模式" class="sidebar-link">实现单例模式</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%8E%9F%E7%90%86%E5%AE%9E%E7%8E%B0/#观察者模式" class="sidebar-link">观察者模式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%8E%9F%E7%90%86%E5%AE%9E%E7%8E%B0/#通用实现" class="sidebar-link heading3">通用实现</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%8E%9F%E7%90%86%E5%AE%9E%E7%8E%B0/#defineproperty-实现" class="sidebar-link heading3">defineProperty 实现</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%8E%9F%E7%90%86%E5%AE%9E%E7%8E%B0/#proxy实现" class="sidebar-link heading3">Proxy实现</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%8E%9F%E7%90%86%E5%AE%9E%E7%8E%B0/#发布订阅者模式" class="sidebar-link">发布订阅者模式</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%8E%9F%E7%90%86%E5%AE%9E%E7%8E%B0/#实现generator" class="sidebar-link">实现Generator</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%8E%9F%E7%90%86%E5%AE%9E%E7%8E%B0/#实现-async-await" class="sidebar-link">实现 async await</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span class="title">应用</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/myblog/javascript/%E5%BA%94%E7%94%A8%E9%A2%98/" class="sidebar-link">JS应用题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%BA%94%E7%94%A8%E9%A2%98/#图片预加载和懒加载" class="sidebar-link">图片预加载和懒加载</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%BA%94%E7%94%A8%E9%A2%98/#图片预加载" class="sidebar-link heading3">图片预加载</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%BA%94%E7%94%A8%E9%A2%98/#图片懒加载" class="sidebar-link heading3">图片懒加载</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%BA%94%E7%94%A8%E9%A2%98/#url-拆解问题" class="sidebar-link">URL 拆解问题</a></li><li class="sidebar-sub-header"><a href="/myblog/javascript/%E5%BA%94%E7%94%A8%E9%A2%98/#将-http-header-转换成对象" class="sidebar-link">将 HTTP header 转换成对象</a></li></ul></li></ul></section></li></ul> <!----> <div class="content__sidebar-bottom"></div> <!----></aside> <main class="page"><nav class="breadcrumb"><ol vocab="https://schema.org/" typeof="BreadcrumbList"><li property="itemListElement" typeof="ListItem"><a href="/myblog/javascript/" property="item" typeof="WebPage" class="router-link-active"><!----> <span property="name">JavaScript 基础</span></a> <meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem" class="is-active"><a href="/myblog/javascript/%E5%BC%82%E6%AD%A5/" aria-current="page" property="item" typeof="WebPage" class="router-link-exact-active router-link-active"><!----> <span property="name">异步编程</span></a> <meta property="position" content="2"></li></ol></nav> <!----> <div class="content__page-top"></div> <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><!----> <span property="headline">异步编程</span></h1> <div class="page-info"><!----> <true-info defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/"></true-info><true-info defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/"></true-info><true-info defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/"></true-info><true-info defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/"></true-info><true-info defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/"></true-info><true-info defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/"></true-info><true-info defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/"></true-info></div> <!----> <hr></div> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor"><a href="/myblog/javascript/%E5%BC%82%E6%AD%A5/#宏任务-微任务" class="anchor-link heading2"><div>宏任务&amp;微任务</div></a></li><li class="anchor"><a href="/myblog/javascript/%E5%BC%82%E6%AD%A5/#浏览器事件循环" class="anchor-link heading2"><div>浏览器事件循环</div></a></li><li class="anchor"><a href="/myblog/javascript/%E5%BC%82%E6%AD%A5/#node-事件循环" class="anchor-link heading2"><div>Node 事件循环</div></a></li><li class="anchor"><a href="/myblog/javascript/%E5%BC%82%E6%AD%A5/#浏览器-node-事件循环区别" class="anchor-link heading2"><div>浏览器&amp;Node 事件循环区别</div></a></li><li class="anchor"><a href="/myblog/javascript/%E5%BC%82%E6%AD%A5/#异步编程方式" class="anchor-link heading2"><div>异步编程方式</div></a></li><li class="anchor"><a href="/myblog/javascript/%E5%BC%82%E6%AD%A5/#模拟异步操作方式" class="anchor-link heading2"><div>模拟异步操作方式</div></a></li><li class="anchor"><a href="/myblog/javascript/%E5%BC%82%E6%AD%A5/#pomise-对象" class="anchor-link heading2"><div>Pomise 对象</div></a></li><li class="anchor"><a href="/myblog/javascript/%E5%BC%82%E6%AD%A5/#async-await" class="anchor-link heading2"><div>async await</div></a></li><li class="anchor"><a href="/myblog/javascript/%E5%BC%82%E6%AD%A5/#异步循环" class="anchor-link heading2"><div>异步循环</div></a></li><li class="anchor"><a href="/myblog/javascript/%E5%BC%82%E6%AD%A5/#异步串行" class="anchor-link heading2"><div>异步串行</div></a></li><li class="anchor"><a href="/myblog/javascript/%E5%BC%82%E6%AD%A5/#回调实现" class="anchor-link heading3"><div>回调实现</div></a></li><li class="anchor"><a href="/myblog/javascript/%E5%BC%82%E6%AD%A5/#异步并行" class="anchor-link heading2"><div>异步并行</div></a></li><li class="anchor"><a href="/myblog/javascript/%E5%BC%82%E6%AD%A5/#全并行" class="anchor-link heading3"><div>全并行</div></a></li><li class="anchor"><a href="/myblog/javascript/%E5%BC%82%E6%AD%A5/#有限并行" class="anchor-link heading3"><div>有限并行</div></a></li><li class="anchor"><a href="/myblog/javascript/%E5%BC%82%E6%AD%A5/#异步题目" class="anchor-link heading2"><div>异步题目</div></a></li><li class="anchor"><a href="/myblog/javascript/%E5%BC%82%E6%AD%A5/#异步api执行顺序" class="anchor-link heading3"><div>异步API执行顺序</div></a></li><li class="anchor"><a href="/myblog/javascript/%E5%BC%82%E6%AD%A5/#settimeout-与-setimmediate-输出顺序" class="anchor-link heading3"><div>setTimeout 与 setImmediate 输出顺序</div></a></li></ul></div></aside></div> <!----> <div class="content__content-top"></div> <div class="theme-default-content content__default"><h1 id="异步编程"><a href="#异步编程" class="header-anchor">#</a> 异步编程</h1> <h2 id="宏任务-微任务"><a href="#宏任务-微任务" class="header-anchor">#</a> 宏任务&amp;微任务</h2> <p><strong>事件循环</strong>：event loop 宏任务：macrotask 也称为 task 微任务：microtask 也称为 jobs</p> <p><strong>微任务</strong></p> <ul><li>process.nextTick (Node)</li> <li>promise.then()，Promise.resolve()</li> <li>Object.observe</li> <li>MutationObserver (浏览器)</li></ul> <p><strong>宏任务</strong></p> <ul><li>script(主程序代码)</li> <li>setTimeout, setInterval, setImmediate,</li> <li>I/O, UI rendering</li> <li>回调函数（事件、ajax等）</li></ul> <p><img src="/myblog/assets/img/task=performance.d107c2fd.png" alt=""></p> <p><strong>过程</strong>： 在一次事件循环中，会先执行js线程的主任务，然后会去查找是否有微任务microtask（promise），如果有那就优先执行所有微任务，如果没有，在去查找宏任务macrotask（setTimeout、setInterval）进行执行。</p> <p>一个事件循环的执行步骤：</p> <ul><li>执行同步代码，这属于宏任务
<ul><li>在执行宏任务时，如遇到微任务，将微任务添加到本次循环的微任务队列中；</li></ul></li> <li>执行所有微任务</li> <li>渲染 UI</li> <li>然后开始下一轮 Event loop，执行宏任务中的异步代码</li></ul> <p><img src="/myblog/assets/img/event-loop.089f9a93.gif" alt=""></p> <h2 id="浏览器事件循环"><a href="#浏览器事件循环" class="header-anchor">#</a> 浏览器事件循环</h2> <p><img src="/myblog/assets/img/eventCycle.1e11ac01.png" alt=""></p> <p>浏览器的事件循环（Event Loop）是一种机制，用于管理 JavaScript 代码的执行顺序和处理异步事件。</p> <p>它确保 JavaScript 代码能够按照正确的顺序执行，并且能够响应用户交互、网络请求、计时器等异步事件。</p> <p>浏览器事件循环过程：</p> <p>JS 是<strong>单线程</strong>（指 JS 引擎线程）运行的，在代码执行的时候，通过将不同函数的执行上下文压入执行栈中来保证代码的有序执行：</p> <ol><li><p><strong>执行同步代码</strong>：</p> <ul><li>JavaScript 代码从上到下按顺序执行，遇到同步任务就立即执行。</li> <li>同步任务包括函数调用、变量赋值、计算等。</li> <li>在执行同步代码的时候，如果遇到了异步事件，将异步事件添加到事件队列，继续执行执行栈中的其他任务。</li></ul></li> <li><p><strong>处理微任务（Microtask）队列</strong>：</p> <ul><li>在执行完所有同步代码后，浏览器会检查是否存在微任务队列。</li> <li>微任务包括 Promise 的回调函数、MutationObserver 的回调函数等。</li> <li>如果存在微任务，会按顺序执行微任务队列中的所有任务，直到队列为空。</li></ul></li> <li><p><strong>渲染页面</strong>：</p> <ul><li>在执行完微任务后，浏览器会根据需要更新页面的显示。</li> <li>渲染页面通过 GUI 渲染线程渲染。</li> <li>这包括执行布局计算、样式计算等，以确保页面的可见部分保持最新状态。</li></ul></li> <li><p><strong>处理宏任务（Macrotask）队列（Web APIS）</strong>：</p> <ul><li>在执行完微任务并完成页面渲染后，浏览器会检查是否存在宏任务队列。</li> <li>宏任务包括DOM 操作、定时器（setTimeout、setInterval）、事件回调（如点击事件、AJAX 请求的回调）等。</li> <li>如果存在宏任务，会从队列中取出一个任务执行。执行完当前宏任务后，再次检查微任务队列。</li> <li>宏任务通过其他线程（非 JS 线程）：事件触发线程、定时触发器线程、异步 http 请求线程 执行。</li></ul></li> <li><p>重复执行：</p> <ul><li>上述步骤会不断重复，即先执行微任务，然后渲染页面，再执行宏任务，以此类推。</li> <li>这个过程就是事件循环的基本流程。</li></ul></li></ol> <p>注意：<strong>微任务优先级高于宏任务，即在每个宏任务执行完毕后，会先执行所有的微任务，然后再执行下一个宏任务</strong>。这保证了微任务的优先级和响应性能。</p> <p>总结：</p> <ul><li><p>浏览器的事件循环机制确保 JavaScript 代码的按序执行，并处理异步事件。</p></li> <li><p>它包括执行同步代码、处理微任务队列、渲染页面、处理宏任务队列等步骤，不断重复以实现异步任务的执行和页面的更新。</p></li> <li><p>微任务优先级高于宏任务，确保微任务能够及时响应和执行。</p></li></ul> <p>关于浏览器的线程，可以参考另一篇 <a href="https://sewar-x.github.io/browser/browser/#%E6%B5%8F%E8%A7%88%E5%99%A8%E8%BF%9B%E7%A8%8B" target="_blank" rel="noopener noreferrer">浏览器进程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 文章。</p> <p><strong>参考资料</strong></p> <p><a href="https://juejin.cn/post/6844903764202094606#heading-26" target="_blank" rel="noopener noreferrer">一次弄懂Event Loop<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="node-事件循环"><a href="#node-事件循环" class="header-anchor">#</a> Node 事件循环</h2> <ul><li><p>Node 事件循环模型：</p> <ul><li><p>Node 的 event loop 分为6个阶段，它们会按照顺序反复运行，分别如下:</p> <ul><li><code>timers</code>：执行 <code>setTimeout()</code> 和 <code>setInterval()</code> 中到期的callback;</li> <li><code>I/O callbacks</code>：上一轮循环中有少数的 <code>I/O callback</code> 会被延迟到这一轮的这一阶段执行;</li> <li><code>idle, prepare</code>：队列的移动，仅内部使用;</li> <li><code>poll</code>：最为重要的阶段，执行 <code>I/O callback</code>，在适当的条件下会阻塞在这个阶段</li> <li><code>check</code>：执行 <code>setImmediate</code> 的 callback</li> <li><code>close callbacks</code>：执行 close 事件的 callback，例如 <code>socket.on(&quot;close&quot;,func)</code></li></ul> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAo8AAAH3CAMAAADt10V4AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAeFBMVEVHcEwxMTGZzf//s2b/mpr///9rTk4yMjIyMjJkSUn///8yMjL/mZnUl1r3rmSFrtc+OjeTwvJPRDmPj4/kol6vgFHHkFf9smWIaEc/Rkyrq6uXyPpVZnhjfJV+pctzlLWZckuZmZnxqmJzW0JJU13v7OyTk5Obm5s9Am1CAAAACnRSTlMAt///l8J/b4JFB7oXqwAAH2dJREFUeNrsnY12osgWRqdlevVtK0jBoMgcxHTizLz/G94qUKORn0LBAL2/ZWgoSTUrbr9zTgHFH38ghBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQmhe+r6ckb7zeU5dy1mJz3P6PC5mI3iER3hE8AiP8AiPCB7hER7hEcEjPCJ4RPAIjwgeETzCI4JHBI/wiOARHuERHlGv+gmPaER6eYFHNB57fHl5+RMe0Wj05wWQ8IjGAOTLz4F5DFOBR9TVIofgMbAoCv6IugM5CI9KiNforrJmCB6V0SJXkqt9qvO91rkJ3zuts9C07vVusUvVDh5RhUUWPEofr/NP6Y+BCgO1C7M0C3cmfmeHMDxkpjULw0DnYSDw+PsWL/X6ZwB/zC2PueUxMB4Zmh8Jzeoi14bHwHil2p92lb6+DQKPkxn+btCfy6UMkz8W/ij2H8tnoApZPM0O+zTNF/2XPPA4DR5b43Vfkit/LODLSybDgsOC0mIwaJeSP8JjbT0jDy4+xnekgC4PP/xRxP4csmAR5EfrDGSvyB/h8VNWOdh4eKbSS380PxJmWh1ym1UuJExVEa8vM8g+vhLwOFkeXy7Gw58+WHiNH/742/NYeb7wEYO6zh8nc/5aKRYOi6F5rLieQnrxu3uKn6vM87HvQ1ceTcG/XC5ZNC8G57H5erO7zdEFP6mjUh7OAO7JH5fo+XO8fubx5+frcaWncHttkxW1d6ubPvhdgMcB1HvEvvHHfu9XcPdJcWh56DsAj5Pk8Y9bHuU2n3PcvDub/OSkfdRC3fNHcPv6eF3FY61luW9KI5lSR6vUotrxCyHwOEce7yBCnJ1Rmt+4uYrX5dtw8Z8Sr2fCo9yfz4nDGxUppjgE/S5fBXicVf54i4/rZkWj9ET08OPh0DZCHqWxzLgPS7kaF2yodqRlfNz9/6/KH3+on+SPk80f5b4EUhxGc+oi9i2+rf4plUPhlf74Q6lv8DhFHsU1msrQY4rdvgiN+aPBUf2PeD31+lo6ItnaJHVGKC3Dj+JOutzyaHBMHXn0htDFRzpw/4N2/0X1TCscXWoTaUxH5Z4yx4XNKx4Njn//gsfJ8nib0rVvysMIy8OXVtRc32NxXLbweM4f4bGh+0nlj53M0bm2dv1iyHXRfvG3K3CEx2nyKI9ETrez07U1cUOH0nWQ8+NvV+K4JF5P1B8/WZS453CNJ0weGBaXO5LO89/uiCM8TjF/nN/YxAlHeJwej9/nhOP3axzJH6cXr7/yntth9IGj4VH9qNZPeITHZ+O4/E/VingNj8/GcfnPXzVy4zGOEtdPz1er7jz21f+c8seZ8XiFY+tFVHd+oEkcrfrgsa/+4XGsx+CI4/GPfHf+eEuHaUn6i9cd+ydej/QYXHFs4tFX60hv1lpvSixeIxX5plFvvZVdfzVc2ATU8zZma+MlZtdtYnl51bEDjwP0D4/jPAZnHJvita+2q63evm0jC4G3jfxVHPvqfVWsJ75+PfnXxk+2kRerzco3LW9rHSdOPPbePzyO8xi0Oix74DFONir2Nsry8mZszEtMo+8lb2bheWt9jqcr/1UlsVqXrqf9xHPisff+yR9n7Y+r048xJfM6J3Tluq9OvLzq93ezso6srSkTbz03HnvvHx5nnT9e8LKKC88qGk7+FR0349LkjL1ttWnZ6HV3Hvvpn3g94/rautQHL957FK/8uChvk2I9WicGlc2bTezejH/Fvqk47N4btXbjsff+4XG+44/JtX95pvbQUVwGUGNUyuDiJWZFm4XZMPmdrYKL31qrTTuPQ/TfQlYcla/kZgMen3x+5t+Hzs9cUJRcrx63k6RcOb+b3Dn++Fj/5I8TOX/9i/PX8PjVx8D1PeSPozoGrn+Ex1EdA9eHw+OojoH7Z8gfR3UM3F8Ij6M6Bu6/Jl6P6hiYnwIeR3UMzN8zSR5neL/rB5DMbza5/HHGcxUy/+OE5w+fgyrmx3XLH9GI5yOdD4/MHw6Pk3reMLDBIzySP8IjPMLj6HkkfyRewyM8wiPxGh7hkfwRHuERHiedP7JoWRCvn8XjN1VAyaJ5AY/PitdodNcewiOCR3iER3hE8AiPCB4RPMIj+nIelVLF01ez3WIRZqlKd2HVs1sDFZav6vfgER774TFQxYOAAx0uwjQLFkGWVj0ZOK/n0bwn8AiP/fBYwiQ7Y4/ZobC7w64a29y+wsr38Ed47NUfQxUsROVFy/5okLIz0TuQ/KDS/Byv81RnoSyKxtMuFuldGiz2Wu0EHuHxYX+U/eFsc3IMv4a1QIJwsQ/CXbrIj/6YhSaqL8rGgkKzi/nFvTaRXuVhgD/C46P+aPCzZmewkpLQ4o2wsEsLa7BTZ380NrrXi2PjcZdcWRzNL+yJ1/DYgz9KbkN0SVfplRdZ4U5n2Sl5LNosr2XjcZdAWcu0gT7N4REeH88fs6KEybKitEl3R38MpHg/sMyex3vEYHdqPO6Sq1zvy6pIwyM8PuyPdrDHopdmJh3MDmX6KNmhTA7z8HD0R5s/SmB4tY2ZYdPssggCQ6kJ2RLmYRnKj2G++wse4dGOh++yo1dmqf4YD7ej44a3nUr3H/6419rW0KbR5I/HXWzY3qt9UBTi+CM8PqgwbSmLj+51XG3ZEx7hsXtklEt4pHew4BF/HF7SZUdZdFwIPP72PEr/vyP4Izz2jJV89rnzv0K8hsdWHqV7aKzjsqpwkTpg5dO7cn/EhkfidQU+9xms1GHZpbN78kfurv6CG7D75FEc3q2zSOmePorj2p3+qJh9wmHxdTy6xsXriCtuQ4/VzElnH26gkvl75jG/mXSKkdLF19rJWlQXP/KMegbYpjCfVKs5uoApDnxKc/YozuZ47/gjtI2YR3HKD6W2qJZGXh8a6XHKHpkfl/lIK7PBmiGgT3bY21CkwOP88sdGw6v1ROmaa0rjOKQ0RGypWbvck3g9H3+UVnvrUNBIhyq6FlHpXFzB4+zqGWkKvdJ6Mc/XXNcj8Pi7zdcsjSV4DcJSbXhXV645jBBJdR1ze0g8v3DW+eMAF/pI/dhSbfV+O7ZeV7hXPN/1GzxOtL6W+upDHMuTuvMy916WJq1gS9N4D8+/nv54z2cTkrpryKTF83q9dFzuyR8Njqkjj94QuvhIB+5/0O6fnj/O9LtscPz7FzxOjcfvc8Lx+zWOyxYez/kjPDZ0/9x4PYZrMAdQgSM8wuM4jqHEcUm8hscxHMMRR3icXv44Rx5POMIjPI7gGM44kj8Sr7/+GD5wNDyqH9X6CY/w+Gwcl/+pWhGv4fHZOC7/+atGbjzGUeL66flq1Z3HvvonfxztMVzh2HoR1Z0faBJHqz547Kt/eBzrMTjiePwj350/3tJhWpL+4nXH/onXIz0GVxybePTVOtKbtdabEovXSEW+adRbb2XXXw0XNgH1vI3Z2niJ2XWbWF5edezA4wD9w+M4j8EZx6Z47avtaqu3b9vIQuBtI38Vx756XxXria9fT/618ZNt5MVqs/JNy9tax4kTj733D4/jPAatDsseeIyTjYq9jbK8vBkb8xLT6HvJm1l43lqf4+nKf1VJrNal62k/8Zx47L1/8sdZ++Pq9GNMybzOCV257qsTL6/6/d2srCNra8rEW8+Nx977h8dZ548XvKziwrOKhpN/RcfNuDQ5Y29bbVo2et2dx376J17PuL62LvXBi/cexSs/LsrbpFiP1olBZfNmE7s341+xbyoOu/dGrd147L1/eJzv+GNy7V+eqT10FJcB1BiVMrh4iVnRZmE2TH5nq+Dit9Zq087jEP23kBVH5Su52YDHJ5+f+feh8zMXFCXXq8ftJClXzu8md44/PtY/+eNEzl//4vw1PH71MXB9D/njqI6B6x8nzOMc7y/k+vDp8jjL+6+5f2ay+eMTnxf3xOcXcn8hPI6JR+6/nm68niWPzE8Bj6Pikfl74HFUPDK/GfnjqHhk/scZz9c8RR4tkG75IxrrfKSz4pH5w+FxVDy2CdjgER7JH+ERHuFx9DySPxKv4REe4ZF4DY/wSP4Ij/AIj5POH1m0LIjXz+LxmyqgZNG8gMdnxWs0unv7HuVRwrR8nGWuJFAhPKKv9cfTw1UDJQZJeETjiNf4IxoDjxbCMFPpzvpjuNhrtZMzonmqstBwutc7kZ3SWfh/9s6FOVEeCsOzMJ2dbQYILBCdo+had7///w+/A3iXS4CgIX0zloaAMVOfvucCCZdGrziKdXF/DDyCx8/pukibYxwfS33kVxFHZ0MeMXfxesOn8G+vPGmzuTR6uyjeru+Pne0/jXqBR1d4HPPln39YH2MRUcklv2Kxo4tTWYjIo53kUxjR8iTarSk6NfJJ0VbQ3THoI3icro9x5TfW/iOTdiyuppzKTXkKw1evK1YZdW7xvK3cbOrdyzGPwCN4nOw/Vhq3O8XXtJU3qJJXSWJcamBMp/PLxko0zzHQ+dh9xA4ewePwRE8J4Xpz8h/juIh38tZ/jNZbr+b0eIy9qCgdRiobS0/zWDNMHh+jqHjqfciGwKMrPNLwr/4+vo6O4ljpYxxVQfNJ7wqOncvIpc4DcRAu2JZHp0ZvK9a7c46oPkaT1BE8fmN9pEfTSjdVb3e8oNrkb972Qsg/gsc58uG3ZVNLXeP1Gp2k+WBjDR5d5HHQl98pbXSHHrXpY/vVx+FyDf/RJf+RBptqDYB0Y2bqf1d3Dfrosr2eKo7tsNGAwzScSvDoEo+kTxk1S9ldD9SvgjRGdBHPIJ7pQ4XGvEnvTC1xHJt/xN3fb7hBXC//2AABtey2pXy03EZqNczjUJw2fwazY/o379FHauOOdNWOupmkjjdRD7Kakor5hc7NvyY9iWxhjPRB1ovp7/9LqP0/h8Aj5rs2hiY0RDufRZEmuLPg0Q0ee0Lh5pwMaUBC4yIbGhkEYf0eh+w19ZjflsCD+lOJ1NlEvWnJljjmeXTg0UX/kbo8xuaYg9oxHJU3vx8NNQ/NQD4csFnKo+ZVP90QpNsEUyeAQ0z6w7ng0dV4hgZ4fcN0kKY1GvUfwaPdPNKQaJp0RI76LltTp7HvjpGo13/E8xUWaa+pMVihoaaahmpsv8UelkpqeP7MD/DowHqkOhG0VtDbH2mPuCHt+q/y8LF4Ptc3WR+XRt4A2cU0DcgkaX4anl/owvMLHf1fxvNdF8njh0s4ftzjiOdfL+95wzbcgzlDqXAEj+DRjjHUOH7CXoNHG8ZwwhE8Ls9/dJHHM47gETxaMIYLjvAfYa/fP4Yrjsyj+NlcfoFH8PhqHD//E60F9ho8vhrHz7+/W4oej2midL+9QITDeTTVP/xHa8dwh2PvTVQjv1CVJqEJHk31Dx5tHYMmjqc/8mj/8ZkOblHm7PXA/mGvLR2DLo5dPAYiS2SeSZnXWOwTkQTcKFd+WNb3zEXpgPp+znu5r/jUlSp52ctUg8cZ+gePdo5BG8cuex2IVbiSq8MqKSHwV0kQpmkgvsKqrgK5P+tXHqhV4qciDwNuOWQyVVo8Gu8fPNo5BimOnwZ4TFUuUj8XJS8HljFfcWPgqwNvfD+TF3saBnuhUpHVqicD5WvxaLx/+I9O62N4/mFR4tfFoavrgTjzspdfX1zJklLWBNtbX49H4/2DR6f9xxtewrTSrKrhrF/JaTetRY7lbSW5JZfZcB7N9A977XB8XarUlRf/K0nDIK3CW1XVk0wxKvmhdOwOrF9pwBFHeXYuMj0ejfcPHt3NP6p7/fI59pBJWhtQFirBuPiKK5I3vMP+XRkFV+/KRN7P4xz995CVJvVLPe2Axxdfn/k36frMDUXqvnraV6quXI6qkfnHaf3Df1zI9es/uH4NHt89BtzfA//RqjHg/kfwaNUYcH/4cnl0cr4r5s8s1n90cz0AzC9cLo+eM+XGtmD+9ULttaM8Yn0K8GgVj1i/BzxaxSPWN4P/aBWPWP/RnfXDneCxBFLPf0RZ1nqkC+UR64eDR6t47CuADTyCR/iP4BE8gkfreYT/CHsNHsEjeIS9Bo/gEf4jeASP4HHR/iM2PRvY61fx+ENUUGLTvQGPr7LXKNbNpQKPKN+Vx0jE/AKP4NEOHgtBBXgEj1bpI4FH8PgWHgtRrMWG9ZC2a7HeQh9R3spjxDDG643nbY4RRQwk/EeU9/FIkYjI20kvFgXv7dasj2ceqf4x+wKPrvBomAu6hC/lxqsZ5D3oI8pb7TWzt1tTLCKvrHAD/EeUt/BIlSJu4tJtpM068i7+I11PAI/gcX4e6eo/7tZyy7txGV/vvKv/SPcnG9kQeHSFRzIKxk2+J6Y7XlrAhT6Cx3ntNV39R1y/RrEmH06t1pzMGmzw6CCPM5hsajTWNIcgw390yX+keWKafoYMgQ99dNFek5FaB6M0h6dKo3nE3d9vuEF8oP84mcmeBCPNln4cMX8Gs2P6N87EMw+XqXsVjlqQ7d69acb8QkfmXz+YUlMS2Zopb1VQGr57M3bw6Nx811k9yC7+xokjYf61wzyS+QibPC2S3jj/GsXG9VKozaEbXmtgjrpzQTTaWE/zH8GjnTzOOKWlNz051Ym8DZZgr11aT4rmJ46Muo8E/9HxeGZ6NEOtTJLGJZyBJvrxGHh0cD0patAfzRppmeNG12+y+9jII56vsFj/kV7qOBoMszvu7/kpxA/w+M3XI9UUyfZ2erL6rbt0nxLA87mc4pHa04ZDU+DUdDm7/UJfy6EuG0299hrPL3Tq+YXdPuND9WGm6/hb0mhMMNPII57vulAe3bQteP71Mp83/OESjh/3OILH5fFowz3B5kuN4yfsNXi0YQwnHMHj8vxHF3k84wgewaMFY7jgCP8R9vr9Y7jiyDyKn83lF3gEj6/G8fM/0Vpgr8Hjq3H8/Pu7pejxmCZK99sLRDicR1P9w3+0dgx3OPbeRDXyC1VpEprg0VT/4NHWMWjiePojj/Yfn+ngFmXOXg/sH/ba0jHo4tjFYyCyROaZlHmNxT4RScCNcuWHZX3PXJQOqO/nvJf7ik9dqZKXvUw1eJyhf/Bo5xi0ceyy14FYhSu5OqySEgJ/lQRhmgbiK6zqKpD7s37lgVolfiryMOCWQyZTpcWj8f7Bo51jkOL4aYDHVOUi9XNR8nJgGfMVNwa+OvDG9zN5sadhsBcqFVmtejJQvhaPxvuH/+i0PobnHxYlfl0curoeiDMve/n1xZUsKWVNsL319Xg03j94dNp/vOElTCvNqhrO+pWcdtNa5FjeVpJbcpkN59FM/7DXDsfXpUpdefG/kjQM0iq8VVU9yRSjkh9Kx+7A+pUGHHGUZ+ci0+PReP/g0d38o7rXL59jD5mktQFloRKMi6+4InnDO+zflVFw9a5M5P08ztF/D1lpUr/U0w54fPH1mX+Trs/cUKTuq6d9perK5agamX+c1j/8x4Vcv/6D69fg8d1jwP09mD9j1fwZ3P+4YB5dnF+I+8OXzKPnTLn87TB/ZrH+o5M8Yn4heLSKR8y/hr22ikesTwEereIR6/eAR6t4xPpm8B+t4hHrPzqxXrM7PJZA6vmPKO6uj2sRj1g/HDxaxWNfAWzgETzCfwSP4BE8Ws8j/EfYa/AIHsEj7DV4BI/wH8EjeASPi/YfsenZwF6/iscfooISm+6NKzxGIh7Q/A57jWLdXNMZeSyawSvAI3h8jz7SgGbwCB5n43G7FuuoEMVRHAvPi7dSbuJrc0zbdQQeweOreGTcKIoLsYnizdrzNsc4Pm6uzbSTEfQRPL6Kx1iwKHoUiaj0Fnk3IirW1+aduOB4fXb29Bd4BI9dgXXlKLIaRvUKTnRqLsR6c4UR+ggeZ+aR4lr/qkCaIYwrDuncHIlC7hDPgMd2Ho1ZzFrxaHN2FCt9pOMm8qLi1BwxoYXYgUfw+Cp7TUyeOEZRrY/kxRtZxdnnZuKAZvfgQdYoT9gQeASPTTA+71KLtwj/ETzOySPNSht4/C48mjCXI8GlRxmd8ungEfr4QBaNschk4sPhP4JHbbNNzWdRv3Dq18CjYzxOC241aXs6QDrmvJ9F8OiU/0jmI+t+iXy0t4hnwOOdvabJEqUZZFP7W0d88rk38Oig/ziORGr6pSmpxiw2eEQ804bfQx6cjBrmlg8Hj47wSM/2T7tGulkb0k0XUQPQ7bWbd4NH5/RxvN84LJ14vQXDlF4i/+gcjzTValLPles295ImfTzBXjvHI7Vx1F3TRmuQVSfkw797/nGOtKO+29iXlOyugUcn7TVNZXJoQENGrPWU+x+x+sQbFqiYKR9OHYmeu3hFJxdORsAcvn4PVufp37w/Hz7MSvZ7j6SfKW/6mI4aTbvfDKuXWbn+I00MbrveT2PfOOI/Ajx+2/X2aMqbzGUcJ97/CNos5NFh2/JT4nlIC7PXHy796T4ecBTiB3hcFo825JxmKnieJni0aAx43vASnzfsLI94Hjt4tGgMJY6ffzSfNwweO7qHvTaFI3gEj3aMocbxE/YaPNowhhOO4BH+ow1jOOMIHsGjBWO44Aj/Efb6/WO44sg8ip/N5Rd4BI+vxrHksa3AXoPHV+P4+fff7+aix2OaKN1vLxDhcB5N9Q//0dox3OHYexPV2C80TcJnXpQ5fRzYP3i0dQyaOJ7+yKP9xye1UqP00VT/sNeWjkEXxy4eA5HJJM+kzCsI1D4RSVA2rur6nnWqdEB9P0/4RN/PpFjxuw7+Xqb/t3ctOo7iQFAHuzrpLGKIkhBUCYwyke7///DahrwBG0L2wFO1WdZg40QztdXVbSAefPzA/OTjPD+DNx174rWQ5Ou0T/en/drK1H6drDabRH2vTrm08936q9GvfJes9ut8o3arxPBl+0iXDj5+Yn7ycZ6fIVXnf97lo/zmN/lObeKdMvp1Ukke53IwieOT2YhcXeJpvkq+lPBl26hekude+jj5/PSPQevjKm7+2tfpaujqdqLyRr++0u9vaWzXa6NfEm9jP32cfH7yMWj/eLrjy8ZqVk2QRr/Wze6mFjkhzj41Apdu89hLHyefn/E63Pz6Sb/ib/F0yaYOoLa93sbG053sRvRrk+Rbw5fTzgbWgfo4yfzkY8D1x0f9iiWlUOtNHUpte2uYs1epyJbsCF/kmE2VhTa7fKg+TjK/s5rZvF52yMdFrc/E+Uvjqb/JMPLL7sD640Tz0z8uZP36X65fL42P4d1/zet7luwfA7xXmNc/LpqPUTC4/Ox4fTj5OCc+8v6Z5frHIPnI+wvJx1nxkfdfM17Pio98PsWS+YggXo/PI+Xze6iPM9JHPt+M/nFefOTzH3/Q88NnCLw8P/xv5ekfidk8j/Th+xWWvYn4/PAw+BhovHaDZCMfyUf6Rz8+Ljpag3wMho+Y7CuKlqWP9I8zj9dYdIt8DNE/LpKJ7fUexmvmM/9b8ZH+MZx8Bi/fTrmkFphfB7s+s9hoTf8YXrwek2RrlXmPLRVKlbWfMWQe5tfB8xGvX5TuatX/lA2PfM7Qloz6/gw8zoNBnwBP3+vOeB3O+vVYaAXv860+mlfLW5p5uD5D/3iL1xiazx4LVWijazCtI+yRYxRlxzQ9XKKvHYTyrIryqo9loUx/ffA2j0yjmykGpdXkY6j5zKAMQtgDnRm1O5ylVRyjTJWZNrtZdj7cD0KlhWy48PGQZYX01wdv81Spvkzx8HY+2QxG+0duHJvp43Uf2urh6G7dmsIcsysEsy1UhehfZTs0UBZ2rHQ1o/XxEqxL6Y+q9HLwOk+ldCR71WP1qfuzvJJz6M/uL2VJyU3/ZmL8cvIRY3LrJi25JihGKKvCRmUL3GfNx+JwUFd9hBl9d7D2lkYyDa0LjQEWAu/Ea2J2GLQ+c0cUUTLd5MV1q7KKKAE4qwlmSd4M0iKJ5U0fMzu6Pphdh5RpZZX0WIyyjyAfA+PjcymnX6JwaHxfFkkr0kWFrESlgPNBdsvroEibFCY7qzv/aNymTu3Beh4tHaXE6nqKDv+IqfNrYjn6+OLY8OTohEjqrE30zUyGXEE4aRJmZKajvLJWBkVH6b8Uw4V2RWqzcXsQ5mw7jzCxrKfolsLbZ8HrfyPyMQw+omP12llgud38LH+uqgbg2ZM+vIPpvycVHgUQeKyvf7D+SMxbHzGq7Pf5K3fg0UP/GG687ij94ePEG9cN6mOAfMSQS2kG8avPDKDnXHQIYtf9FeRjMP7RW5eermlAL3Vb0iAfHv6x9UJirvoIL8fWSxo4x7zYALS+IVr60DMd6B/D9I/oi7hwsqyHil7pO8Z7TNZ7As1n4MsROIMw/LIQeKssXDaAfAyIj3Dn2D4JSz+pMMSkDjGe5GNQfET7ykxvKuOndx1+D+4QjcjXkLLeE3j9cUTtzyt/cYV+dOgpnFoL8jEYPqIrsUaPSsElju4wi3H/Azo+CPPrH+IfO5kGjzPhWvuDtzbDeQb5GKR/9LJu/YmHoxaJ1neEf2mI9fCf4x/782n/QOofsdFWRWq7AxetnwTk48+oP/YlwnhdU/ah6XsLgo7VIfIxMP+IN3MN+BSH0HvNxDtXBZGPgfpHz8I3xmbHHbKH/pwIneNBPobvHwesmbSnI77OE+2ZTiclOyM2+RhW/bG1xgLnsgkGXNo9rNoz8EHS5GMIfOSzj4j54HdIdPzN3ydBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEARBEFPgP1kZSqreVhq6AAAAAElFTkSuQmCC" alt=""></p></li> <li><p>不同于浏览器的是，在每个阶段完成后，而不是 macroTask 任务完成后，microTask队列就会被执行。这就导致了<strong>同样的代码在不同的上下文环境下会出现不同的结果</strong>.</p></li> <li><p>如果在 timers 阶段执行时创建了 setImmediate 则会在此轮循环的 check 阶段执行，如果在 timers 阶段创建了 setTimeout，由于 timers 已取出完毕，则会进入下轮循环，check 阶段创建 timers 任务同理。</p></li></ul></li> <li><p>流程：<img src="/myblog/assets/img/node时间循环流程.bd5636b3.png" alt="第46页-24"></p> <ul><li><p>在Node中，同样存在宏任务和微任务，与浏览器中的事件循环相似</p> <ul><li><p>微任务对应有：</p> <ul><li><p><strong>next tick queue</strong>:process.nextTick</p></li> <li><p><strong>other queue</strong>:Promise的then回调、queueMicrotask</p></li></ul></li> <li><p>宏任务对应有：</p> <ul><li><p><strong>timer queue</strong>:setTimeout、setlnterval</p></li> <li><p><strong>poll queue</strong>:IO事件</p></li> <li><p><strong>check queue</strong>:setlmmediate</p></li> <li><p><strong>close queue</strong>:close事件</p></li></ul></li> <li><p>其执行顺序为：next tick microtask queue</p> <ul><li>other microtask queue</li> <li>timer queue</li> <li>poll queue</li> <li>check queue</li> <li>close queue</li></ul></li></ul></li></ul></li> <li><p>Node 事件循环底层实现：</p> <ul><li><p><code>Node</code>中的<code>Event Loop</code>是基于<code>libuv</code>实现的，而<code>libuv</code>是 <code>Node</code> 的新跨平台抽象层，libuv使用异步，事件驱动的编程方式，核心是提供<code>i/o</code>的事件循环和异步回调。</p></li> <li><p>libuv的<code>API</code>包含有时间，非阻塞的网络，异步文件操作，子进程等等。 <code>Event Loop</code>就是在<code>libuv</code>中实现的。</p> <p><img src="/myblog/assets/img/event-loop-node.b953bfba.png" alt=""></p></li></ul></li> <li><p>事件顺序的示例:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello =&gt; number 1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setImmediate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Running before the timeout =&gt; number 3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;The timeout running last =&gt; number 4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

process<span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Running at next tick =&gt; number 2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//输出结果</span>
<span class="token comment">//Hello =&gt; number 1</span>
<span class="token comment">//Running at next tick =&gt; number 2</span>
<span class="token comment">//Running before the timeout =&gt; number 3</span>
<span class="token comment">//The timeout running last =&gt; number 4</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div></li></ul> <h2 id="浏览器-node-事件循环区别"><a href="#浏览器-node-事件循环区别" class="header-anchor">#</a> 浏览器&amp;Node 事件循环区别</h2> <ul><li><p>执行顺序区别：</p> <ul><li><p>浏览器先执行所有宏任务，然后再执行所有微任务</p></li> <li><p>Node 按 6 阶段顺序执行，先执行 timer 任务，后执行microtask队列的所有任务</p></li> <li><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'timer1'</span><span class="token punctuation">)</span>

    Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise1'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'timer2'</span><span class="token punctuation">)</span>

    Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise2'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

浏览器输出：
time1
promise1
time2
promise2

Node输出：
time1
time2
promise1
promise2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><ul><li>浏览器：两个setTimeout作为两个MacroTask, 所以先输出timer1, promise1，再输出timer2，promise2；</li> <li>Node：最初timer1和timer2就在timers阶段中。开始时首先进入timers阶段，执行timer1的回调函数，打印timer1，并将promise1.then回调放入microtask队列，同样的步骤执行timer2，打印timer2；
至此，timer阶段执行结束，event loop进入下一个阶段之前，执行microtask队列的所有任务，依次打印promise1、promise2。</li></ul></li></ul></li></ul> <h2 id="异步编程方式"><a href="#异步编程方式" class="header-anchor">#</a> 异步编程方式</h2> <ul><li><p>回调函数（Callback）：将一个函数作为参数传递给另一个函数，在异步操作完成后，通过回调函数处理结果。</p> <ul><li>优点：简单、容易理解；</li> <li>缺点：导致回调地狱和代码可读性差的问题，不利于维护，代码耦合高</li></ul></li> <li><p>事件监听: 采用时间驱动模式，取决于某个事件是否发生</p> <ul><li>优点：容易理解，可以绑定多个事件，每个事件可以指定多个回调函；</li> <li>缺点：事件驱动型，流程不够清晰</li></ul></li> <li><p>发布/订阅(观察者模式):  类似于事件监听，但是可以通过 消息中心，了解现在有多少发布者，多少订阅者 Promise对象</p> <ul><li>优点：可以利用 then方法，进行链式写法；可以书写错误时的回调函数；</li> <li>缺点：编写和理解，相对比较难</li></ul></li> <li><p>Promise 函数：Promise对象表示一个异步操作的最终完成或失败，并可链式调用<code>.then()</code>和<code>.catch()</code>等方法处理操作结果。</p></li> <li><p>Generator 函数</p> <ul><li>优点：函数体内外的数据交换、错误处理机制；</li> <li>缺点：流程管理不方便</li></ul></li> <li><p>async 函数：异步函数是ES7引入的一种基于Promise的语法糖，使异步代码看起来更像同步代码。</p> <ul><li>优点：内置执行器、更好的语义、更广的适用性、返回的是Promise、结构清晰；</li> <li>缺点：错误处理机制</li></ul></li></ul> <p>异步处理方法的比较: 参考 <a href="https://es6.ruanyifeng.com/#docs/async#%E4%B8%8E%E5%85%B6%E4%BB%96%E5%BC%82%E6%AD%A5%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95%E7%9A%84%E6%AF%94%E8%BE%83" target="_blank" rel="noopener noreferrer">《ES6》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><img src="/myblog/assets/img/async1.ac2ac713.png" alt=""></p> <h2 id="模拟异步操作方式"><a href="#模拟异步操作方式" class="header-anchor">#</a> 模拟异步操作方式</h2> <p><img src="/myblog/assets/img/async2.e39cf562.png" alt=""></p> <h2 id="pomise-对象"><a href="#pomise-对象" class="header-anchor">#</a> Pomise 对象</h2> <p>promise 相关知识点和题目参考: <a href="https://gitee.com/jokerxw/myNotes/tree/master/javascript/%E5%8E%9F%E7%90%86%E5%AE%9E%E7%8E%B0/promise" target="_blank" rel="noopener noreferrer">promise 总结<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="async-await"><a href="#async-await" class="header-anchor">#</a> async await</h2> <p><img src="/myblog/assets/img/async-awiat1.d75210cf.png" alt=""></p> <p><img src="/myblog/assets/img/async-awiat2.6445b468.png" alt=""></p> <p><img src="/myblog/assets/img/async-awiat3.e55956af.png" alt=""></p> <p><img src="/myblog/assets/img/async-awiat4.dc4e7508.png" alt=""></p> <p><img src="/myblog/assets/img/async-awiat5.9e31417e.png" alt=""></p> <p>async 函数，使得异步操作变得更加方便，它就是 Generator 函数的语法糖</p> <ul><li>内置执行器：Generator 函数的执行必须靠执行器，<code>async</code>函数自带执行器</li> <li>更好的语义</li> <li>更广的适用性：<code>async</code>函数的<code>await</code>命令后面，可以是 Promise 对象和原始类型的值（数值、字符串和布尔值，但这时会自动转成立即 resolved 的 Promise 对象）</li> <li>返回值是 Promise</li></ul> <p><strong>注意：</strong></p> <ul><li><p>await 后面代码会立即执行，执行后结果和 await 下面代码会被当做回调函数内容添加到微任务队列中</p> <ul><li><p>示例：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async1</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async1 start'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async1 end'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async2</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script start'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setTimeout'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 

<span class="token keyword">new</span> <span class="token class-name">Promise</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script end'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//------输出--------</span>
script start
async1 start
async2
promise1
script end
async1 end
promise2
setTimeout

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><blockquote><p>注意以下几点:</p> <ul><li>定义 async1()，async2()，不会立即执行</li> <li>await async2(); 表示先执行 async2()，然后将 await 后面的代码当作 .then() 中的回调来处理，因此执行 async2() 以后，返回值和后面代码添加到微任务队列中</li> <li>初始化 promise，promise 中的代码会立即执行</li></ul></blockquote></li></ul></li></ul> <p>参考：<a href="https://es6.ruanyifeng.com/#docs/async" target="_blank" rel="noopener noreferrer">《ES6 教程》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="异步循环"><a href="#异步循环" class="header-anchor">#</a> 异步循环</h2> <blockquote><p>异步循环：在循环中包含异步操作</p></blockquote> <ul><li><p>解决思路： promise + async wait: 使用promise封装异步操作，使用async await执行循环</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> <span class="token function-variable function">getSomething</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">param</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">reslove<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">reslove</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">get </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>param<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> <span class="token function-variable function">getAll</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getSomething</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">getAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></li></ul> <h2 id="异步串行"><a href="#异步串行" class="header-anchor">#</a> 异步串行</h2> <blockquote><p>异步方案有：</p> <ul><li>回调</li> <li>promise</li> <li>async await</li></ul></blockquote> <h3 id="回调实现"><a href="#回调实现" class="header-anchor">#</a> 回调实现</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// operations defined elsewhere and ready to execute</span>
<span class="token keyword">const</span> operations <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">func</span><span class="token operator">:</span> function1<span class="token punctuation">,</span> <span class="token literal-property property">args</span><span class="token operator">:</span> args1 <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">func</span><span class="token operator">:</span> function2<span class="token punctuation">,</span> <span class="token literal-property property">args</span><span class="token operator">:</span> args2 <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">func</span><span class="token operator">:</span> function3<span class="token punctuation">,</span> <span class="token literal-property property">args</span><span class="token operator">:</span> args3 <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">executeFunctionWithArgs</span><span class="token punctuation">(</span><span class="token parameter">operation<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// executes function</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> args<span class="token punctuation">,</span> func <span class="token punctuation">}</span> <span class="token operator">=</span> operation<span class="token punctuation">;</span>
  <span class="token function">func</span><span class="token punctuation">(</span>args<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 传入参数并执行函数</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">serialProcedure</span><span class="token punctuation">(</span><span class="token parameter">operation</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>operation<span class="token punctuation">)</span> process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// finished</span>
  <span class="token function">executeFunctionWithArgs</span><span class="token punctuation">(</span>operation<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// continue AFTER callback</span>
    <span class="token function">serialProcedure</span><span class="token punctuation">(</span>operations<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//回调中执行下一个异步函数</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">serialProcedure</span><span class="token punctuation">(</span>operations<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="异步并行"><a href="#异步并行" class="header-anchor">#</a> 异步并行</h2> <h3 id="全并行"><a href="#全并行" class="header-anchor">#</a> 全并行</h3> <ul><li>全并行：全部异步函数同时并发执行，不限制数据量</li> <li>题目：实现通过电子邮件发送 1,000,000 个电子邮件收件人的列表。</li></ul> <h4 id="回调实现-2"><a href="#回调实现-2" class="header-anchor">#</a> 回调实现</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> success <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> failed <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> recipients <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Bart'</span><span class="token punctuation">,</span> <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token string">'bart@tld'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Marge'</span><span class="token punctuation">,</span> <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token string">'marge@tld'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Homer'</span><span class="token punctuation">,</span> <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token string">'homer@tld'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Lisa'</span><span class="token punctuation">,</span> <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token string">'lisa@tld'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Maggie'</span><span class="token punctuation">,</span> <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token string">'maggie@tld'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token parameter">recipient<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// `sendEmail` is a hypothetical SMTP client</span>
  <span class="token function">sendMail</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">subject</span><span class="token operator">:</span> <span class="token string">'Dinner tonight'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'We have lots of cabbage on the plate. You coming?'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">smtp</span><span class="token operator">:</span> recipient<span class="token punctuation">.</span>email<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    callback
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">final</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Result: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token punctuation">.</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> attempts \
      &amp; </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token punctuation">.</span>success<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> succeeded emails</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>failed<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Failed to send to: \
        \n</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token punctuation">.</span>failed<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\n</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

recipients<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">recipient</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">dispatch</span><span class="token punctuation">(</span>recipient<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      success <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      failed<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>recipient<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    count <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">===</span> recipients<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">final</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        count<span class="token punctuation">,</span>
        success<span class="token punctuation">,</span>
        failed<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div><h3 id="有限并行"><a href="#有限并行" class="header-anchor">#</a> 有限并行</h3> <ul><li>优先并行：通过控制限制并发数量，实现并发请求</li></ul> <h4 id="回调实现-3"><a href="#回调实现-3" class="header-anchor">#</a> 回调实现</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> successCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 记录成功发送的邮件数量</span>
<span class="token keyword">let</span> parallelCount <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span> <span class="token comment">// 并发执行数量</span>
<span class="token keyword">function</span> <span class="token function">final</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">dispatched </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>successCount<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> emails</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 打印成功发送的邮件数量</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'finished'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 打印任务完成的消息</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token parameter">recipient<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// `sendEmail` 是一个假设的 SMTP 客户端，用于发送邮件</span>
  <span class="token function">sendMail</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">subject</span><span class="token operator">:</span> <span class="token string">'Dinner tonight'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'We have lots of cabbage on the plate. You coming?'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">smtp</span><span class="token operator">:</span> recipient<span class="token punctuation">.</span>email<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    callback
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">sendOneMillionEmailsOnly</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">getListOfTenMillionGreatEmails</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> bigList</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span>

    <span class="token keyword">function</span> <span class="token function">parallel</span><span class="token punctuation">(</span><span class="token parameter">recipients</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 并行发送的邮件计数器</span>
      <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 收件人列表的索引</span>

      <span class="token keyword">function</span> <span class="token function">sendNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">&gt;=</span> <span class="token number">1000000</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">final</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 达到发送限制时调用 final 函数结束发送</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;=</span> recipients<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">// 所有收件人都已处理完毕时直接返回</span>

        <span class="token function">dispatch</span><span class="token punctuation">(</span>recipients<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>_err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            successCount <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 更新成功发送的邮件数量</span>
            count <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 更新并行发送的邮件计数器</span>
          <span class="token punctuation">}</span>
          index <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 更新收件人列表的索引</span>
          <span class="token function">sendNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 递归调用 sendNext 处理下一个收件人</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> parallelCount<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">sendNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 启动并行发送任务</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">parallel</span><span class="token punctuation">(</span>bigList<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> parallelCount<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将收件人列表切片为大小为 parallelCount 的子列表作为初始并行任务的输入</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">sendOneMillionEmailsOnly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 启动发送一百万封电子邮件的过程</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><h2 id="异步题目"><a href="#异步题目" class="header-anchor">#</a> 异步题目</h2> <h3 id="异步api执行顺序"><a href="#异步api执行顺序" class="header-anchor">#</a> 异步API执行顺序</h3> <ul><li><p>题目一：以下代码输出结果</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async1 start'</span><span class="token punctuation">)</span>
 <span class="token keyword">await</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async1 end'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async2'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script start'</span><span class="token punctuation">)</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setTimeout0'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setTimeout2'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span>

<span class="token function">setImmediate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setImmediate'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

process<span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'nextTick1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

process<span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'nextTick2'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise1'</span><span class="token punctuation">)</span>
 <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise2'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise3'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script end'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><ul><li><p>结果：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>script start
async1 start
async2
promise1
promise2
script end
nextTick1
nextTick2
async1 end
promise3
setTimeout0
setImmediate
setTimeout2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li> <li><p>分析：</p> <blockquote><ol><li>首先，代码从顶部开始执行，<strong>输出<code>script start</code>。</strong></li> <li>接下来，<code>async1()</code>函数被调用，<strong>输出<code>async1 start</code>。</strong></li> <li>在<code>async1()</code>函数内部，遇到了<code>await async2()</code>语句。由于<code>async2()</code>函数是一个异步函数，所以它会返回一个Promise并暂停<code>async1()</code>函数的执行（async await 后面的函数被放入微任务列队）。</li> <li>此时，JavaScript引擎继续执行后面的代码。<strong>输出<code>async2</code></strong>，这是由于<code>async2()</code>函数被调用。</li> <li>紧接着，<strong>输出<code>promise1</code></strong>，这是因为<code>new Promise</code>的回调函数立即执行。</li> <li>继续执行，<strong>输出<code>promise2</code></strong>，然后调用<code>resolve()</code>。</li> <li>Promise的<code>resolve()</code>方法并不会立即执行<code>then</code>方法中的回调函数，而是将其放入事件队列中，等待当前执行栈为空后执行。</li> <li>继续执行主任务，<strong>输出<code>script end</code></strong>。</li> <li><strong>输出<code>nextTick1</code></strong>，这是由于<code>process.nextTick()</code>方法的回调函数会在当前执行栈执行完成后立即执行。</li> <li><strong>输出<code>nextTick2</code></strong>，这是因为在上一个<code>nextTick</code>回调函数之后，又调用了<code>process.nextTick()</code>方法。</li> <li>回到<code>async1()</code>函数，<strong>输出<code>async1 end</code></strong>。</li> <li>然后，<code>promise.then()</code>中的回调函数被放入事件队列中，等待当前执行栈为空后执行。</li> <li><strong>输出<code>promise3</code></strong>，这是因为<code>then</code>方法中的回调函数在上一步骤中被调用。</li> <li><code>setTimeout0</code>回调函数被放入事件队列中，等待至少达到设定的延迟时间（0ms）后执行，<strong>输出<code>setTimeout0</code></strong>。</li> <li><code>setImmediate</code>回调函数被放入事件队列中，等待当前执行栈为空后执行，<strong>输出<code>setImmediate</code></strong>。</li> <li><code>setTimeout2</code>回调函数被放入事件队列中，等待至少达到设定的延迟时间（300ms）后执行，<strong>输出<code>setTimeout2</code></strong>。</li></ol> <p>最后，根据事件循环机制和各个定时器的规则，事件循环会按照一定的顺序处理事件队列中的回调函数。因此，<code>setImmediate</code>回调函数会在<code>setTimeout</code>回调函数之前执行，而<code>setTimeout0</code>回调函数会在<code>setTimeout2</code>回调函数之前执行。</p></blockquote></li></ul></li></ul> <h3 id="settimeout-与-setimmediate-输出顺序"><a href="#settimeout-与-setimmediate-输出顺序" class="header-anchor">#</a> setTimeout 与 setImmediate 输出顺序</h3> <ul><li><p>以下代码输出结果为：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;setTimeout&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setImmediate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;setImmediate&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li><p>结果：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>情况一：
setTimeout
setImmediate
情况二：
setImmediate
setTimeout
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>分析：</p> <blockquote><p>● 外层同步代码一次性全部执行完，遇到异步API就塞到对应的阶段</p> <p>● 遇到setTimeout,虽然设置的是0毫秒触发，但实际上会被强制改成1ms,时间到了然后塞入times阶段</p> <p>● 遇到setImmediate塞入check 阶段</p> <p>● 同步代码执行完毕，进入Event Loop</p> <p>● 先进入times阶段，检查当前时间过去了1毫秒没有，如果过了1毫秒，满足setTimeout条件，执行回调，如果没过1毫秒，跳过</p> <p>● 跳过空的阶段，进入check阶段，执行setImmediate回调</p> <p>这里的关键在于这1ms,如果同步代码执行时间较长，进入Event Loop的时候1毫秒已经过了，setTimeout先执行，如果1毫秒还没到，就先执行了setImmediate</p></blockquote></li></ul></li></ul></div> <!----> <div class="content__content-bottom"></div> <footer class="page-meta"><!----> <div class="meta-item update-time"><span class="label">Last update:</span> <span class="info">January 22, 2024 14:49</span></div> <div class="meta-item contributors"><span class="label">Contributors: </span> <span class="info"><span title="email: 596777598@qq.com" class="contributor">
          sewar
        </span> <!----></span></div></footer> <!----> <!----> <!----> <div class="content__page-bottom"></div></main> <!----></div><div class="global-ui"><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="Close" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">This app can be installed on your PC or mobile device.  This will allow this web app to look and behave like any other installed app.  You will find it in your app lists and be able to pin it to your home screen, start menus or task bars.  This installed web app will also be able to safely interact with other apps and your operating system. </p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>Description</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        Install <span></span></button> <button class="cancel-button">
        Cancel
      </button></div></div></div></div><!----><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button title="Close" aria-label="Close" class="pswp__button pswp__button--close"></button> <button title="Share" aria-label="Share" class="pswp__button pswp__button--share"></button> <button title="Switch to full screen" aria-label="Switch to full screen" class="pswp__button pswp__button--fs"></button> <button title="Zoom in/out" aria-label="Zoom in/out" class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button title="Prev (Arrow Left)" aria-label="Prev (Arrow Left)" class="pswp__button pswp__button--arrow--left"></button> <button title="Next (Arrow Right)" aria-label="Next (Arrow Right)" class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></div></div>
    <script src="/myblog/assets/js/app.9d2b617a.js" defer></script><script src="/myblog/assets/js/layout-Layout.d2d4ce64.js" defer></script><script src="/myblog/assets/js/page-异步编程.904f4c65.js" defer></script><script src="/myblog/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-components/Blog/BlogHome~layout-components/~2222f443.5835591a.js" defer></script>
  </body>
</html>
