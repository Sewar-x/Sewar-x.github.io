<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>权限管理 | Sewen 博客</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="./mylogo.png">
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
    <link rel="manifest" href="/myblog/manifest.webmanifest" crossorigin="use-credentials">
    <link rel="alternate" type="application/atom+xml" href="https://sewar-x.github.io/myblog/atom.xml" title="Sewen 博客 Atom Feed">
    <link rel="alternate" type="application/json" href="https://sewar-x.github.io/myblog/rss.xml" title="Sewen 博客 JSON Feed">
    <link rel="alternate" type="application/rss+xml" href="https://sewar-x.github.io/myblog/rss.xml" title="Sewen 博客 RSS Feed">
    <meta name="description" content="sewen 的前端学习笔记、博客、前端基础总结、技术深度剖析、面试题总结、算法总结、项目过程总结">
    <meta property="og:url" content="https://sewar-x.github.io/myblog/projectsSummary/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E6%96%B9%E6%A1%88%E5%AE%9E%E8%B7%B5.html">
    <meta property="og:site_name" content="Sewen 博客">
    <meta property="og:title" content="权限管理">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="en-US">
    <meta name="theme-color" content="#46bd87">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <link rel="preload" href="/myblog/assets/css/0.styles.645fbc6f.css" as="style"><link rel="preload" href="/myblog/assets/js/app.9d2b617a.js" as="script"><link rel="preload" href="/myblog/assets/js/layout-Layout.d2d4ce64.js" as="script"><link rel="preload" href="/myblog/assets/js/page-权限管理.c7e10db0.js" as="script"><link rel="preload" href="/myblog/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-components/Blog/BlogHome~layout-components/~2222f443.5835591a.js" as="script"><link rel="prefetch" href="/myblog/assets/js/199.a9216960.js"><link rel="prefetch" href="/myblog/assets/js/200.4c66fc79.js"><link rel="prefetch" href="/myblog/assets/js/layout-Blog.1fca7e90.js"><link rel="prefetch" href="/myblog/assets/js/layout-NotFound.3c74e8aa.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/AlgoliaSearch/Dropdown.70fcebe7.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Anchor.3235541c.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/ArticleInfo.7b815b20.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/ArticleItem.b0e177e1.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/ArticleList.d1cf1b24.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/ArticleType.b630b80e.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/BlogHero.621312ba.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/BlogHome.4fe44489.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/BlogInfo.b2a94760.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/BlogPage.e0fbe820.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/BloggerInfo.0df38355.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/CategoryList.ec1bcd96.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/ProjectList.8550a110.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/TagList.bcf7b782.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/Timeline.b6cf5471.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/TimelineList.3c6e08a6.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Clipboard.e940a903.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Common.820a8694.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Home.70383986.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/MyTransition.0de46069.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Navbar/DropdownLink.e3f6c118.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Navbar/NavLink.93b11770.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Navbar/NavLinks.8ba214e6.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Navbar/Navbar.b90a94f9.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Navbar/RepoLink.663a7f55.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Navbar/SidebarButton.76b0035a.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Page.98b5d09c.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/PageFooter.20bc9bd8.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/PageMeta.b7e6b12f.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/PageNav.8305dd1f.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Password.45e0e82a.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Sidebar/DropdownTransition.068c5eea.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Sidebar/Sidebar.f6f90d52.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Sidebar/SidebarDropdownLink.505127a8.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Sidebar/SidebarGroup.7eecf370.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Sidebar/SidebarLink.6e39fe32.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Sidebar/SidebarNavLinks.0f8566cb.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Theme/DarkmodeSwitch.20ac7b92.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Theme/ThemeColor.6086e4ed.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Theme/ThemeOptions.483238c9.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/ArticleIcon.0a22e2b1.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/AutoIcon.2ff1c790.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/BookIcon.419b49ba.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/DarkIcon.7d81873b.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/EditIcon.8ada485d.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/EmptyIcon.d704a5cf.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/I18nIcon.ffad8b3e.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/LightIcon.47d807da.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/LinkIcon.1a8a7826.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/LockIcon.a29a2b79.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/NextIcon.0214ee59.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/Page404Icon.8bc1ebbb.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/PresentationIcon.17500d9b.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/PrevIcon.2ae04a70.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/ProjectIcon.b336d567.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/StickyIcon.0f509b9d.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Baidu.244b9a41.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Bitbucket.11ba94e1.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Dingding.e8a3d90d.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Discord.3295a55b.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Dribbble.464dac3b.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Email.f9254caa.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Evernote.991472fb.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Facebook.08e78e47.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Flipboard.a1124d0f.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Gitee.c44bc20a.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Github.5667e5ae.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Gitlab.ad95c7a7.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Gmail.b5acc6bc.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Instagram.56be85f2.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Lines.d9db3dce.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Linkedin.b82d8d8b.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Pinterest.0f3ffe71.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Pocket.41ef3c92.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/QQ.7558f4ba.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Qzone.bf658fae.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Reddit.9c4c95ee.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Rss.9780139e.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Steam.06abbae2.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Twitter.26fa5bda.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Wechat.9cac8c4c.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Weibo.5206a632.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Whatsapp.0738f1e3.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Youtube.f41fd7f2.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Zhihu.4d851d2f.js"><link rel="prefetch" href="/myblog/assets/js/page--0abc50bf.0d6f1484.js"><link rel="prefetch" href="/myblog/assets/js/page--1cd40f4c.dd76c7b3.js"><link rel="prefetch" href="/myblog/assets/js/page--53f93199.e80bdec8.js"><link rel="prefetch" href="/myblog/assets/js/page--5afd2fd0.adea4e92.js"><link rel="prefetch" href="/myblog/assets/js/page--67c584d3.0a3f3cd9.js"><link rel="prefetch" href="/myblog/assets/js/page--776a8506.cdf48aac.js"><link rel="prefetch" href="/myblog/assets/js/page-CSS.eb94b29f.js"><link rel="prefetch" href="/myblog/assets/js/page-Chrome开发工具使用指南.a2675120.js"><link rel="prefetch" href="/myblog/assets/js/page-DevServer.0281863d.js"><link rel="prefetch" href="/myblog/assets/js/page-Echarts二次封装.4387b8ad.js"><link rel="prefetch" href="/myblog/assets/js/page-Elementui与Element-plusui二次封装.82f12a09.js"><link rel="prefetch" href="/myblog/assets/js/page-Git基础.03c616ad.js"><link rel="prefetch" href="/myblog/assets/js/page-Git规范.e2fdc38a.js"><link rel="prefetch" href="/myblog/assets/js/page-HTML.1e3c14b9.js"><link rel="prefetch" href="/myblog/assets/js/page-Home.f0b7e772.js"><link rel="prefetch" href="/myblog/assets/js/page-JSON配置化组件二次封装.12060fd9.js"><link rel="prefetch" href="/myblog/assets/js/page-JS原理实现.3c427e19.js"><link rel="prefetch" href="/myblog/assets/js/page-JS应用题.3d313b34.js"><link rel="prefetch" href="/myblog/assets/js/page-JavaScript基础.551be887.js"><link rel="prefetch" href="/myblog/assets/js/page-Linux.c6159ebd.js"><link rel="prefetch" href="/myblog/assets/js/page-Loader和Plugin原理.b2971b76.js"><link rel="prefetch" href="/myblog/assets/js/page-MySQL.0b1d704a.js"><link rel="prefetch" href="/myblog/assets/js/page-NPM.a55851b2.js"><link rel="prefetch" href="/myblog/assets/js/page-Node.ec405a21.js"><link rel="prefetch" href="/myblog/assets/js/page-Nodejs常见问题集合.12844e69.js"><link rel="prefetch" href="/myblog/assets/js/page-Node性能优化.b4ea1c34.js"><link rel="prefetch" href="/myblog/assets/js/page-Promise专题.7869a31b.js"><link rel="prefetch" href="/myblog/assets/js/page-React.d76cf0ac.js"><link rel="prefetch" href="/myblog/assets/js/page-SSG移动端项目实践.2122615b.js"><link rel="prefetch" href="/myblog/assets/js/page-TypeScript.4f597fda.js"><link rel="prefetch" href="/myblog/assets/js/page-Vite.637881bf.js"><link rel="prefetch" href="/myblog/assets/js/page-Vite原理解析.6677fdb4.js"><link rel="prefetch" href="/myblog/assets/js/page-Vue25项目webpack构建分析.7bbea0fa.js"><link rel="prefetch" href="/myblog/assets/js/page-Vue2VsVue3.10be4140.js"><link rel="prefetch" href="/myblog/assets/js/page-Vue2x原理源码分析.e9e753b6.js"><link rel="prefetch" href="/myblog/assets/js/page-Vue3基础.210247ff.js"><link rel="prefetch" href="/myblog/assets/js/page-Vue3源码分析.17379e04.js"><link rel="prefetch" href="/myblog/assets/js/page-VueCli源码分析.afc3c83f.js"><link rel="prefetch" href="/myblog/assets/js/page-VueRouter原理分析.0a092eb6.js"><link rel="prefetch" href="/myblog/assets/js/page-VueSSR原理分析.63006040.js"><link rel="prefetch" href="/myblog/assets/js/page-VueVsReact.2156be28.js"><link rel="prefetch" href="/myblog/assets/js/page-Vuex原理分析.5ba3e6e4.js"><link rel="prefetch" href="/myblog/assets/js/page-WEB安全.5aa0eeef.js"><link rel="prefetch" href="/myblog/assets/js/page-WebPack构建原理.9c29703e.js"><link rel="prefetch" href="/myblog/assets/js/page-webpackAPI分析.4c8b152b.js"><link rel="prefetch" href="/myblog/assets/js/page-webpack优化.dcc6c3bc.js"><link rel="prefetch" href="/myblog/assets/js/page-webpack基础.3820ee6c.js"><link rel="prefetch" href="/myblog/assets/js/page-webpack项目实践.77e22417.js"><link rel="prefetch" href="/myblog/assets/js/page-一次后台管理系统的性能优化.7c2d8712.js"><link rel="prefetch" href="/myblog/assets/js/page-从零到一搭建SSR项目.855376fc.js"><link rel="prefetch" href="/myblog/assets/js/page-从零到一搭建Vue2项目和规范设计.93017fd2.js"><link rel="prefetch" href="/myblog/assets/js/page-从零到一搭建Vue3单页面应用.de152d54.js"><link rel="prefetch" href="/myblog/assets/js/page-从零到一搭建公共组件库.93278073.js"><link rel="prefetch" href="/myblog/assets/js/page-从零到一搭建移动端SSG项目.9c113d06.js"><link rel="prefetch" href="/myblog/assets/js/page-使用docker部署Node服务.5cf328fd.js"><link rel="prefetch" href="/myblog/assets/js/page-分治.e3dfc22d.js"><link rel="prefetch" href="/myblog/assets/js/page-前端发版静态资源404问题.9eb1ca89.js"><link rel="prefetch" href="/myblog/assets/js/page-前端存储.cd82cf54.js"><link rel="prefetch" href="/myblog/assets/js/page-前端工程化.1e6e58d0.js"><link rel="prefetch" href="/myblog/assets/js/page-前端性能优化方案.83718d22.js"><link rel="prefetch" href="/myblog/assets/js/page-前端架构实践.171dbc0f.js"><link rel="prefetch" href="/myblog/assets/js/page-前端渲染架构.3b783de8.js"><link rel="prefetch" href="/myblog/assets/js/page-前端自动部署.5076846c.js"><link rel="prefetch" href="/myblog/assets/js/page-前端部署原理.82ecd8a7.js"><link rel="prefetch" href="/myblog/assets/js/page-动态规划.a3af92f1.js"><link rel="prefetch" href="/myblog/assets/js/page-哈希表.c76000e8.js"><link rel="prefetch" href="/myblog/assets/js/page-回溯算法.cd914c32.js"><link rel="prefetch" href="/myblog/assets/js/page-图.dfd9828a.js"><link rel="prefetch" href="/myblog/assets/js/page-基础.7bf5a37b.js"><link rel="prefetch" href="/myblog/assets/js/page-堆.4657e538.js"><link rel="prefetch" href="/myblog/assets/js/page-字符串.252f2a08.js"><link rel="prefetch" href="/myblog/assets/js/page-异步编程.904f4c65.js"><link rel="prefetch" href="/myblog/assets/js/page-性能优化指标和监控.f2175836.js"><link rel="prefetch" href="/myblog/assets/js/page-排序算法.c7a51b99.js"><link rel="prefetch" href="/myblog/assets/js/page-搭建低代码平台.19eaf5ec.js"><link rel="prefetch" href="/myblog/assets/js/page-操作系统.473c4281.js"><link rel="prefetch" href="/myblog/assets/js/page-数学运算.c82748fb.js"><link rel="prefetch" href="/myblog/assets/js/page-数据结构算法.84480586.js"><link rel="prefetch" href="/myblog/assets/js/page-数组.692b0d0a.js"><link rel="prefetch" href="/myblog/assets/js/page-查找.790e52df.js"><link rel="prefetch" href="/myblog/assets/js/page-栈和队列.8dbc3586.js"><link rel="prefetch" href="/myblog/assets/js/page-树.24efdeaa.js"><link rel="prefetch" href="/myblog/assets/js/page-浏览器.bee9ec04.js"><link rel="prefetch" href="/myblog/assets/js/page-混合桌面应用开发.9e10d1c3.js"><link rel="prefetch" href="/myblog/assets/js/page-登录.bb830451.js"><link rel="prefetch" href="/myblog/assets/js/page-目录.c85b4d0b.js"><link rel="prefetch" href="/myblog/assets/js/page-移动端开发.56ac22ec.js"><link rel="prefetch" href="/myblog/assets/js/page-组件和组件封装.b5e86da2.js"><link rel="prefetch" href="/myblog/assets/js/page-计算机网络基础.0a106662.js"><link rel="prefetch" href="/myblog/assets/js/page-设计模式.ffdc7cfd.js"><link rel="prefetch" href="/myblog/assets/js/page-调试技巧.485ae36e.js"><link rel="prefetch" href="/myblog/assets/js/page-贪心算法.0f417640.js"><link rel="prefetch" href="/myblog/assets/js/page-输入url到页面展示全过程.510aef2e.js"><link rel="prefetch" href="/myblog/assets/js/page-递归.5e55e552.js"><link rel="prefetch" href="/myblog/assets/js/page-链表.1cf6927f.js"><link rel="prefetch" href="/myblog/assets/js/page-项目总结.ffcd2a4b.js"><link rel="prefetch" href="/myblog/assets/js/vendors~docsearch.f3877d0d.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-components/Blog/BlogHome~layout-components/~5d377965.d9712593.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-Blog~layout-Layout~layout-components/Blog/ArticleItem~layout-components/Blog/ArticleL~b56f3aac.47bb5cb5.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-NotFound~layout-components/Common~layout-components/Page.57d58db9.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-Slide.81546b3b.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-components/AlgoliaSearch/Full.b30f067a.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-components/Blog/BlogPage.bcccbd38.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-components/Navbar/Navbar.e2a7361e.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-components/Page.6c65077c.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-components/Sidebar/Sidebar.34cd9cf7.js"><link rel="prefetch" href="/myblog/assets/js/vendors~photo-swipe.428df1da.js">
    <link rel="stylesheet" href="/myblog/assets/css/0.styles.645fbc6f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-anchor"><header class="navbar"><!----> <div class="content__navbar-start"></div> <button title="Sidebar Button" class="sidebar-button"><span class="icon"></span></button> <a href="/myblog/" class="home-link router-link-active"><img src="./mylogo.png" alt="Sewen 博客" class="logo"> <!----> <span class="site-name can-hide">Sewen 博客</span></a> <!----> <div class="content__navbar-center"></div> <div class="links"><button tabindex="-1" aria-hidden="true" class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">Theme Color:</label> <li><span class="default-theme"></span></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">Theme Mode:</label> <div class="darkmode-switch"><div class="item day"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon light-icon"><path d="M512 256a42.667 42.667 0 0 0 42.667-42.667V128a42.667 42.667 0 0 0-85.334 0v85.333A42.667 42.667 0 0 0 512 256zm384 213.333h-85.333a42.667 42.667 0 0 0 0 85.334H896a42.667 42.667 0 0 0 0-85.334zM256 512a42.667 42.667 0 0 0-42.667-42.667H128a42.667 42.667 0 0 0 0 85.334h85.333A42.667 42.667 0 0 0 256 512zm9.387-298.667a42.667 42.667 0 0 0-59.307 62.72l61.44 59.307a42.667 42.667 0 0 0 31.147 11.947 42.667 42.667 0 0 0 30.72-13.227 42.667 42.667 0 0 0 0-60.16zm459.946 133.974a42.667 42.667 0 0 0 29.44-11.947l61.44-59.307a42.667 42.667 0 0 0-57.6-62.72l-61.44 60.587a42.667 42.667 0 0 0 0 60.16 42.667 42.667 0 0 0 28.16 13.227zM512 768a42.667 42.667 0 0 0-42.667 42.667V896a42.667 42.667 0 0 0 85.334 0v-85.333A42.667 42.667 0 0 0 512 768zm244.48-79.36a42.667 42.667 0 0 0-59.307 61.44l61.44 60.587a42.667 42.667 0 0 0 29.44 11.946 42.667 42.667 0 0 0 30.72-12.8 42.667 42.667 0 0 0 0-60.586zm-488.96 0-61.44 59.307a42.667 42.667 0 0 0 0 60.586 42.667 42.667 0 0 0 30.72 12.8 42.667 42.667 0 0 0 28.587-10.666l61.44-59.307a42.667 42.667 0 0 0-59.307-61.44zM512 341.333A170.667 170.667 0 1 0 682.667 512 170.667 170.667 0 0 0 512 341.333z" fill="currentColor"></path></svg></div> <div class="item auto active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon auto-icon"><path d="M460.864 539.072H564.8L510.592 376l-49.728 163.072zM872 362.368V149.504H659.648L510.528 0l-149.12 149.504H149.12v212.928L0 511.872l149.12 149.504v212.928h212.352l149.12 149.504 149.12-149.504h212.352V661.376l149.12-149.504L872 362.368zM614.464 693.12l-31.616-90.624H438.272l-31.616 90.624h-85.888l144.576-407.68h90.368l144.576 407.68h-85.824zm0 0" fill="currentColor"></path></svg></div> <div class="item night"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon dark-icon"><path d="M935.539 630.402c-11.43-11.432-28.674-14.739-43.531-8.354-46.734 20.103-96.363 30.297-147.508 30.297-99.59 0-193.221-38.784-263.64-109.203-108.637-108.637-139.61-270.022-78.908-411.148a39.497 39.497 0 0 0-51.886-51.887c-52.637 22.64-100.017 54.81-140.826 95.616-85.346 85.346-132.346 198.821-132.346 319.52 0 120.7 47.001 234.172 132.347 319.519S408.063 947.11 528.76 947.11c120.7 0 234.172-47.003 319.52-132.351 40.809-40.81 72.978-88.19 95.616-140.826a39.497 39.497 0 0 0-8.356-43.532z" fill="currentColor"></path></svg></div></div> <!----></div></div></div></button> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/myblog/" class="nav-link router-link-active"><!---->
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Front-end Basics" class="dropdown-title"><span class="title"><!---->
        前端基础
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/projectsSummary/html/" class="nav-link"><!---->
  HTML
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/css/" class="nav-link"><!---->
  Css
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/javascript/" class="nav-link"><!---->
  JavaScript
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/typescript/" class="nav-link"><!---->
  TypeScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title"><!---->
        计算机基础
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/projectsSummary/algorithms/" class="nav-link"><!---->
  数据结构和算法
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/network/" class="nav-link"><!---->
  计算机网络/HTTP
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/network/输入url到页面展示全过程/" class="nav-link"><!---->
  输入url到页面展示全过程
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/operating-system/" class="nav-link"><!---->
  操作系统
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/design-model/" class="nav-link"><!---->
  设计模式
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/Web-Security/" class="nav-link"><!---->
  Web安全
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架和源码分析" class="dropdown-title"><span class="title"><!---->
        框架和源码分析
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/projectsSummary/vue/Vue2原理和源码分析.html" class="nav-link"><!---->
  Vue 专题
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/React/" class="nav-link"><!---->
  React 专题
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/webpack/webpack构建原理.html" class="nav-link"><!---->
  webpack 专题
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/vite/" class="nav-link"><!---->
  vite 专题
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/axios/" class="nav-link"><!---->
  Axios 专题
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="浏览器" class="dropdown-title"><span class="title"><!---->
        浏览器
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/projectsSummary/browser/浏览器原理/" class="nav-link"><!---->
  浏览器原理
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/browser/前端缓存和存储/" class="nav-link"><!---->
  前端缓存和存储
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/performance/前端调试技巧/" class="nav-link"><!---->
  前端调试技巧
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="node.js" class="dropdown-title"><span class="title"><!---->
        服务器
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/projectsSummary/node/" class="nav-link"><!---->
  Node.js
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/linux/" class="nav-link"><!---->
  Linux
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/mysql/" class="nav-link"><!---->
  MySQL
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/nginx/" class="nav-link"><!---->
  Nginx
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/docker/" class="nav-link"><!---->
  Docker
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="浏览器和性能优化" class="dropdown-title"><span class="title"><!---->
        性能优化
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/projectsSummary/performance/性能优化指标和监控/" class="nav-link"><!---->
  性能优化指标和监控
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/performance/前端性能优化方案/" class="nav-link"><!---->
  前端性能优化方案
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/performance/一次管理后台的渲染优化/" class="nav-link"><!---->
  一次管理后台的渲染优化
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端工程" class="dropdown-title"><span class="title"><!---->
        前端工程
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/projectsSummary/Front-end-Engineering/前端工程化/" class="nav-link"><!---->
  前端工程化
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/Front-end-Engineering/前端渲染架构/" class="nav-link"><!---->
  前端渲染架构
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/Front-end-Engineering/前端架构实践/" class="nav-link"><!---->
  前端架构实践
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/Front-end-Engineering/npm/" class="nav-link"><!---->
  npm
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/git/" class="nav-link"><!---->
  Git
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/projectDeploy/自动构建和部署/" class="nav-link"><!---->
  自动构建和部署
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目实践" class="dropdown-title"><span class="title"><!---->
        项目实践
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/projectsSummary/projectDeploy/" class="nav-link"><!---->
  前端部署
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/componentsEncapsulation/组件和组件封装实践.html" class="nav-link"><!---->
  组件和组件封装实践
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/projectsSummary/登录与单点登录/" class="nav-link"><!---->
  登录与单点登录
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/projectsSummary/权限管理方案实践/" class="nav-link"><!---->
  权限管理方案实践
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/projectsSummary/Echarts二次封装实践/" class="nav-link"><!---->
  Echarts二次封装实践
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/projectsSummary/文档在线预览和编辑方案/" class="nav-link"><!---->
  文档在线预览和编辑方案
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/projectsSummary/移动端开发实践/" class="nav-link"><!---->
  移动端开发实践
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目搭建到原理分析" class="dropdown-title"><span class="title"><!---->
        项目搭建
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/projectsSummary/projectsSummary/从零到一搭建SSR项目/" class="nav-link"><!---->
  从零到一搭建SSR项目
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/projectsSummary/从零到一搭建移动端SSG项目/" class="nav-link"><!---->
  从零到一搭建移动端SSG项目
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/projectsSummary/移动端SSG项目实践/" class="nav-link"><!---->
  移动端SSG项目实践
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/projectsSummary/从零到一搭建Vue2工程化项目/" class="nav-link"><!---->
  从零到一搭建Vue2工程化项目
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/projectsSummary/从零到一搭建Vue3工程化项目/" class="nav-link"><!---->
  从零到一搭建Vue3工程化项目
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/projectsSummary/搭建低代码平台/" class="nav-link"><!---->
  搭建低代码平台
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/projectsSummary/混合桌面应用开发实践/" class="nav-link"><!---->
  混合桌面应用开发实践
</a></li></ul></div></div></nav> <!----> <!----> <!----> <div class="content__navbar-end"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><div vocab="https://schema.org/" typeof="Person" class="blogger-info mobile"><div data-balloon-pos="down" role="navigation" class="blogger hasIntro"><img property="image" alt="Blogger Avatar" src="./mylogo.png" class="avatar round"> <div property="name" class="name">Sewen 博客</div> <meta property="url" content="../outline.md"></div> <div class="num-wrapper"><div><div class="num">91</div> <div>Articles</div></div> <div><div class="num">0</div> <div>Category</div></div> <div><div class="num">0</div> <div>Tags</div></div> <div><div class="num">91</div> <div>Timeline</div></div></div> <div class="media-links-wrapper"><a href="https://github.com/Sewar-x/myblog" rel="noopener noreferrer" target="_blank" aria-label="Github" data-balloon-pos="up" class="media-link"><span class="sr-only">Github</span> <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon icon-github"><circle cx="512" cy="512" r="512" fill="#171515"></circle> <path d="M509.423 146.442c-200.317 0-362.756 162.42-362.756 362.8 0 160.266 103.936 296.24 248.109 344.217 18.139 3.327 24.76-7.872 24.76-17.486 0-8.613-.313-31.427-.49-61.702-100.912 21.923-122.205-48.63-122.205-48.63-16.495-41.91-40.28-53.067-40.28-53.067-32.937-22.51 2.492-22.053 2.492-22.053 36.407 2.566 55.568 37.386 55.568 37.386 32.362 55.438 84.907 39.43 105.58 30.143 3.296-23.444 12.667-39.43 23.032-48.498-80.557-9.156-165.246-40.28-165.246-179.297 0-39.604 14.135-71.988 37.342-97.348-3.731-9.178-16.18-46.063 3.556-96.009 0 0 30.46-9.754 99.76 37.19 28.937-8.048 59.97-12.071 90.823-12.211 30.807.14 61.843 4.165 90.822 12.21 69.26-46.944 99.663-37.189 99.663-37.189 19.792 49.946 7.34 86.831 3.61 96.01 23.25 25.359 37.29 57.742 37.29 97.347 0 139.366-84.82 170.033-165.637 179.013 13.026 11.2 24.628 33.342 24.628 67.182 0 48.498-.445 87.627-.445 99.521 0 9.702 6.535 20.988 24.945 17.444 144.03-48.067 247.881-183.95 247.881-344.175 0-200.378-162.442-362.798-362.802-362.798z" fill="#FFF"></path></svg></a><a href="1567910907" rel="noopener noreferrer" target="_blank" aria-label="Wechat" data-balloon-pos="up" class="media-link"><span class="sr-only">Wechat</span> <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon icon-wechat"><circle cx="512" cy="512" r="512" fill="#1AC88E"></circle> <path d="M827.551 578.742a176.583 176.583 0 0 0-185.685-158.379 172.942 172.942 0 0 0-186.3 158.379 172.942 172.942 0 0 0 185.686 158.379 282.169 282.169 0 0 0 65.536-10.923l60.689 32.768-16.384-54.613a166.275 166.275 0 0 0 76.458-125.611zm-245.76-27.307a21.845 21.845 0 1 1 0-43.69 24.872 24.872 0 0 1 27.307 21.845 24.872 24.872 0 0 1-27.921 21.845h.614zm121.356 0a21.845 21.845 0 1 1 0-43.69 24.872 24.872 0 0 1 27.306 21.845 24.872 24.872 0 0 1-28.512 21.845h1.206z" fill="#FFF"></path> <path d="M623.662 400.953h21.23A222.709 222.709 0 0 0 419.772 245.6a208.145 208.145 0 0 0-223.323 189.94 182.044 182.044 0 0 0 89.201 150.483l-22.436 67.356 78.279-39.435a389.575 389.575 0 0 0 78.279 10.923h20.616a163.226 163.226 0 0 1-6.667-46.718 182.044 182.044 0 0 1 189.94-177.197zm-121.379-60.69a27.921 27.921 0 1 1 0 55.843 31.562 31.562 0 0 1-33.36-27.921 31.562 31.562 0 0 1 34.59-27.921h-1.23zM346.34 396.107a31.562 31.562 0 0 1-33.383-27.921 31.562 31.562 0 0 1 33.383-27.921 27.921 27.921 0 1 1 0 55.842z" fill="#FFF"></path></svg></a></div></div> <hr> <!----> <div class="content__sidebar-top"></div> <nav class="sidebar-nav-links"><div class="nav-item"><a href="/myblog/" class="nav-link router-link-active"><!---->
  首页
</a></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="Front-end Basics" class="dropdown-title"><span class="title"><!---->
      前端基础
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/html/" class="nav-link"><!---->
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/css/" class="nav-link"><!---->
  Css
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/javascript/" class="nav-link"><!---->
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/typescript/" class="nav-link"><!---->
  TypeScript
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title"><!---->
      计算机基础
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/algorithms/" class="nav-link"><!---->
  数据结构和算法
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/network/" class="nav-link"><!---->
  计算机网络/HTTP
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/network/输入url到页面展示全过程/" class="nav-link"><!---->
  输入url到页面展示全过程
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/operating-system/" class="nav-link"><!---->
  操作系统
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/design-model/" class="nav-link"><!---->
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/Web-Security/" class="nav-link"><!---->
  Web安全
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="框架和源码分析" class="dropdown-title"><span class="title"><!---->
      框架和源码分析
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/vue/Vue2原理和源码分析.html" class="nav-link"><!---->
  Vue 专题
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/React/" class="nav-link"><!---->
  React 专题
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/webpack/webpack构建原理.html" class="nav-link"><!---->
  webpack 专题
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/vite/" class="nav-link"><!---->
  vite 专题
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/axios/" class="nav-link"><!---->
  Axios 专题
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="浏览器" class="dropdown-title"><span class="title"><!---->
      浏览器
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/browser/浏览器原理/" class="nav-link"><!---->
  浏览器原理
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/browser/前端缓存和存储/" class="nav-link"><!---->
  前端缓存和存储
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/performance/前端调试技巧/" class="nav-link"><!---->
  前端调试技巧
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="node.js" class="dropdown-title"><span class="title"><!---->
      服务器
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/node/" class="nav-link"><!---->
  Node.js
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/linux/" class="nav-link"><!---->
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/mysql/" class="nav-link"><!---->
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/nginx/" class="nav-link"><!---->
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/docker/" class="nav-link"><!---->
  Docker
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="浏览器和性能优化" class="dropdown-title"><span class="title"><!---->
      性能优化
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/performance/性能优化指标和监控/" class="nav-link"><!---->
  性能优化指标和监控
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/performance/前端性能优化方案/" class="nav-link"><!---->
  前端性能优化方案
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/performance/一次管理后台的渲染优化/" class="nav-link"><!---->
  一次管理后台的渲染优化
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="前端工程" class="dropdown-title"><span class="title"><!---->
      前端工程
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/Front-end-Engineering/前端工程化/" class="nav-link"><!---->
  前端工程化
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/Front-end-Engineering/前端渲染架构/" class="nav-link"><!---->
  前端渲染架构
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/Front-end-Engineering/前端架构实践/" class="nav-link"><!---->
  前端架构实践
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/Front-end-Engineering/npm/" class="nav-link"><!---->
  npm
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/git/" class="nav-link"><!---->
  Git
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/projectDeploy/自动构建和部署/" class="nav-link"><!---->
  自动构建和部署
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="项目实践" class="dropdown-title"><span class="title"><!---->
      项目实践
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/projectDeploy/" class="nav-link"><!---->
  前端部署
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/componentsEncapsulation/组件和组件封装实践.html" class="nav-link"><!---->
  组件和组件封装实践
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/projectsSummary/登录与单点登录/" class="nav-link"><!---->
  登录与单点登录
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/projectsSummary/权限管理方案实践/" class="nav-link"><!---->
  权限管理方案实践
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/projectsSummary/Echarts二次封装实践/" class="nav-link"><!---->
  Echarts二次封装实践
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/projectsSummary/文档在线预览和编辑方案/" class="nav-link"><!---->
  文档在线预览和编辑方案
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/projectsSummary/移动端开发实践/" class="nav-link"><!---->
  移动端开发实践
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="项目搭建到原理分析" class="dropdown-title"><span class="title"><!---->
      项目搭建
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/projectsSummary/从零到一搭建SSR项目/" class="nav-link"><!---->
  从零到一搭建SSR项目
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/projectsSummary/从零到一搭建移动端SSG项目/" class="nav-link"><!---->
  从零到一搭建移动端SSG项目
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/projectsSummary/移动端SSG项目实践/" class="nav-link"><!---->
  移动端SSG项目实践
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/projectsSummary/从零到一搭建Vue2工程化项目/" class="nav-link"><!---->
  从零到一搭建Vue2工程化项目
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/projectsSummary/从零到一搭建Vue3工程化项目/" class="nav-link"><!---->
  从零到一搭建Vue3工程化项目
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/projectsSummary/搭建低代码平台/" class="nav-link"><!---->
  搭建低代码平台
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/projectsSummary/混合桌面应用开发实践/" class="nav-link"><!---->
  混合桌面应用开发实践
</a></li></ul></div></div> <!----></nav> <!----> <div class="content__sidebar-center"></div> <!----> <!----> <div class="content__sidebar-bottom"></div> <!----></aside> <main class="page"><nav class="breadcrumb"><ol vocab="https://schema.org/" typeof="BreadcrumbList"><li property="itemListElement" typeof="ListItem"><a href="/myblog/projectsSummary/" property="item" typeof="WebPage" class="router-link-active"><!----> <span property="name">项目总结</span></a> <meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem" class="is-active"><a href="/myblog/projectsSummary/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E6%96%B9%E6%A1%88%E5%AE%9E%E8%B7%B5/" aria-current="page" property="item" typeof="WebPage" class="router-link-exact-active router-link-active"><!----> <span property="name">权限管理</span></a> <meta property="position" content="2"></li></ol></nav> <!----> <div class="content__page-top"></div> <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><!----> <span property="headline">权限管理</span></h1> <div class="page-info"><!----> <true-info defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/"></true-info><true-info defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/"></true-info><true-info defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/"></true-info><true-info defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/"></true-info><true-info defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/"></true-info><true-info defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/"></true-info><true-info defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/"></true-info></div> <!----> <hr></div> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor"><a href="/myblog/projectsSummary/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E6%96%B9%E6%A1%88%E5%AE%9E%E8%B7%B5/#rbac权限模型" class="anchor-link heading2"><div>RBAC权限模型</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E6%96%B9%E6%A1%88%E5%AE%9E%E8%B7%B5/#rbac0" class="anchor-link heading3"><div>RBAC0</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E6%96%B9%E6%A1%88%E5%AE%9E%E8%B7%B5/#rbac1" class="anchor-link heading3"><div>RBAC1</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E6%96%B9%E6%A1%88%E5%AE%9E%E8%B7%B5/#rbac2" class="anchor-link heading3"><div>RBAC2</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E6%96%B9%E6%A1%88%E5%AE%9E%E8%B7%B5/#rbac3" class="anchor-link heading3"><div>RBAC3</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E6%96%B9%E6%A1%88%E5%AE%9E%E8%B7%B5/#权限管理系统" class="anchor-link heading2"><div>权限管理系统</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E6%96%B9%E6%A1%88%E5%AE%9E%E8%B7%B5/#权限系统架构图" class="anchor-link heading3"><div>权限系统架构图</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E6%96%B9%E6%A1%88%E5%AE%9E%E8%B7%B5/#主要功能" class="anchor-link heading3"><div>主要功能</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E6%96%B9%E6%A1%88%E5%AE%9E%E8%B7%B5/#权限模型维度" class="anchor-link heading3"><div>权限模型维度</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E6%96%B9%E6%A1%88%E5%AE%9E%E8%B7%B5/#权限矩阵关系" class="anchor-link heading3"><div>权限矩阵关系</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E6%96%B9%E6%A1%88%E5%AE%9E%E8%B7%B5/#权限管理后台" class="anchor-link heading2"><div>权限管理后台</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E6%96%B9%E6%A1%88%E5%AE%9E%E8%B7%B5/#权限管理模块图" class="anchor-link heading2"><div>权限管理模块图</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E6%96%B9%E6%A1%88%E5%AE%9E%E8%B7%B5/#用户权限继承关系" class="anchor-link heading2"><div>用户权限继承关系</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E6%96%B9%E6%A1%88%E5%AE%9E%E8%B7%B5/#权限控制" class="anchor-link heading2"><div>权限控制</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E6%96%B9%E6%A1%88%E5%AE%9E%E8%B7%B5/#项目信息相关权限配置" class="anchor-link heading3"><div>项目信息相关权限配置</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E6%96%B9%E6%A1%88%E5%AE%9E%E8%B7%B5/#页面-组件权限开发流程" class="anchor-link heading3"><div>页面/组件权限开发流程</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E6%96%B9%E6%A1%88%E5%AE%9E%E8%B7%B5/#权限系统实现原理-前端" class="anchor-link heading2"><div>权限系统实现原理(前端)</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E6%96%B9%E6%A1%88%E5%AE%9E%E8%B7%B5/#页面权限模块实现" class="anchor-link heading3"><div>页面权限模块实现</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E6%96%B9%E6%A1%88%E5%AE%9E%E8%B7%B5/#按钮-组件权限控制实现" class="anchor-link heading3"><div>按钮/组件权限控制实现</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E6%96%B9%E6%A1%88%E5%AE%9E%E8%B7%B5/#前端路由权限实现方案总结" class="anchor-link heading2"><div>前端路由权限实现方案总结</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E6%96%B9%E6%A1%88%E5%AE%9E%E8%B7%B5/#定义" class="anchor-link heading3"><div>定义</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E6%96%B9%E6%A1%88%E5%AE%9E%E8%B7%B5/#静态路由" class="anchor-link heading3"><div>静态路由</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E6%96%B9%E6%A1%88%E5%AE%9E%E8%B7%B5/#动态路由" class="anchor-link heading3"><div>动态路由</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E6%96%B9%E6%A1%88%E5%AE%9E%E8%B7%B5/#问题" class="anchor-link heading2"><div>问题</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E6%96%B9%E6%A1%88%E5%AE%9E%E8%B7%B5/#vue3-刷新页面不触发-router-beforeeach-回调" class="anchor-link heading3"><div>Vue3 刷新页面不触发  router.beforeEach 回调</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E6%96%B9%E6%A1%88%E5%AE%9E%E8%B7%B5/#参考资料" class="anchor-link heading2"><div>参考资料</div></a></li></ul></div></aside></div> <!----> <div class="content__content-top"></div> <div class="theme-default-content content__default"><h1 id="权限管理"><a href="#权限管理" class="header-anchor">#</a> 权限管理</h1> <h2 id="rbac权限模型"><a href="#rbac权限模型" class="header-anchor">#</a> RBAC权限模型</h2> <p><strong>Role-Based Access Control</strong>，核心在于用户只和角色关联，而角色代表对了权限，是一系列权限的集合。</p> <p><strong>RDAC 思想</strong>：</p> <p>对系统操作的各种权限不是直接授予具体的用户，而是在用户集合与权限集合之间建立一个角色集合。每一种角色对应一组相应的权限。一旦用户被分配了适当的角色后，该用户就拥有此角色的所有操作权限。</p> <p><strong>RBAC 要素：</strong></p> <ol><li><strong>角色（Role）</strong>：角色是一组具有相似职责或权限的用户集合。角色可以代表特定的职能、职位或用户组。例如，管理员、编辑员、普通用户等都可以作为角色。</li> <li><strong>权限（Permission）</strong>：权限是指用户或角色在系统中执行特定操作或访问特定资源的权利。权限可以是系统功能、数据操作、页面访问等。例如，创建、读取、更新、删除数据的权限或特定页面的访问权限。</li> <li><strong>用户（User）</strong>：用户是系统中的实际操作者，可以被分配一个或多个角色。用户通过角色来获得相应的权限，从而执行特定的操作或访问受限资源。</li> <li><strong>权限分配（Assignment）</strong>：权限分配是指将角色分配给用户的过程。通过分配角色，用户可以继承该角色所拥有的权限。</li></ol> <p>​	在<strong>RBAC</strong>中，权限与角色相关联，用户通过成为适当角色的成员而得到这些角色的权限。</p> <p>​	角色是为了完成各种工作而创造，用户则依据它的责任和资格来被指派相应的角色，用户可以很容易地从一个角色被指派到另一个角色。</p> <p>​	角色可依新的需求和系统的合并而赋予新的权限，而权限也可根据需要而从某角色中回收。角色与角色的关系同样也存在继承关系防止越权。</p> <p><strong>优点</strong>：便于角色划分，更灵活的授权管理；最小颗粒度授权；</p> <p><img src="data:image/png;base64,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" alt="图片"></p> <p><strong>RBAC模型分类：</strong></p> <p><strong>RBAC0</strong>、<strong>RBAC1</strong>、<strong>RBAC2</strong>、<strong>RBAC3</strong> 四个阶段，一般公司使用<strong>RBAC0</strong>的模型就可以。另外，<strong>RBAC0</strong>相当于底层逻辑，后三者都是在<strong>RBAC0</strong>模型上的拔高。</p> <p><img src="/myblog/assets/img/RDBAC分类.eb0e0780.png" alt="image-20240220104704611"></p> <h3 id="rbac0"><a href="#rbac0" class="header-anchor">#</a> <strong>RBAC0</strong></h3> <ul><li><p>用户和角色、角色和权限多对多关系。</p></li> <li><p>简单来说就是一个用户拥有多个角色，一个角色可以被多个用户拥有，这是用户和角色的多对多关系；同样的，角色和权限也是如此。</p></li></ul> <p><strong>RBAC0</strong>模型如下图：</p> <p><img src="/myblog/assets/img/RBAC0模型.5c773c07.png" alt="图片"></p> <h3 id="rbac1"><a href="#rbac1" class="header-anchor">#</a> <strong>RBAC1</strong></h3> <ul><li>相对于<strong>RBAC0</strong>模型，增加了<strong>角色分级</strong>的逻辑，类似于树形结构，下一节点继承上一节点的所有权限，如<strong>role1</strong>根节点下有<strong>role1.1</strong>和<strong>role1.2</strong>两个子节点</li></ul> <p><img src="data:image/png;base64,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" alt="图片"></p> <ul><li>角色分级的逻辑可以有效的规范角色创建（主要得益于权限继承逻辑），BD工具之间就有分级（经理、主管、专员），如果采用RBAC0模型做权限系统，可能需要为经理、主管、专员分别创建一个角色（角色之间权限无继承性），极有可能出现一个问题，由于权限配置错误，主管拥有经理都没有权限。而RBAC1模型就很好解决了这个问题，创建完经理角色并配置好权限后，主管角色的权限继承经理角色的权限，并且支持针对性删减主管权限。</li></ul> <h3 id="rbac2"><a href="#rbac2" class="header-anchor">#</a> <strong>RBAC2</strong></h3> <ul><li>基于<strong>RBAC0</strong>模型，对角色增加了更多约束条件。</li></ul> <p><img src="data:image/png;base64,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" alt="图片"></p> <ul><li><p>如<strong>角色互斥</strong>，比较经典的案例是财务系统中出纳不得兼管稽核，那么在赋予财务系统操作人员角色时，同一个操作员不能同时拥有出纳和稽核两个角色。</p></li> <li><p>如<strong>角色数量限制</strong>，例如：一个角色专门为公司CEO创建的，最后发现公司有10个人拥有CEO角色，一个公司有10个CEO？这就是对角色数量的限制，它指的是有多少用户能拥有这个角色。</p></li> <li><p><strong>RBAC2</strong> 模型主要是为了增加角色赋予的限制条件，这也符合权限系统的目标：权责明确，系统使用安全、保密。</p></li></ul> <h3 id="rbac3"><a href="#rbac3" class="header-anchor">#</a> <strong>RBAC3</strong></h3> <ul><li>RBAC3 是 RBAC1 与 RBAC2 的合集，所以 RBAC3 包含继承和约束</li></ul> <p><img src="/myblog/assets/img/RDAC3.959a1f4b.png" alt="image-20220805163715041"></p> <h2 id="权限管理系统"><a href="#权限管理系统" class="header-anchor">#</a> 权限管理系统</h2> <p>权限系统基于 RBAC3（Role-Based Access Control）的思想设计，角色和权限绑定、角色和用户之间的耦合、 多对多的关系来实现授权和授权的快速变更，从而控制用户对系统的功能使用和数据访问权限。</p> <p>RBAC3 优点：便于权限分配，更灵活的授权管理，最小颗粒度授权</p> <p><img src="/myblog/assets/img/RDBAC图.69d8c16e.png" alt="image-20240220104906445"></p> <h3 id="权限系统架构图"><a href="#权限系统架构图" class="header-anchor">#</a> 权限系统架构图</h3> <p><img src="/myblog/assets/img/权限系统架构图.394f4dfe.png" alt="image-20231129163708408"></p> <h3 id="主要功能"><a href="#主要功能" class="header-anchor">#</a> <strong>主要功能</strong></h3> <ul><li>1、权限主数据管理
<ul><li>（1）系统标识：区分使用权限各个系统的标识</li> <li>（2）数据权限：功能/菜单定义、操作功能定义，特殊组定义</li></ul></li> <li>2、授权管理
<ul><li>（1）授权 -&gt; 个人：支持授权到个人</li> <li>（2）授权 -&gt; 角色：支持授权到角色</li> <li>（3）授权 -&gt; 部门：支持授权到部门</li> <li>（4）授权 -&gt; 职位：支持授权到职位</li></ul></li> <li>3、权限分配
<ul><li>（1）权限资源（用户、角色、部门、职位）并集</li></ul></li></ul> <h3 id="权限模型维度"><a href="#权限模型维度" class="header-anchor">#</a> <strong>权限模型维度</strong></h3> <p>结合研发需求业务及未来发展，权限模型维度共3种:</p> <ol><li>用户：系统的访问者，用户关联的组织机构/用户组。</li> <li>角色：相关角色的集合。用户可以被分配到一个或多个角色。</li> <li>权限：可操作或访问的资源。权限与角色/用户关联，通过分配获得相应的权限。</li></ol> <p><img src="/myblog/assets/img/RDBAC维度.3eff6fda.png" alt="image-20240220105025081"></p> <h3 id="权限矩阵关系"><a href="#权限矩阵关系" class="header-anchor">#</a> <strong>权限矩阵关系</strong></h3> <p>权限矩阵显示用户、角色集合和权限之间的1对1、多对多关系：</p> <ol><li>合并权限： 用户被赋予所有角色集合的权限。即用户将拥有所属的每个角色集合的权限。</li> <li>资源权限：基于资源的权限控制，动态计算一个或一组规则，是否满足某种条件来进行授权判断</li> <li>最小化权限： 用户只被赋予所属的所有角色共同的权限。确保用户只能执行他所有角色共同具有的权限，而不是所有角色的权限总和。</li></ol> <p><img src="/myblog/assets/img/权限矩阵关系.b4f50676.png" alt="image-20240220105129384"></p> <h2 id="权限管理后台"><a href="#权限管理后台" class="header-anchor">#</a> 权限管理后台</h2> <ul><li><p>操作界面：用户权限分配页面</p> <p><code>在用户管理 -&gt; 用户管理界面</code>中 有用户信息，通过点击操作中的权限分配，即可查看所有用户页面和按钮权限</p></li></ul> <p><img src="/myblog/assets/img/权限管理后台.62ad77d7.png" alt="image-20231129163938774"></p> <p><img src="/myblog/assets/img/权限管理后台2.a6af211f.png" alt="image-20231129171747198"></p> <h2 id="权限管理模块图"><a href="#权限管理模块图" class="header-anchor">#</a> 权限管理模块图</h2> <p><img src="/myblog/assets/img/权限系统模块.a7cf6922.png" alt="image-20220805173050194"></p> <h2 id="用户权限继承关系"><a href="#用户权限继承关系" class="header-anchor">#</a> 用户权限继承关系</h2> <ul><li><p>用户权限是通过求权限资源（用户、角色、部门、职位）并集</p> <p><img src="data:image/png;base64,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" alt="image-20220805173531810"></p></li> <li><p><img src="/myblog/assets/img/系统权限.06f59cad.png" alt="系统权限"></p></li></ul> <h2 id="权限控制"><a href="#权限控制" class="header-anchor">#</a> 权限控制</h2> <p>权限控制为两种：</p> <ul><li><p><strong>与项目信息相关的权限</strong>（通过项目相关接口字段控制权限）；</p></li> <li><p>与 个人用户/角色 相关的权限（通过后台权限管理系统配置权限）；</p></li></ul> <p>此处权限管理系统主要用于 ”与个人/部门/职位 相关的权限“ 管理；</p> <p><strong>即当前权限管理系统，只能控制到页面(路由) 权限和按钮显示级别权限，对于跟用户信息挂钩的数据，无法使用该权限系统控制</strong>；对于跟用户信息挂钩的数据，需要服务端返回单独字段控制</p> <h3 id="项目信息相关权限配置"><a href="#项目信息相关权限配置" class="header-anchor">#</a> 项目信息相关权限配置</h3> <h4 id="概念"><a href="#概念" class="header-anchor">#</a> <strong>概念</strong></h4> <p>与项目相关的权限是指：在项目流程管理中，存在与具体数据的状态，用户 相关联系的操作权限。</p> <p>比如：某项目中，用户操作按钮与数据状态和数据当前用户角色相关联：</p> <ul><li>数据状态：数据存在 未开始、待分配、进行中、待审核、已完成状态；</li> <li>数据角色： 数据中又存在 创建人、项目 leader、项目成员、审核人等多种角色；</li> <li>数据操作： 新增、查看、编辑、分配、审核、领取、关闭等操作；</li></ul> <p>状态、角色和操作存在以下关系：</p> <table><thead><tr><th>状态</th> <th>角色和权限</th> <th>操作</th></tr></thead> <tbody><tr><td>未开始</td> <td>所有用户 （ 新增）</td> <td>新增</td></tr> <tr><td>待分配</td> <td>项目 leader（编辑、分配）、项目成员（领取）</td> <td>编辑、分配、领取</td></tr> <tr><td>进行中</td> <td>项目 leader（编辑、关闭）、项目成员（编辑）</td> <td>编辑、关闭</td></tr> <tr><td>待审核</td> <td>项目 leader（审核）</td> <td>审核</td></tr> <tr><td>已完成</td> <td>所有用户 （ 查看）</td> <td>查看</td></tr></tbody></table> <p>根据以上关系表可知：</p> <ul><li><strong>操作按钮显示 =  数据状态 + 当前用户角色</strong> 组合；</li> <li>列表每一行数据操作按钮的显示跟当前行数据状态和当前用户角色关联；</li></ul> <p>因此对于以上跟数据相关联的权限控制模块，一般通过服务端返回行数据字段状态和行数据用户id 和当前用户 id 进行判断</p> <h4 id="实现方案"><a href="#实现方案" class="header-anchor">#</a> <strong>实现方案</strong></h4> <ol><li>通过维护每行数据的状态和操作按钮 map 表 statusButtonsMap ，并维护一个用户角色和操作按钮 map 表 userButtonsMap;</li> <li>通过服务端返回的行数据的 status  和 statusButtonsMap  获取行数据状态操作 statusOpetors；</li> <li>通过服务端返回的行数据的 用户角色id（如：leaderId,creatorId） 获取行数据用户操作 userOpetors；</li> <li>求行数据状态操作statusOpetors 和 userOpetors 交集，即为当前行操作；</li></ol> <h3 id="页面-组件权限开发流程"><a href="#页面-组件权限开发流程" class="header-anchor">#</a> 页面/组件权限开发流程</h3> <p>权限管理系统主要控制粒度分为：</p> <ul><li><p>页面级权限控制（<strong>页面权限中通过后台配置中的标识返回字符串和前端路由中 name 字段进行匹配</strong>）</p></li> <li><p>组件级权限控制（组件级权限分为与项目信息相关的权限 和 与个人/部门/职位 相关的权限，此处讲解 ”与个人/部门/职位 相关的权限“ 开发 ）</p></li></ul> <p><img src="/myblog/assets/img/权限开发流程.510e6d2f.png" alt=""></p> <ol><li>配置 限管理后台
<ul><li><img src="/myblog/assets/img/权限管理-配置后台.a5b7b687.png" alt="image-20231129164035727"></li> <li><strong>注意:</strong> <ul><li><strong>前端路由字段：字符串必须为唯一字符串，该字段字符串内容用于标识组件权限；</strong></li> <li><strong>标识字段作用：页面权限中通过后台配置中的标识返回字符串和前端路由中 name 字段进行匹配；</strong></li> <li>新增的页面和权限的树形结构，必须与前端路由(侧边栏)树形结构一致，否则将导致无法匹配页面路由！（下文讲解原理）；</li> <li>页面权限类型选择“菜单”，组件权限类型选择“权限”；</li></ul></li></ul></li> <li>前端项目添加权限标识
<ul><li>添加组件权限
<ul><li>在 <code>src/permission/modules</code> 目录中找到权限所属模块/新增权限模块，添加前端权限记录（key为权限标识,value为 后台管理系统中配置的前端路由字符串）<img src="/myblog/assets/img/权限管理-前端配置.fc92d960.png" alt="image-20220816153347640"></li> <li>在页面组件中,调用权限 API:
<ul><li>视图 template 中使用 <code>this.$hasPermissions({ module: '权限模块文件名', auth: '权限标识key值'})&quot;</code><img src="/myblog/assets/img/权限管理-组件权限使用.c7bf3d79.png" alt="image-20220816161213044"></li> <li>逻辑组件中使用 <code>this.$hasPermissions({ module: '权限模块文件名', auth: '权限标识key值' })</code><img src="/myblog/assets/img/权限管理-逻辑权限使用.f6702ae1.png" alt="image-20220816161459795"></li></ul></li></ul></li> <li>添加页面权限：
<ul><li><strong>页面权限中通过后台配置中的标识返回字符串和前端路由中 name 字段进行匹配</strong>（下文讲解原理）<img src="/myblog/assets/img/权限管理-页面权限管理.890483f8.png" alt="image-20220816163353484"></li></ul></li></ul></li></ol> <h2 id="权限系统实现原理-前端"><a href="#权限系统实现原理-前端" class="header-anchor">#</a> 权限系统实现原理(前端)</h2> <p>前端权限系统模块主要分为：</p> <ul><li><p>页面权限模块实现</p></li> <li><p>组件权限模块实现</p></li></ul> <h3 id="页面权限模块实现"><a href="#页面权限模块实现" class="header-anchor">#</a> 页面权限模块实现</h3> <h4 id="思路"><a href="#思路" class="header-anchor">#</a> 思路</h4> <ol><li>在后台权限管理系统 根据侧边栏目录配置侧边栏和菜单、前端项目代码配置路由；</li> <li>后端接口返回侧边栏树形结构数据；</li> <li>递归匹配后端路由和前端路由配置，生成异步路由表；</li> <li>生成路由表：整合异步路由表和常规路由表；</li> <li>根据生成路由表生成侧边栏菜单；</li></ol> <p><strong>第一步：后台配置权限</strong></p> <p><img src="/myblog/assets/img/权限管理-配置后台.a5b7b687.png" alt="image-20231129164035727"></p> <blockquote><p>操作如下：</p> <ol><li>后台进入权限管理系统用户管理 -&gt; 权限规则 -&gt; 选择对应系统</li> <li>点击新增，增加路由，选择路由所属节点</li></ol> <p>注意：</p> <ul><li>权限管理系统中路由新增的最好以系统侧边栏目录对应，便于管理！</li> <li>标识字段即为前端 Vue 项目中 路由配置表中 路由名称（由于路由名称是唯一的，因此可以通过路由名称标识唯一路由）</li></ul></blockquote> <p><strong>第二步：后端接口返回侧边栏树形结构数据</strong></p> <p>服务端返回接口格式：返回数组，数组内容与前端路由表相同！！</p> <p><img src="/myblog/assets/img/权限控制-菜单路由接口1.5f4f5f7c.png" alt="image-20231129164251696"></p> <p><strong>第三步：前端递归获取路由表，生成异步路由</strong></p> <p><strong>总体思路</strong></p> <ol><li>前端请求获取用户权限列表 <code>leftMenu</code> 对象；</li> <li>对比用户权限列表 <code>leftMenu</code> 对象与 前端路由表配置，生成异步路由；</li></ol> <p><strong>异步路由控制</strong></p> <p><strong>使用<code>router.beforeEach</code> API 对全局路由进行访问控制</strong></p> <ul><li><p>根据服务端返回路由数据，生成异步路由：</p> <ul><li><p>获取本地路由配置</p></li> <li><p>递归后端返回的路由数据，修改本都路由配置</p></li> <li><p>过滤常量路由：过滤没有权限的异步路由;</p></li> <li><p>过滤异步路由：过滤没有权限的异步路由;</p></li> <li><p>重置本地路由</p></li></ul></li></ul> <p>代码实现：</p> <ul><li><p>获取本地路由配置：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> hasAccessRoutes <span class="token operator">=</span> store<span class="token punctuation">.</span>getters<span class="token punctuation">.</span>permission_addRoutes <span class="token operator">&amp;&amp;</span> store<span class="token punctuation">.</span>getters<span class="token punctuation">.</span>permission_addRoutes<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>生成异步路由 vuex actions 实现：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token comment">// 生成异步路由</span>
  <span class="token function">generateRoutes</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commit <span class="token punctuation">}</span><span class="token punctuation">,</span> routes</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// 过滤常量路由：过滤没有权限的异步路由</span>
      <span class="token function">filterConstantRoutes</span><span class="token punctuation">(</span>constantRoutes<span class="token punctuation">,</span> routes<span class="token punctuation">.</span>leftMenuNames<span class="token punctuation">)</span>
      <span class="token comment">// 过滤异步路由：过滤没有权限的异步路由</span>
      <span class="token function">filterAsyncRoutes</span><span class="token punctuation">(</span>asyncRoutes<span class="token punctuation">,</span> routes<span class="token punctuation">.</span>leftMenuNames<span class="token punctuation">)</span>
      asyncRoutes<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value1<span class="token punctuation">,</span> value2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> value1<span class="token punctuation">.</span>order <span class="token operator">-</span> value2<span class="token punctuation">.</span>order<span class="token punctuation">)</span>
      <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'SET_ROUTES'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">asyncFilterRoutes</span><span class="token operator">:</span> asyncRoutes<span class="token punctuation">,</span>
        <span class="token literal-property property">constantAsyncRoutes</span><span class="token operator">:</span> constantRoutes
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span>asyncRoutes<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></li> <li><p>过滤常量路由：递归前端路由，<strong>查找 name</strong> 不存在的路由，删除</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * Filter asynchronous routing tables by recursion
 * 过滤没有权限的常量路由路由：递归前端路由，查找 name 不存在的路由，删除
 * @param routes asyncRoutes
 * @param roles
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">filterConstantRoutes</span><span class="token punctuation">(</span><span class="token parameter">constantRoute<span class="token punctuation">,</span> routes</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 开发环境侧边栏路由不由 srdpm 后端管理系统控制</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'development'</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
  <span class="token comment">// 测试和生产环境下，对常量路由进行过滤</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> constantRoute<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> route <span class="token operator">=</span> constantRoute<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>route<span class="token punctuation">.</span>children<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">filterConstantRoutes</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>children<span class="token punctuation">,</span> routes<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>route<span class="token punctuation">.</span>asyncRoute<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>routes<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">// 注意：递归时使用路由 name 字段进行判断，因此服务端配置路由name必须与本地路由 name 匹配，否则无法查找到对应的路由</span>
        constantRoute<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
        i<span class="token operator">--</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div></li> <li><p>过滤异步路由：递归前端路由，查找 name 不存在的路由，删除</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * Filter asynchronous routing tables by recursion
 * 过滤没有权限的异步路由：递归前端路由，查找 name 不存在的路由，删除
 * @param routes asyncRoutes
 * @param roles
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">filterAsyncRoutes</span><span class="token punctuation">(</span><span class="token parameter">asyncRoutes<span class="token punctuation">,</span> routes</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 开发环境侧边栏路由不由 srdpm 后端管理系统控制</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'development'</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
  <span class="token comment">// 测试和生产环境下，对异步路由进行过滤</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> asyncRoutes<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> route <span class="token operator">=</span> asyncRoutes<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>route<span class="token punctuation">.</span>children<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">filterAsyncRoutes</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>children<span class="token punctuation">,</span> routes<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>routes<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      asyncRoutes<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
      i<span class="token operator">--</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div></li> <li><p>重置本地路由， vuex actions 实现：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token comment">/**
   * 设置二级菜单显示的路由
   * @param {} param0
   * @param {*} routes 当前路由对象，包含路由名称 name 或则路由路径
   * @returns
   */</span>
  <span class="token function">SetShowRouters</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commit<span class="token punctuation">,</span> state <span class="token punctuation">}</span><span class="token punctuation">,</span> routes</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> matched <span class="token punctuation">}</span> <span class="token operator">=</span> routes
    <span class="token keyword">let</span> topRouteName <span class="token operator">=</span> name <span class="token comment">// 二级路由顶部菜单栏名称</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>matched <span class="token operator">&amp;&amp;</span> matched<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 根据路由匹配路径获取二级顶部菜单栏名称</span>
      topRouteName <span class="token operator">=</span> matched<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> filterRouter <span class="token operator">=</span> state<span class="token punctuation">.</span>routes<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>name <span class="token operator">!==</span> topRouteName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          item<span class="token punctuation">.</span>hidden <span class="token operator">=</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          item<span class="token punctuation">.</span>hidden <span class="token operator">=</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> item
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'SET_ROUTE'</span><span class="token punctuation">,</span> filterRouter<span class="token punctuation">)</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span>routes<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div></li></ul> <p><strong>第四步：生成路由表</strong></p> <p>将生成的异步路由表加入路由表中</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>   <span class="token comment">// 根据用户权限列表，生成异步路由</span>
        <span class="token keyword">const</span> accessRoutes <span class="token operator">=</span> <span class="token keyword">await</span> store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'permission/generateRoutes'</span><span class="token punctuation">,</span> store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>authority<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>accessRoutes<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// dynamically add accessible routes</span>
          router<span class="token punctuation">.</span>options<span class="token punctuation">.</span>routes <span class="token operator">=</span> store<span class="token punctuation">.</span>getters<span class="token punctuation">.</span>permission_routes
          router<span class="token punctuation">.</span><span class="token function">addRoutes</span><span class="token punctuation">(</span>accessRoutes<span class="token punctuation">)</span>
          <span class="token comment">// set the replace: true, so the navigation will not leave a history record</span>
          <span class="token keyword">await</span> store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'permission/SetShowRouters'</span><span class="token punctuation">,</span> to<span class="token punctuation">)</span>

          <span class="token function">nextRouter</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">...</span>to<span class="token punctuation">,</span> <span class="token literal-property property">replace</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>第五步：根据生成路由表生成侧边栏菜单</strong></p> <p>在此处的后台管理系统中，使用两层菜单栏：</p> <ul><li>顶部菜单栏为一级菜单栏；</li> <li>侧边菜单栏为二级菜单栏；</li></ul> <p><img src="/myblog/assets/img/权限管理系统-侧边栏设计.e19518bf.png" alt="image-20231211103532385"></p> <p><strong>路由表渲染思路</strong></p> <p>在获取异步路由合并同步路由，获取到所有路由表后，通过将路由进行拆分，将路由表一级结构设置为顶部菜单栏，在点击顶部菜单栏后，获取对应路由的子路由表作为二级菜单栏；</p> <p>顶部菜单栏监听路由表的变化，当路由表变化时，获取对应路由的子路由表作为二级菜单栏：</p> <blockquote><p>在导航栏组件中，监听路由表数据的变化</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token literal-property property">watch</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">permission_routes</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">handler</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> showRoute <span class="token operator">=</span> val<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">route</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span>route<span class="token punctuation">.</span>hidden<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>showRoute<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">,</span> <span class="token string">'showRouters'</span><span class="token punctuation">,</span> showRoute<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>children<span class="token punctuation">)</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'app/setHorizonNavActive'</span><span class="token punctuation">,</span> showRoute<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>order<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAllMenu</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>opendMenu<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>showRouters<span class="token punctuation">)</span> <span class="token comment">// 解决二级菜单不展开 bug</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>sideBarMenu<span class="token punctuation">.</span><span class="token function">$forceUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">immediate</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>在导航栏组件中模板遍历<code>permission_routes</code> 变量，生成导航栏：</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-scrollbar</span> <span class="token attr-name">wrap-class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scrollbar-wrapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-menu</span>
        <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sideBarMenu<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:default-active</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>activeMenu<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:default-openeds</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>opendMenu<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:collapse</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isCollapse<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:background-color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>variables.menuBg<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:text-color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>variables.menuText<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:unique-opened</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:active-text-color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>variables.menuActiveText<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:collapse-transition</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>vertical<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sidebar-item</span>
          <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(route,index) in showRouters<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>route.path<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">:item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>route<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">:base-path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>route.path<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">:index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span>
        <span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-menu</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-scrollbar</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>路由数据变化后，设置侧边栏路由：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token comment">/**
   * 设置二级菜单显示的路由
   * @param {} param0
   * @param {*} routes 当前路由对象，包含路由名称 name 或则路由路径
   * @returns
   */</span>
  <span class="token function">SetShowRouters</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commit<span class="token punctuation">,</span> state <span class="token punctuation">}</span><span class="token punctuation">,</span> routes</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> matched <span class="token punctuation">}</span> <span class="token operator">=</span> routes
    <span class="token keyword">let</span> topRouteName <span class="token operator">=</span> name <span class="token comment">// 二级路由顶部菜单栏名称</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>matched <span class="token operator">&amp;&amp;</span> matched<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 根据路由匹配路径获取二级顶部菜单栏名称</span>
      topRouteName <span class="token operator">=</span> matched<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> filterRouter <span class="token operator">=</span> state<span class="token punctuation">.</span>routes<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>name <span class="token operator">!==</span> topRouteName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          item<span class="token punctuation">.</span>hidden <span class="token operator">=</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          item<span class="token punctuation">.</span>hidden <span class="token operator">=</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> item
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'SET_ROUTE'</span><span class="token punctuation">,</span> filterRouter<span class="token punctuation">)</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span>routes<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h4 id="结合登录和-token-验证实现页面路由控制"><a href="#结合登录和-token-验证实现页面路由控制" class="header-anchor">#</a> 结合登录和 token 验证实现页面路由控制</h4> <ul><li><p>根据用户权限获取异步路由，生成异步路由后，通过路由守卫控制用户访问页面权限</p></li> <li><p>控制文件：<code>src/permission/controller.js</code></p></li> <li><p>实现思路：<img src="/myblog/assets/img/路由权限控制.0d633cbd.png" alt=""></p></li> <li><p><code>controller.js</code> 使用全局路由守卫**<code>router.beforeEach</code> API 对全局路由进行访问控制**，并进行用户登录进行控制：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * 权限控制器文件：
 * 通过 vue 路由控制页面访问权限
 */</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'../router'</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'../store'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> OnlyMessageBox <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/plugins/modules/onlyMsgbox.js'</span>
<span class="token keyword">import</span> NProgress <span class="token keyword">from</span> <span class="token string">'nprogress'</span> <span class="token comment">// progress bar</span>
<span class="token keyword">import</span> <span class="token string">'nprogress/nprogress.css'</span> <span class="token comment">// progress bar style</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getToken<span class="token punctuation">,</span> getOAToken<span class="token punctuation">,</span> getOALoginToken <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/utils/auth'</span> <span class="token comment">// get token from cookie</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getPageTitle <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/utils/get'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> isMobile <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/utils/index.js'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> mobileRoutePrefix <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/router/routeConfig.js'</span>
NProgress<span class="token punctuation">.</span><span class="token function">configure</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">showSpinner</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// NProgress Configuration</span>

<span class="token keyword">const</span> whiteList <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token string">'/login'</span><span class="token punctuation">,</span>
  <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>mobileRoutePrefix<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/login</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  <span class="token string">'/redirect'</span><span class="token punctuation">,</span>
  <span class="token string">'/single-pages/personal-bill'</span><span class="token punctuation">,</span>
  <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>mobileRoutePrefix<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/single-pages/personal-bill</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">]</span> <span class="token comment">// no redirect whitelist</span>

router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token keyword">async</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// start progress bar</span>
  NProgress<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token comment">// set page title</span>
  document<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token function">getPageTitle</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">key</span><span class="token operator">:</span> to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>title<span class="token punctuation">,</span> <span class="token literal-property property">query</span><span class="token operator">:</span> to<span class="token punctuation">.</span>query <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// determine whether the user has logged in</span>
  <span class="token keyword">const</span> hasToken <span class="token operator">=</span> <span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>hasToken<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 已经登录系统，存在token，进入权限判断</span>
    <span class="token keyword">await</span> <span class="token function">routerPermission</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// 未登录情况下，判断是否存在 oa token，存在 oa token，则直接使用 oa token 刷新token后登录</span>
    <span class="token comment">/* has no token*/</span>
    <span class="token comment">// 获取 oa 中的 token</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> oaToken <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">getOAToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>oaToken<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// oa 存在 token，用户已经登录 oa</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token comment">// 使用 oa token 登录系统</span>
        <span class="token keyword">await</span> store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'user/CheckOaLogin'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'user/logout'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 进入页面权限判断</span>

      <span class="token keyword">await</span> <span class="token function">routerPermission</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>whiteList<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 白名单路由，直接进入</span>
      <span class="token comment">// in the free login whitelist, go directly</span>
      <span class="token function">nextRouter</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// 返回登录页面</span>
      <span class="token comment">// other pages that do not have permission to access are redirected to the login page.</span>
      <span class="token function">nextRouter</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token function">getLoginRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">redirect</span><span class="token operator">:</span> to<span class="token punctuation">.</span>path
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * 路由权限判断函数,根据路由权限进入不同路由
 */</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">routerPermission</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>path <span class="token operator">===</span> <span class="token string">'/login'</span> <span class="token operator">||</span> to<span class="token punctuation">.</span>path <span class="token operator">===</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>mobileRoutePrefix<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/login</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// if is logged in, redirect to the home page</span>

    <span class="token function">nextRouter</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// determine whether the user has obtained his permission roles through getInfo</span>
    <span class="token comment">// 已经加载异步路由直接进入页面（在用户退出系统后必须清除 store 中数据）</span>
    <span class="token keyword">const</span> hasAccessRoutes <span class="token operator">=</span> store<span class="token punctuation">.</span>getters<span class="token punctuation">.</span>permission_addRoutes <span class="token operator">&amp;&amp;</span> store<span class="token punctuation">.</span>getters<span class="token punctuation">.</span>permission_addRoutes<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>hasAccessRoutes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">await</span> store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'permission/SetShowRouters'</span><span class="token punctuation">,</span> to<span class="token punctuation">)</span>

      <span class="token function">nextRouter</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token comment">// get user info</span>
        <span class="token comment">// 获取用户信息(包括权限列表)</span>
        <span class="token keyword">await</span> store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'user/getInfo'</span><span class="token punctuation">)</span>

        <span class="token comment">// generate accessible routes map based on roles</span>
        <span class="token comment">// 根据用户权限列表，生成异步路由</span>
        <span class="token keyword">const</span> accessRoutes <span class="token operator">=</span> <span class="token keyword">await</span> store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'permission/generateRoutes'</span><span class="token punctuation">,</span> store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>authority<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>accessRoutes<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// dynamically add accessible routes</span>
          router<span class="token punctuation">.</span>options<span class="token punctuation">.</span>routes <span class="token operator">=</span> store<span class="token punctuation">.</span>getters<span class="token punctuation">.</span>permission_routes
          router<span class="token punctuation">.</span><span class="token function">addRoutes</span><span class="token punctuation">(</span>accessRoutes<span class="token punctuation">)</span>
          <span class="token comment">// set the replace: true, so the navigation will not leave a history record</span>
          <span class="token keyword">await</span> store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'permission/SetShowRouters'</span><span class="token punctuation">,</span> to<span class="token punctuation">)</span>

          <span class="token function">nextRouter</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">...</span>to<span class="token punctuation">,</span> <span class="token literal-property property">replace</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token function">nextRouter</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// remove token and go to login page to re-login</span>
        <span class="token keyword">await</span> store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'user/logout'</span><span class="token punctuation">)</span>
        OnlyMessageBox<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error <span class="token operator">||</span> <span class="token string">'Has Error'</span><span class="token punctuation">)</span>
        <span class="token function">nextRouter</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next<span class="token punctuation">,</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token function">getLoginRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">redirect</span><span class="token operator">:</span> to<span class="token punctuation">.</span>path
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 获取新 oa token:LtpaToken, 通过创建 iframe,重定向获取 oa 登录 token</span>
      <span class="token function">getOALoginToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

router<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// finish progress bar</span>
  NProgress<span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * 路由 next 移动端封装
 * @param {*} to
 * @param {*} from
 * @param {*} next
 * @param {*} params
 */</span>
<span class="token keyword">function</span> <span class="token function">nextRouter</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next<span class="token punctuation">,</span> params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> toPath <span class="token operator">=</span> params<span class="token operator">?.</span>path <span class="token operator">||</span> to<span class="token punctuation">.</span>path
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isMobile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 移动端设备</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>toPath<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>mobileRoutePrefix<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果包含 mobile 前缀,则为访问移动端页面，直接进入</span>
      <span class="token keyword">return</span> params <span class="token operator">?</span> <span class="token function">next</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// 不包含 mobile 前缀,添加 mobile 前缀</span>
      <span class="token keyword">const</span> newPath <span class="token operator">=</span> params<span class="token operator">?.</span>path <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>mobileRoutePrefix<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>params<span class="token punctuation">.</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>mobileRoutePrefix<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>to<span class="token punctuation">.</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token keyword">const</span> nextPamras <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>params<span class="token punctuation">,</span> <span class="token literal-property property">path</span><span class="token operator">:</span> newPath<span class="token punctuation">,</span> <span class="token literal-property property">fullPath</span><span class="token operator">:</span> newPath <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span>nextPamras<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// PC 设备</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>toPath<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>mobileRoutePrefix<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果不包含 mobile 前缀,则为访问PC，直接进入</span>
      <span class="token keyword">return</span> params <span class="token operator">?</span> <span class="token function">next</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// 去除 /mobile 路径前缀</span>
      <span class="token keyword">const</span> newPath <span class="token operator">=</span> toPath<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>mobileRoutePrefix<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>param
                   s<span class="token punctuation">,</span> <span class="token literal-property property">path</span><span class="token operator">:</span> newPath<span class="token punctuation">,</span> <span class="token literal-property property">fullPath</span><span class="token operator">:</span> newPath <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getLoginRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">isMobile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>mobileRoutePrefix<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/login</span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token string">'/login'</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br></div></div></li></ul> <p>以上代码包括登录和单点登录逻辑混合：</p> <blockquote><ul><li>登录逻辑：获取本地 token，如果有，直接进入页面，否则跳转入登录页面；</li></ul></blockquote> <blockquote><ul><li>单点登录逻辑：
<ul><li>获取本地 token:
<ul><li>如果本地 token 不存在，则获取本地 OA token（判断是否从 oa 中登录系统）;</li> <li>如果本地 OA token 存在，则请求拿本地 OA token 请求换取本系统 token</li> <li>如果本地 OA token 不存在，说明本系统和 OA 都未登录，直接退出系统。</li></ul></li></ul></li></ul></blockquote> <h3 id="按钮-组件权限控制实现"><a href="#按钮-组件权限控制实现" class="header-anchor">#</a> 按钮/组件权限控制实现</h3> <h4 id="思路-2"><a href="#思路-2" class="header-anchor">#</a> 思路</h4> <blockquote><ul><li>用户登录，登录成功后获取用户信息;</li> <li>用户信息中返回 <code>按钮/组件</code> 权限字段集合;</li> <li>前端本地存储  <code>按钮/组件</code> 权限字段集合;</li> <li>前端视图权限判断使用自定义指令 <code>v-permission</code> 判断是否显示 <code>按钮/组件</code> ；</li> <li>前端逻辑权限判断使用自定义方法  <code>this.hasPermission</code> 判断是否显示 <code>按钮/组件</code> ；</li></ul></blockquote> <h4 id="自定义权限指令"><a href="#自定义权限指令" class="header-anchor">#</a> 自定义权限指令</h4> <p><strong>实现思路：</strong></p> <ol><li>获取服务端返回的用户权限集合；</li> <li>获取本地权限标识配置列表；</li> <li>根据传入参数，获取判断的权限标识</li> <li>判断用户权限集合中，是否包含当前传入的权限标识；</li></ol> <ul><li><p>核心代码实现：<code>permission.js</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * 权限指令
 * 使用： v-permission=&quot;{module:'模块名称',auth:'权限key值'}&quot;
 */</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'@/store'</span>
<span class="token keyword">import</span> permissionList <span class="token keyword">from</span> <span class="token string">'@/permission'</span>

<span class="token comment">/**
 * 全局权限判断方法
 * @param {*} permission 权限对象，格式 {module:'模块名称',auth:'权限key值'}
 * @param {*} callback 权限回调函数，有权限则执行回调
 * @returns
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">hasPermissions</span><span class="token punctuation">(</span><span class="token parameter">permission<span class="token punctuation">,</span> callback <span class="token operator">=</span> <span class="token keyword">null</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 获取服务端权限</span>
  <span class="token keyword">const</span> permissions <span class="token operator">=</span> store<span class="token punctuation">.</span>getters <span class="token operator">&amp;&amp;</span> store<span class="token punctuation">.</span>getters<span class="token punctuation">.</span>permissions
  <span class="token keyword">if</span> <span class="token punctuation">(</span>permission<span class="token punctuation">.</span>module <span class="token operator">&amp;&amp;</span> permission<span class="token punctuation">.</span>auth<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 根据传入参数获取本地权限表示</span>
    <span class="token keyword">const</span> value <span class="token operator">=</span> permissionList<span class="token punctuation">[</span>permission<span class="token punctuation">.</span>module<span class="token punctuation">]</span><span class="token punctuation">[</span>permission<span class="token punctuation">.</span>auth<span class="token punctuation">]</span>
    <span class="token keyword">const</span> haspermiss <span class="token operator">=</span> permissions<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
    haspermiss <span class="token operator">&amp;&amp;</span> callback <span class="token operator">&amp;&amp;</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> haspermiss
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">checkPermission</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">hasPermissions</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'none'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">inserted</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">checkPermission</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> binding<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">checkPermission</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> binding<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div></li> <li><p>vue2 权限指令注册：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> permission <span class="token keyword">from</span> <span class="token string">'./permission'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> hasPermissions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./permission'</span>

<span class="token keyword">const</span> <span class="token function-variable function">install</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">Vue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$hasPermissions <span class="token operator">=</span> hasPermissions
  Vue<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'permission'</span><span class="token punctuation">,</span> permission<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>Vue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  window<span class="token punctuation">[</span><span class="token string">'permission'</span><span class="token punctuation">]</span> <span class="token operator">=</span> permission
  Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>install<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// eslint-disable-line</span>
<span class="token punctuation">}</span>

permission<span class="token punctuation">.</span>install <span class="token operator">=</span> install
<span class="token keyword">export</span> <span class="token keyword">default</span> permission

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></li> <li><p>视图中使用 权限指令：使用 <code>v-permission</code></p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span>
        <span class="token attr-name">v-permission</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{module:moduleName,auth:权限key }<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mini<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>deleteRow<span class="token punctuation">&quot;</span></span>
     <span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><ul><li><code>v-permission</code> 参数说明：
<ul><li><code>module</code> 表示模块名称，即文件名称</li> <li><code>auth</code> 为权限标识的 key 值，表示哪个权限</li></ul></li></ul></blockquote></li> <li><p>权限标识实现：</p> <ul><li><p>使用对象标识权限标识，对象 key 为 <code>v-permission</code> 指令获取的 key, 对象 value 为权限 auth 标识，与后端返回的权限集合中标识对应；</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">del</span><span class="token operator">:</span> <span class="token string">'/project/del'</span><span class="token punctuation">,</span> <span class="token comment">// 删除权限</span>
  <span class="token literal-property property">add</span><span class="token operator">:</span> <span class="token string">'/project/add'</span><span class="token punctuation">,</span> <span class="token comment">//项目新增权限</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>module 为文件名称，按文件划分模块管理权限： <code>/modules</code> 下文件存储为各个模块权限标识对象</p> <p><img src="data:image/png;base64,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" alt="image-20231129183612675"></p></li></ul></li></ul> <h4 id="自定义权限判断方法"><a href="#自定义权限判断方法" class="header-anchor">#</a> 自定义权限判断方法</h4> <p><strong>实现思路</strong></p> <p>通过以上 <code>hasPermissions</code> 方法，在注册指令时候，将<code>hasPermissions</code> 挂载到 Vue 实例对象，可以在所有 Vue 组件中调用</p> <p>使用：参数与指令参数相同</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$hasPermissions</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">module</span><span class="token operator">:</span> 文件名<span class="token punctuation">,</span> <span class="token literal-property property">auth</span><span class="token operator">:</span> 权限key值 <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="前端路由权限实现方案总结"><a href="#前端路由权限实现方案总结" class="header-anchor">#</a> 前端路由权限实现方案总结</h2> <h3 id="定义"><a href="#定义" class="header-anchor">#</a> 定义</h3> <p>路由权限，在此处是指用户是否有权力访问某个页面路由的权限，必须是拥有路由路径的页面；</p> <p>在后台管理系统中，路由权限一般是指侧边栏路由的访问权限，指某个用户或角色是否具有某个路由的访问权限；</p> <p>在后台管理系统中，路由权限实现方案有：</p> <ul><li>静态路由（简单实现）：
<ul><li>实现效果：后台管理系统向展示所有路由，仅当用户点击页面时，没有权限的页面才拦截提示；</li></ul></li> <li>动态路由：
<ul><li>实现效果：根据后台配置的权限，动态显示用户拥有权限的路由；没有权限的页面不会显示到侧边栏中；</li></ul></li></ul> <h3 id="静态路由"><a href="#静态路由" class="header-anchor">#</a> 静态路由</h3> <h4 id="实现效果"><a href="#实现效果" class="header-anchor">#</a> 实现效果</h4> <p>后台管理系统向展示所有路由，仅当用户点击页面时，没有权限的页面才拦截提示；</p> <p><img src="/myblog/assets/img/权限管理-静态路由.f3b26f73.png" alt="image-20231214140358650"></p> <h4 id="实现思路"><a href="#实现思路" class="header-anchor">#</a> 实现思路</h4> <ol><li>请求接口获取用户路由列表；</li> <li>使用 <code>router.beforeEach</code> 全局路由拦截；</li> <li><code>router.beforeEach</code> 回调中拦截路由，判断当前访问路由是否在用户路由列表，不在则提示用户无权限，否则进入页面；</li></ol> <h3 id="动态路由"><a href="#动态路由" class="header-anchor">#</a> 动态路由</h3> <h4 id="实现效果-2"><a href="#实现效果-2" class="header-anchor">#</a> 实现效果</h4> <p>根据后台配置的权限，动态显示用户拥有权限的路由；没有权限的页面不会显示到侧边栏中；</p> <h4 id="实现思路-2"><a href="#实现思路-2" class="header-anchor">#</a> 实现思路</h4> <ol><li>使用 <code>router.beforeEach</code> 全局路由拦截；</li> <li>请求接口获取用户路由列表；</li> <li>根据路由列表，过滤前端路由表；</li> <li>侧边栏动态监听路由表变化，动态遍历生成侧边栏；</li></ol> <h2 id="问题"><a href="#问题" class="header-anchor">#</a> 问题</h2> <h3 id="vue3-刷新页面不触发-router-beforeeach-回调"><a href="#vue3-刷新页面不触发-router-beforeeach-回调" class="header-anchor">#</a> Vue3 刷新页面不触发  <code>router.beforeEach</code> 回调</h3> <h4 id="问题描述"><a href="#问题描述" class="header-anchor">#</a> <strong>问题描述</strong></h4> <p>在使用 Vue3 实现的后台管理系统中，发现在刷新页面时，不会触发  <code>router.beforeEach</code> 回调函数，导致刷新时无法请求用户权限列表和更新动态路由，因此在动态路由页面刷新时，导致页面空白；</p> <h4 id="原因分析"><a href="#原因分析" class="header-anchor">#</a> <strong>原因分析</strong></h4> <h4 id="解决方案"><a href="#解决方案" class="header-anchor">#</a> <strong>解决方案</strong></h4> <p><strong>方案一</strong></p> <p>监听页面刷新，刷新后调用  <code>router.beforeEach</code> 回调，解决刷新不触发  <code>router.beforeEach</code> 回调</p> <p>在 Vue3 项目中 <code>main.ts</code> 文件添加以下代码，用于监听页面刷新后状态，在刷新后重新获取用户权限和生成异步路由：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * 解决刷新不触发 router.beforeEach 回调bug
 * @returns 
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">reloadHacker</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//监听页面重载事件</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 判断执行类型，类型为重载即刷新和首次进入时候</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>performance<span class="token punctuation">.</span>navigation<span class="token punctuation">.</span>type <span class="token operator">===</span> window<span class="token punctuation">.</span>performance<span class="token punctuation">.</span>navigation<span class="token punctuation">.</span><span class="token constant">TYPE_RELOAD</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 用户进行了刷新动作</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">let</span> accessRoutes <span class="token operator">=</span> userStore<span class="token punctuation">.</span>getAuthority <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>accessRoutes<span class="token operator">?.</span>menuNames <span class="token operator">&amp;&amp;</span> accessRoutes<span class="token operator">?.</span>menuNames<span class="token operator">?.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    accessRoutes <span class="token operator">=</span> <span class="token keyword">await</span> userStore<span class="token punctuation">.</span><span class="token function">GetAuthority</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    routeStore<span class="token punctuation">.</span><span class="token function">GenerateRoutes</span><span class="token punctuation">(</span>accessRoutes<span class="token operator">?.</span>menuNames <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="参考资料"><a href="#参考资料" class="header-anchor">#</a> 参考资料</h2> <p><a href="http://t.zoukankan.com/shamo89-p-6684578.html" target="_blank" rel="noopener noreferrer">RBAC权限模型<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <!----> <div class="content__content-bottom"></div> <footer class="page-meta"><!----> <div class="meta-item update-time"><span class="label">Last update:</span> <span class="info">February 20, 2024 10:54</span></div> <div class="meta-item contributors"><span class="label">Contributors: </span> <span class="info"><span title="email: 596777598@qq.com" class="contributor">
          sewar
        </span> <!----></span></div></footer> <!----> <!----> <!----> <div class="content__page-bottom"></div></main> <!----></div><div class="global-ui"><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="Close" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">This app can be installed on your PC or mobile device.  This will allow this web app to look and behave like any other installed app.  You will find it in your app lists and be able to pin it to your home screen, start menus or task bars.  This installed web app will also be able to safely interact with other apps and your operating system. </p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>Description</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        Install <span></span></button> <button class="cancel-button">
        Cancel
      </button></div></div></div></div><!----><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button title="Close" aria-label="Close" class="pswp__button pswp__button--close"></button> <button title="Share" aria-label="Share" class="pswp__button pswp__button--share"></button> <button title="Switch to full screen" aria-label="Switch to full screen" class="pswp__button pswp__button--fs"></button> <button title="Zoom in/out" aria-label="Zoom in/out" class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button title="Prev (Arrow Left)" aria-label="Prev (Arrow Left)" class="pswp__button pswp__button--arrow--left"></button> <button title="Next (Arrow Right)" aria-label="Next (Arrow Right)" class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></div></div>
    <script src="/myblog/assets/js/app.9d2b617a.js" defer></script><script src="/myblog/assets/js/layout-Layout.d2d4ce64.js" defer></script><script src="/myblog/assets/js/page-权限管理.c7e10db0.js" defer></script><script src="/myblog/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-components/Blog/BlogHome~layout-components/~2222f443.5835591a.js" defer></script>
  </body>
</html>
