<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SSG 移动端项目实践 | Sewen 博客</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="./mylogo.png">
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
    <link rel="manifest" href="/myblog/manifest.webmanifest" crossorigin="use-credentials">
    <link rel="alternate" type="application/atom+xml" href="https://sewar-x.github.io/myblog/atom.xml" title="Sewen 博客 Atom Feed">
    <link rel="alternate" type="application/json" href="https://sewar-x.github.io/myblog/rss.xml" title="Sewen 博客 JSON Feed">
    <link rel="alternate" type="application/rss+xml" href="https://sewar-x.github.io/myblog/rss.xml" title="Sewen 博客 RSS Feed">
    <meta name="description" content="sewen 的前端学习笔记、博客、前端基础总结、技术深度剖析、面试题总结、算法总结、项目过程总结">
    <meta property="og:url" content="https://sewar-x.github.io/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5.html">
    <meta property="og:site_name" content="Sewen 博客">
    <meta property="og:title" content="SSG 移动端项目实践">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="en-US">
    <meta name="theme-color" content="#46bd87">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <link rel="preload" href="/myblog/assets/css/0.styles.645fbc6f.css" as="style"><link rel="preload" href="/myblog/assets/js/app.9d2b617a.js" as="script"><link rel="preload" href="/myblog/assets/js/layout-Layout.d2d4ce64.js" as="script"><link rel="preload" href="/myblog/assets/js/page-SSG移动端项目实践.2122615b.js" as="script"><link rel="preload" href="/myblog/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-components/Blog/BlogHome~layout-components/~2222f443.5835591a.js" as="script"><link rel="prefetch" href="/myblog/assets/js/199.a9216960.js"><link rel="prefetch" href="/myblog/assets/js/200.4c66fc79.js"><link rel="prefetch" href="/myblog/assets/js/layout-Blog.1fca7e90.js"><link rel="prefetch" href="/myblog/assets/js/layout-NotFound.3c74e8aa.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/AlgoliaSearch/Dropdown.70fcebe7.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Anchor.3235541c.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/ArticleInfo.7b815b20.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/ArticleItem.b0e177e1.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/ArticleList.d1cf1b24.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/ArticleType.b630b80e.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/BlogHero.621312ba.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/BlogHome.4fe44489.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/BlogInfo.b2a94760.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/BlogPage.e0fbe820.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/BloggerInfo.0df38355.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/CategoryList.ec1bcd96.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/ProjectList.8550a110.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/TagList.bcf7b782.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/Timeline.b6cf5471.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/TimelineList.3c6e08a6.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Clipboard.e940a903.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Common.820a8694.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Home.70383986.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/MyTransition.0de46069.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Navbar/DropdownLink.e3f6c118.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Navbar/NavLink.93b11770.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Navbar/NavLinks.8ba214e6.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Navbar/Navbar.b90a94f9.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Navbar/RepoLink.663a7f55.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Navbar/SidebarButton.76b0035a.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Page.98b5d09c.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/PageFooter.20bc9bd8.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/PageMeta.b7e6b12f.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/PageNav.8305dd1f.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Password.45e0e82a.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Sidebar/DropdownTransition.068c5eea.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Sidebar/Sidebar.f6f90d52.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Sidebar/SidebarDropdownLink.505127a8.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Sidebar/SidebarGroup.7eecf370.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Sidebar/SidebarLink.6e39fe32.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Sidebar/SidebarNavLinks.0f8566cb.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Theme/DarkmodeSwitch.20ac7b92.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Theme/ThemeColor.6086e4ed.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Theme/ThemeOptions.483238c9.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/ArticleIcon.0a22e2b1.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/AutoIcon.2ff1c790.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/BookIcon.419b49ba.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/DarkIcon.7d81873b.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/EditIcon.8ada485d.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/EmptyIcon.d704a5cf.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/I18nIcon.ffad8b3e.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/LightIcon.47d807da.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/LinkIcon.1a8a7826.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/LockIcon.a29a2b79.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/NextIcon.0214ee59.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/Page404Icon.8bc1ebbb.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/PresentationIcon.17500d9b.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/PrevIcon.2ae04a70.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/ProjectIcon.b336d567.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/StickyIcon.0f509b9d.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Baidu.244b9a41.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Bitbucket.11ba94e1.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Dingding.e8a3d90d.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Discord.3295a55b.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Dribbble.464dac3b.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Email.f9254caa.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Evernote.991472fb.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Facebook.08e78e47.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Flipboard.a1124d0f.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Gitee.c44bc20a.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Github.5667e5ae.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Gitlab.ad95c7a7.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Gmail.b5acc6bc.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Instagram.56be85f2.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Lines.d9db3dce.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Linkedin.b82d8d8b.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Pinterest.0f3ffe71.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Pocket.41ef3c92.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/QQ.7558f4ba.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Qzone.bf658fae.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Reddit.9c4c95ee.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Rss.9780139e.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Steam.06abbae2.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Twitter.26fa5bda.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Wechat.9cac8c4c.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Weibo.5206a632.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Whatsapp.0738f1e3.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Youtube.f41fd7f2.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Zhihu.4d851d2f.js"><link rel="prefetch" href="/myblog/assets/js/page--0abc50bf.0d6f1484.js"><link rel="prefetch" href="/myblog/assets/js/page--1cd40f4c.dd76c7b3.js"><link rel="prefetch" href="/myblog/assets/js/page--53f93199.e80bdec8.js"><link rel="prefetch" href="/myblog/assets/js/page--5afd2fd0.adea4e92.js"><link rel="prefetch" href="/myblog/assets/js/page--67c584d3.0a3f3cd9.js"><link rel="prefetch" href="/myblog/assets/js/page--776a8506.cdf48aac.js"><link rel="prefetch" href="/myblog/assets/js/page-CSS.eb94b29f.js"><link rel="prefetch" href="/myblog/assets/js/page-Chrome开发工具使用指南.a2675120.js"><link rel="prefetch" href="/myblog/assets/js/page-DevServer.0281863d.js"><link rel="prefetch" href="/myblog/assets/js/page-Echarts二次封装.4387b8ad.js"><link rel="prefetch" href="/myblog/assets/js/page-Elementui与Element-plusui二次封装.82f12a09.js"><link rel="prefetch" href="/myblog/assets/js/page-Git基础.03c616ad.js"><link rel="prefetch" href="/myblog/assets/js/page-Git规范.e2fdc38a.js"><link rel="prefetch" href="/myblog/assets/js/page-HTML.1e3c14b9.js"><link rel="prefetch" href="/myblog/assets/js/page-Home.f0b7e772.js"><link rel="prefetch" href="/myblog/assets/js/page-JSON配置化组件二次封装.12060fd9.js"><link rel="prefetch" href="/myblog/assets/js/page-JS原理实现.3c427e19.js"><link rel="prefetch" href="/myblog/assets/js/page-JS应用题.3d313b34.js"><link rel="prefetch" href="/myblog/assets/js/page-JavaScript基础.551be887.js"><link rel="prefetch" href="/myblog/assets/js/page-Linux.c6159ebd.js"><link rel="prefetch" href="/myblog/assets/js/page-Loader和Plugin原理.b2971b76.js"><link rel="prefetch" href="/myblog/assets/js/page-MySQL.0b1d704a.js"><link rel="prefetch" href="/myblog/assets/js/page-NPM.a55851b2.js"><link rel="prefetch" href="/myblog/assets/js/page-Node.ec405a21.js"><link rel="prefetch" href="/myblog/assets/js/page-Nodejs常见问题集合.12844e69.js"><link rel="prefetch" href="/myblog/assets/js/page-Node性能优化.b4ea1c34.js"><link rel="prefetch" href="/myblog/assets/js/page-Promise专题.7869a31b.js"><link rel="prefetch" href="/myblog/assets/js/page-React.d76cf0ac.js"><link rel="prefetch" href="/myblog/assets/js/page-TypeScript.4f597fda.js"><link rel="prefetch" href="/myblog/assets/js/page-Vite.637881bf.js"><link rel="prefetch" href="/myblog/assets/js/page-Vite原理解析.6677fdb4.js"><link rel="prefetch" href="/myblog/assets/js/page-Vue25项目webpack构建分析.7bbea0fa.js"><link rel="prefetch" href="/myblog/assets/js/page-Vue2VsVue3.10be4140.js"><link rel="prefetch" href="/myblog/assets/js/page-Vue2x原理源码分析.e9e753b6.js"><link rel="prefetch" href="/myblog/assets/js/page-Vue3基础.210247ff.js"><link rel="prefetch" href="/myblog/assets/js/page-Vue3源码分析.17379e04.js"><link rel="prefetch" href="/myblog/assets/js/page-VueCli源码分析.afc3c83f.js"><link rel="prefetch" href="/myblog/assets/js/page-VueRouter原理分析.0a092eb6.js"><link rel="prefetch" href="/myblog/assets/js/page-VueSSR原理分析.63006040.js"><link rel="prefetch" href="/myblog/assets/js/page-VueVsReact.2156be28.js"><link rel="prefetch" href="/myblog/assets/js/page-Vuex原理分析.5ba3e6e4.js"><link rel="prefetch" href="/myblog/assets/js/page-WEB安全.5aa0eeef.js"><link rel="prefetch" href="/myblog/assets/js/page-WebPack构建原理.9c29703e.js"><link rel="prefetch" href="/myblog/assets/js/page-webpackAPI分析.4c8b152b.js"><link rel="prefetch" href="/myblog/assets/js/page-webpack优化.dcc6c3bc.js"><link rel="prefetch" href="/myblog/assets/js/page-webpack基础.3820ee6c.js"><link rel="prefetch" href="/myblog/assets/js/page-webpack项目实践.77e22417.js"><link rel="prefetch" href="/myblog/assets/js/page-一次后台管理系统的性能优化.7c2d8712.js"><link rel="prefetch" href="/myblog/assets/js/page-从零到一搭建SSR项目.855376fc.js"><link rel="prefetch" href="/myblog/assets/js/page-从零到一搭建Vue2项目和规范设计.93017fd2.js"><link rel="prefetch" href="/myblog/assets/js/page-从零到一搭建Vue3单页面应用.de152d54.js"><link rel="prefetch" href="/myblog/assets/js/page-从零到一搭建公共组件库.93278073.js"><link rel="prefetch" href="/myblog/assets/js/page-从零到一搭建移动端SSG项目.9c113d06.js"><link rel="prefetch" href="/myblog/assets/js/page-使用docker部署Node服务.5cf328fd.js"><link rel="prefetch" href="/myblog/assets/js/page-分治.e3dfc22d.js"><link rel="prefetch" href="/myblog/assets/js/page-前端发版静态资源404问题.9eb1ca89.js"><link rel="prefetch" href="/myblog/assets/js/page-前端存储.cd82cf54.js"><link rel="prefetch" href="/myblog/assets/js/page-前端工程化.1e6e58d0.js"><link rel="prefetch" href="/myblog/assets/js/page-前端性能优化方案.83718d22.js"><link rel="prefetch" href="/myblog/assets/js/page-前端架构实践.171dbc0f.js"><link rel="prefetch" href="/myblog/assets/js/page-前端渲染架构.3b783de8.js"><link rel="prefetch" href="/myblog/assets/js/page-前端自动部署.5076846c.js"><link rel="prefetch" href="/myblog/assets/js/page-前端部署原理.82ecd8a7.js"><link rel="prefetch" href="/myblog/assets/js/page-动态规划.a3af92f1.js"><link rel="prefetch" href="/myblog/assets/js/page-哈希表.c76000e8.js"><link rel="prefetch" href="/myblog/assets/js/page-回溯算法.cd914c32.js"><link rel="prefetch" href="/myblog/assets/js/page-图.dfd9828a.js"><link rel="prefetch" href="/myblog/assets/js/page-基础.7bf5a37b.js"><link rel="prefetch" href="/myblog/assets/js/page-堆.4657e538.js"><link rel="prefetch" href="/myblog/assets/js/page-字符串.252f2a08.js"><link rel="prefetch" href="/myblog/assets/js/page-异步编程.904f4c65.js"><link rel="prefetch" href="/myblog/assets/js/page-性能优化指标和监控.f2175836.js"><link rel="prefetch" href="/myblog/assets/js/page-排序算法.c7a51b99.js"><link rel="prefetch" href="/myblog/assets/js/page-搭建低代码平台.19eaf5ec.js"><link rel="prefetch" href="/myblog/assets/js/page-操作系统.473c4281.js"><link rel="prefetch" href="/myblog/assets/js/page-数学运算.c82748fb.js"><link rel="prefetch" href="/myblog/assets/js/page-数据结构算法.84480586.js"><link rel="prefetch" href="/myblog/assets/js/page-数组.692b0d0a.js"><link rel="prefetch" href="/myblog/assets/js/page-权限管理.c7e10db0.js"><link rel="prefetch" href="/myblog/assets/js/page-查找.790e52df.js"><link rel="prefetch" href="/myblog/assets/js/page-栈和队列.8dbc3586.js"><link rel="prefetch" href="/myblog/assets/js/page-树.24efdeaa.js"><link rel="prefetch" href="/myblog/assets/js/page-浏览器.bee9ec04.js"><link rel="prefetch" href="/myblog/assets/js/page-混合桌面应用开发.9e10d1c3.js"><link rel="prefetch" href="/myblog/assets/js/page-登录.bb830451.js"><link rel="prefetch" href="/myblog/assets/js/page-目录.c85b4d0b.js"><link rel="prefetch" href="/myblog/assets/js/page-移动端开发.56ac22ec.js"><link rel="prefetch" href="/myblog/assets/js/page-组件和组件封装.b5e86da2.js"><link rel="prefetch" href="/myblog/assets/js/page-计算机网络基础.0a106662.js"><link rel="prefetch" href="/myblog/assets/js/page-设计模式.ffdc7cfd.js"><link rel="prefetch" href="/myblog/assets/js/page-调试技巧.485ae36e.js"><link rel="prefetch" href="/myblog/assets/js/page-贪心算法.0f417640.js"><link rel="prefetch" href="/myblog/assets/js/page-输入url到页面展示全过程.510aef2e.js"><link rel="prefetch" href="/myblog/assets/js/page-递归.5e55e552.js"><link rel="prefetch" href="/myblog/assets/js/page-链表.1cf6927f.js"><link rel="prefetch" href="/myblog/assets/js/page-项目总结.ffcd2a4b.js"><link rel="prefetch" href="/myblog/assets/js/vendors~docsearch.f3877d0d.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-components/Blog/BlogHome~layout-components/~5d377965.d9712593.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-Blog~layout-Layout~layout-components/Blog/ArticleItem~layout-components/Blog/ArticleL~b56f3aac.47bb5cb5.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-NotFound~layout-components/Common~layout-components/Page.57d58db9.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-Slide.81546b3b.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-components/AlgoliaSearch/Full.b30f067a.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-components/Blog/BlogPage.bcccbd38.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-components/Navbar/Navbar.e2a7361e.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-components/Page.6c65077c.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-components/Sidebar/Sidebar.34cd9cf7.js"><link rel="prefetch" href="/myblog/assets/js/vendors~photo-swipe.428df1da.js">
    <link rel="stylesheet" href="/myblog/assets/css/0.styles.645fbc6f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-anchor"><header class="navbar"><!----> <div class="content__navbar-start"></div> <button title="Sidebar Button" class="sidebar-button"><span class="icon"></span></button> <a href="/myblog/" class="home-link router-link-active"><img src="./mylogo.png" alt="Sewen 博客" class="logo"> <!----> <span class="site-name can-hide">Sewen 博客</span></a> <!----> <div class="content__navbar-center"></div> <div class="links"><button tabindex="-1" aria-hidden="true" class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">Theme Color:</label> <li><span class="default-theme"></span></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">Theme Mode:</label> <div class="darkmode-switch"><div class="item day"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon light-icon"><path d="M512 256a42.667 42.667 0 0 0 42.667-42.667V128a42.667 42.667 0 0 0-85.334 0v85.333A42.667 42.667 0 0 0 512 256zm384 213.333h-85.333a42.667 42.667 0 0 0 0 85.334H896a42.667 42.667 0 0 0 0-85.334zM256 512a42.667 42.667 0 0 0-42.667-42.667H128a42.667 42.667 0 0 0 0 85.334h85.333A42.667 42.667 0 0 0 256 512zm9.387-298.667a42.667 42.667 0 0 0-59.307 62.72l61.44 59.307a42.667 42.667 0 0 0 31.147 11.947 42.667 42.667 0 0 0 30.72-13.227 42.667 42.667 0 0 0 0-60.16zm459.946 133.974a42.667 42.667 0 0 0 29.44-11.947l61.44-59.307a42.667 42.667 0 0 0-57.6-62.72l-61.44 60.587a42.667 42.667 0 0 0 0 60.16 42.667 42.667 0 0 0 28.16 13.227zM512 768a42.667 42.667 0 0 0-42.667 42.667V896a42.667 42.667 0 0 0 85.334 0v-85.333A42.667 42.667 0 0 0 512 768zm244.48-79.36a42.667 42.667 0 0 0-59.307 61.44l61.44 60.587a42.667 42.667 0 0 0 29.44 11.946 42.667 42.667 0 0 0 30.72-12.8 42.667 42.667 0 0 0 0-60.586zm-488.96 0-61.44 59.307a42.667 42.667 0 0 0 0 60.586 42.667 42.667 0 0 0 30.72 12.8 42.667 42.667 0 0 0 28.587-10.666l61.44-59.307a42.667 42.667 0 0 0-59.307-61.44zM512 341.333A170.667 170.667 0 1 0 682.667 512 170.667 170.667 0 0 0 512 341.333z" fill="currentColor"></path></svg></div> <div class="item auto active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon auto-icon"><path d="M460.864 539.072H564.8L510.592 376l-49.728 163.072zM872 362.368V149.504H659.648L510.528 0l-149.12 149.504H149.12v212.928L0 511.872l149.12 149.504v212.928h212.352l149.12 149.504 149.12-149.504h212.352V661.376l149.12-149.504L872 362.368zM614.464 693.12l-31.616-90.624H438.272l-31.616 90.624h-85.888l144.576-407.68h90.368l144.576 407.68h-85.824zm0 0" fill="currentColor"></path></svg></div> <div class="item night"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon dark-icon"><path d="M935.539 630.402c-11.43-11.432-28.674-14.739-43.531-8.354-46.734 20.103-96.363 30.297-147.508 30.297-99.59 0-193.221-38.784-263.64-109.203-108.637-108.637-139.61-270.022-78.908-411.148a39.497 39.497 0 0 0-51.886-51.887c-52.637 22.64-100.017 54.81-140.826 95.616-85.346 85.346-132.346 198.821-132.346 319.52 0 120.7 47.001 234.172 132.347 319.519S408.063 947.11 528.76 947.11c120.7 0 234.172-47.003 319.52-132.351 40.809-40.81 72.978-88.19 95.616-140.826a39.497 39.497 0 0 0-8.356-43.532z" fill="currentColor"></path></svg></div></div> <!----></div></div></div></button> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/myblog/" class="nav-link router-link-active"><!---->
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Front-end Basics" class="dropdown-title"><span class="title"><!---->
        前端基础
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/projectsSummary/html/" class="nav-link"><!---->
  HTML
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/css/" class="nav-link"><!---->
  Css
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/javascript/" class="nav-link"><!---->
  JavaScript
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/typescript/" class="nav-link"><!---->
  TypeScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title"><!---->
        计算机基础
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/projectsSummary/algorithms/" class="nav-link"><!---->
  数据结构和算法
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/network/" class="nav-link"><!---->
  计算机网络/HTTP
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/network/输入url到页面展示全过程/" class="nav-link"><!---->
  输入url到页面展示全过程
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/operating-system/" class="nav-link"><!---->
  操作系统
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/design-model/" class="nav-link"><!---->
  设计模式
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/Web-Security/" class="nav-link"><!---->
  Web安全
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架和源码分析" class="dropdown-title"><span class="title"><!---->
        框架和源码分析
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/projectsSummary/vue/Vue2原理和源码分析.html" class="nav-link"><!---->
  Vue 专题
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/React/" class="nav-link"><!---->
  React 专题
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/webpack/webpack构建原理.html" class="nav-link"><!---->
  webpack 专题
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/vite/" class="nav-link"><!---->
  vite 专题
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/axios/" class="nav-link"><!---->
  Axios 专题
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="浏览器" class="dropdown-title"><span class="title"><!---->
        浏览器
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/projectsSummary/browser/浏览器原理/" class="nav-link"><!---->
  浏览器原理
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/browser/前端缓存和存储/" class="nav-link"><!---->
  前端缓存和存储
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/performance/前端调试技巧/" class="nav-link"><!---->
  前端调试技巧
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="node.js" class="dropdown-title"><span class="title"><!---->
        服务器
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/projectsSummary/node/" class="nav-link"><!---->
  Node.js
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/linux/" class="nav-link"><!---->
  Linux
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/mysql/" class="nav-link"><!---->
  MySQL
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/nginx/" class="nav-link"><!---->
  Nginx
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/docker/" class="nav-link"><!---->
  Docker
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="浏览器和性能优化" class="dropdown-title"><span class="title"><!---->
        性能优化
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/projectsSummary/performance/性能优化指标和监控/" class="nav-link"><!---->
  性能优化指标和监控
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/performance/前端性能优化方案/" class="nav-link"><!---->
  前端性能优化方案
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/performance/一次管理后台的渲染优化/" class="nav-link"><!---->
  一次管理后台的渲染优化
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端工程" class="dropdown-title"><span class="title"><!---->
        前端工程
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/projectsSummary/Front-end-Engineering/前端工程化/" class="nav-link"><!---->
  前端工程化
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/Front-end-Engineering/前端渲染架构/" class="nav-link"><!---->
  前端渲染架构
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/Front-end-Engineering/前端架构实践/" class="nav-link"><!---->
  前端架构实践
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/Front-end-Engineering/npm/" class="nav-link"><!---->
  npm
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/git/" class="nav-link"><!---->
  Git
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/projectDeploy/自动构建和部署/" class="nav-link"><!---->
  自动构建和部署
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目实践" class="dropdown-title"><span class="title"><!---->
        项目实践
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/projectsSummary/projectDeploy/" class="nav-link"><!---->
  前端部署
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/componentsEncapsulation/组件和组件封装实践.html" class="nav-link"><!---->
  组件和组件封装实践
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/projectsSummary/登录与单点登录/" class="nav-link"><!---->
  登录与单点登录
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/projectsSummary/权限管理方案实践/" class="nav-link"><!---->
  权限管理方案实践
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/projectsSummary/Echarts二次封装实践/" class="nav-link"><!---->
  Echarts二次封装实践
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/projectsSummary/文档在线预览和编辑方案/" class="nav-link"><!---->
  文档在线预览和编辑方案
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/projectsSummary/移动端开发实践/" class="nav-link"><!---->
  移动端开发实践
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目搭建到原理分析" class="dropdown-title"><span class="title"><!---->
        项目搭建
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/projectsSummary/projectsSummary/从零到一搭建SSR项目/" class="nav-link"><!---->
  从零到一搭建SSR项目
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/projectsSummary/从零到一搭建移动端SSG项目/" class="nav-link"><!---->
  从零到一搭建移动端SSG项目
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/projectsSummary/移动端SSG项目实践/" class="nav-link"><!---->
  移动端SSG项目实践
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/projectsSummary/从零到一搭建Vue2工程化项目/" class="nav-link"><!---->
  从零到一搭建Vue2工程化项目
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/projectsSummary/从零到一搭建Vue3工程化项目/" class="nav-link"><!---->
  从零到一搭建Vue3工程化项目
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/projectsSummary/搭建低代码平台/" class="nav-link"><!---->
  搭建低代码平台
</a></li><li class="dropdown-item"><a href="/myblog/projectsSummary/projectsSummary/混合桌面应用开发实践/" class="nav-link"><!---->
  混合桌面应用开发实践
</a></li></ul></div></div></nav> <!----> <!----> <!----> <div class="content__navbar-end"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><div vocab="https://schema.org/" typeof="Person" class="blogger-info mobile"><div data-balloon-pos="down" role="navigation" class="blogger hasIntro"><img property="image" alt="Blogger Avatar" src="./mylogo.png" class="avatar round"> <div property="name" class="name">Sewen 博客</div> <meta property="url" content="../outline.md"></div> <div class="num-wrapper"><div><div class="num">91</div> <div>Articles</div></div> <div><div class="num">0</div> <div>Category</div></div> <div><div class="num">0</div> <div>Tags</div></div> <div><div class="num">91</div> <div>Timeline</div></div></div> <div class="media-links-wrapper"><a href="https://github.com/Sewar-x/myblog" rel="noopener noreferrer" target="_blank" aria-label="Github" data-balloon-pos="up" class="media-link"><span class="sr-only">Github</span> <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon icon-github"><circle cx="512" cy="512" r="512" fill="#171515"></circle> <path d="M509.423 146.442c-200.317 0-362.756 162.42-362.756 362.8 0 160.266 103.936 296.24 248.109 344.217 18.139 3.327 24.76-7.872 24.76-17.486 0-8.613-.313-31.427-.49-61.702-100.912 21.923-122.205-48.63-122.205-48.63-16.495-41.91-40.28-53.067-40.28-53.067-32.937-22.51 2.492-22.053 2.492-22.053 36.407 2.566 55.568 37.386 55.568 37.386 32.362 55.438 84.907 39.43 105.58 30.143 3.296-23.444 12.667-39.43 23.032-48.498-80.557-9.156-165.246-40.28-165.246-179.297 0-39.604 14.135-71.988 37.342-97.348-3.731-9.178-16.18-46.063 3.556-96.009 0 0 30.46-9.754 99.76 37.19 28.937-8.048 59.97-12.071 90.823-12.211 30.807.14 61.843 4.165 90.822 12.21 69.26-46.944 99.663-37.189 99.663-37.189 19.792 49.946 7.34 86.831 3.61 96.01 23.25 25.359 37.29 57.742 37.29 97.347 0 139.366-84.82 170.033-165.637 179.013 13.026 11.2 24.628 33.342 24.628 67.182 0 48.498-.445 87.627-.445 99.521 0 9.702 6.535 20.988 24.945 17.444 144.03-48.067 247.881-183.95 247.881-344.175 0-200.378-162.442-362.798-362.802-362.798z" fill="#FFF"></path></svg></a><a href="1567910907" rel="noopener noreferrer" target="_blank" aria-label="Wechat" data-balloon-pos="up" class="media-link"><span class="sr-only">Wechat</span> <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon icon-wechat"><circle cx="512" cy="512" r="512" fill="#1AC88E"></circle> <path d="M827.551 578.742a176.583 176.583 0 0 0-185.685-158.379 172.942 172.942 0 0 0-186.3 158.379 172.942 172.942 0 0 0 185.686 158.379 282.169 282.169 0 0 0 65.536-10.923l60.689 32.768-16.384-54.613a166.275 166.275 0 0 0 76.458-125.611zm-245.76-27.307a21.845 21.845 0 1 1 0-43.69 24.872 24.872 0 0 1 27.307 21.845 24.872 24.872 0 0 1-27.921 21.845h.614zm121.356 0a21.845 21.845 0 1 1 0-43.69 24.872 24.872 0 0 1 27.306 21.845 24.872 24.872 0 0 1-28.512 21.845h1.206z" fill="#FFF"></path> <path d="M623.662 400.953h21.23A222.709 222.709 0 0 0 419.772 245.6a208.145 208.145 0 0 0-223.323 189.94 182.044 182.044 0 0 0 89.201 150.483l-22.436 67.356 78.279-39.435a389.575 389.575 0 0 0 78.279 10.923h20.616a163.226 163.226 0 0 1-6.667-46.718 182.044 182.044 0 0 1 189.94-177.197zm-121.379-60.69a27.921 27.921 0 1 1 0 55.843 31.562 31.562 0 0 1-33.36-27.921 31.562 31.562 0 0 1 34.59-27.921h-1.23zM346.34 396.107a31.562 31.562 0 0 1-33.383-27.921 31.562 31.562 0 0 1 33.383-27.921 27.921 27.921 0 1 1 0 55.842z" fill="#FFF"></path></svg></a></div></div> <hr> <!----> <div class="content__sidebar-top"></div> <nav class="sidebar-nav-links"><div class="nav-item"><a href="/myblog/" class="nav-link router-link-active"><!---->
  首页
</a></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="Front-end Basics" class="dropdown-title"><span class="title"><!---->
      前端基础
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/html/" class="nav-link"><!---->
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/css/" class="nav-link"><!---->
  Css
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/javascript/" class="nav-link"><!---->
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/typescript/" class="nav-link"><!---->
  TypeScript
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title"><!---->
      计算机基础
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/algorithms/" class="nav-link"><!---->
  数据结构和算法
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/network/" class="nav-link"><!---->
  计算机网络/HTTP
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/network/输入url到页面展示全过程/" class="nav-link"><!---->
  输入url到页面展示全过程
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/operating-system/" class="nav-link"><!---->
  操作系统
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/design-model/" class="nav-link"><!---->
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/Web-Security/" class="nav-link"><!---->
  Web安全
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="框架和源码分析" class="dropdown-title"><span class="title"><!---->
      框架和源码分析
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/vue/Vue2原理和源码分析.html" class="nav-link"><!---->
  Vue 专题
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/React/" class="nav-link"><!---->
  React 专题
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/webpack/webpack构建原理.html" class="nav-link"><!---->
  webpack 专题
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/vite/" class="nav-link"><!---->
  vite 专题
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/axios/" class="nav-link"><!---->
  Axios 专题
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="浏览器" class="dropdown-title"><span class="title"><!---->
      浏览器
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/browser/浏览器原理/" class="nav-link"><!---->
  浏览器原理
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/browser/前端缓存和存储/" class="nav-link"><!---->
  前端缓存和存储
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/performance/前端调试技巧/" class="nav-link"><!---->
  前端调试技巧
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="node.js" class="dropdown-title"><span class="title"><!---->
      服务器
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/node/" class="nav-link"><!---->
  Node.js
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/linux/" class="nav-link"><!---->
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/mysql/" class="nav-link"><!---->
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/nginx/" class="nav-link"><!---->
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/docker/" class="nav-link"><!---->
  Docker
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="浏览器和性能优化" class="dropdown-title"><span class="title"><!---->
      性能优化
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/performance/性能优化指标和监控/" class="nav-link"><!---->
  性能优化指标和监控
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/performance/前端性能优化方案/" class="nav-link"><!---->
  前端性能优化方案
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/performance/一次管理后台的渲染优化/" class="nav-link"><!---->
  一次管理后台的渲染优化
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="前端工程" class="dropdown-title"><span class="title"><!---->
      前端工程
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/Front-end-Engineering/前端工程化/" class="nav-link"><!---->
  前端工程化
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/Front-end-Engineering/前端渲染架构/" class="nav-link"><!---->
  前端渲染架构
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/Front-end-Engineering/前端架构实践/" class="nav-link"><!---->
  前端架构实践
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/Front-end-Engineering/npm/" class="nav-link"><!---->
  npm
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/git/" class="nav-link"><!---->
  Git
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/projectDeploy/自动构建和部署/" class="nav-link"><!---->
  自动构建和部署
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="项目实践" class="dropdown-title"><span class="title"><!---->
      项目实践
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/projectDeploy/" class="nav-link"><!---->
  前端部署
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/componentsEncapsulation/组件和组件封装实践.html" class="nav-link"><!---->
  组件和组件封装实践
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/projectsSummary/登录与单点登录/" class="nav-link"><!---->
  登录与单点登录
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/projectsSummary/权限管理方案实践/" class="nav-link"><!---->
  权限管理方案实践
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/projectsSummary/Echarts二次封装实践/" class="nav-link"><!---->
  Echarts二次封装实践
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/projectsSummary/文档在线预览和编辑方案/" class="nav-link"><!---->
  文档在线预览和编辑方案
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/projectsSummary/移动端开发实践/" class="nav-link"><!---->
  移动端开发实践
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="项目搭建到原理分析" class="dropdown-title"><span class="title"><!---->
      项目搭建
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/projectsSummary/从零到一搭建SSR项目/" class="nav-link"><!---->
  从零到一搭建SSR项目
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/projectsSummary/从零到一搭建移动端SSG项目/" class="nav-link"><!---->
  从零到一搭建移动端SSG项目
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/projectsSummary/移动端SSG项目实践/" class="nav-link"><!---->
  移动端SSG项目实践
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/projectsSummary/从零到一搭建Vue2工程化项目/" class="nav-link"><!---->
  从零到一搭建Vue2工程化项目
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/projectsSummary/从零到一搭建Vue3工程化项目/" class="nav-link"><!---->
  从零到一搭建Vue3工程化项目
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/projectsSummary/搭建低代码平台/" class="nav-link"><!---->
  搭建低代码平台
</a></li><li class="dropdown-item"><!----> <a href="/myblog/projectsSummary/projectsSummary/混合桌面应用开发实践/" class="nav-link"><!---->
  混合桌面应用开发实践
</a></li></ul></div></div> <!----></nav> <!----> <div class="content__sidebar-center"></div> <!----> <!----> <div class="content__sidebar-bottom"></div> <!----></aside> <main class="page"><nav class="breadcrumb"><ol vocab="https://schema.org/" typeof="BreadcrumbList"><li property="itemListElement" typeof="ListItem"><a href="/myblog/projectsSummary/" property="item" typeof="WebPage" class="router-link-active"><!----> <span property="name">项目总结</span></a> <meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem" class="is-active"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/" aria-current="page" property="item" typeof="WebPage" class="router-link-exact-active router-link-active"><!----> <span property="name">SSG 移动端项目实践</span></a> <meta property="position" content="2"></li></ol></nav> <!----> <div class="content__page-top"></div> <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><!----> <span property="headline">SSG 移动端项目实践</span></h1> <div class="page-info"><!----> <true-info defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/"></true-info><true-info defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/"></true-info><true-info defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/"></true-info><true-info defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/"></true-info><true-info defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/"></true-info><true-info defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/"></true-info><true-info defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/"></true-info></div> <!----> <hr></div> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#项目特点" class="anchor-link heading2"><div>项目特点</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#技术栈" class="anchor-link heading2"><div>技术栈</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#项目开发" class="anchor-link heading2"><div>项目开发</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#项目目录" class="anchor-link heading3"><div>项目目录</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#静态页面开发流程" class="anchor-link heading3"><div>静态页面开发流程</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#项目路由管理" class="anchor-link heading2"><div>项目路由管理</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#静态化构建原理" class="anchor-link heading2"><div>静态化构建原理</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#构建流程" class="anchor-link heading3"><div>构建流程</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#构建组件文件和客户端激活文件" class="anchor-link heading3"><div>构建组件文件和客户端激活文件</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#移动端屏幕适配方案" class="anchor-link heading2"><div>移动端屏幕适配方案</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#用户管理" class="anchor-link heading2"><div>用户管理</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#用户注册" class="anchor-link heading3"><div>用户注册</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#多国方案" class="anchor-link heading2"><div>多国方案</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#多国区别" class="anchor-link heading3"><div>多国区别</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#多国变量和环境管理" class="anchor-link heading3"><div>多国变量和环境管理</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#埋点上报" class="anchor-link heading2"><div>埋点上报</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#自建上报系统" class="anchor-link heading3"><div>自建上报系统</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#pwa-相关" class="anchor-link heading2"><div>PWA 相关</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#pwa" class="anchor-link heading3"><div>PWA</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#app-shell" class="anchor-link heading3"><div>App Shell</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#manifest" class="anchor-link heading3"><div>Manifest</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#service-worker" class="anchor-link heading3"><div>Service Worker</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#离线缓存" class="anchor-link heading3"><div>离线缓存</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#消息推送" class="anchor-link heading3"><div>消息推送</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#实现" class="anchor-link heading3"><div>实现</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#参考资料" class="anchor-link heading3"><div>参考资料</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#seo-相关" class="anchor-link heading2"><div>SEO 相关</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#tdk" class="anchor-link heading3"><div>TDK</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#结构化数据" class="anchor-link heading3"><div>结构化数据</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#站点地图-sitemap" class="anchor-link heading3"><div>站点地图 sitemap</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#css-对-seo影响" class="anchor-link heading3"><div>CSS 对 SEO影响</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#反爬虫" class="anchor-link heading3"><div>反爬虫</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#参考资料-2" class="anchor-link heading3"><div>参考资料</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#项目优化" class="anchor-link heading2"><div>项目优化</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#seo-相关优化" class="anchor-link heading3"><div>SEO 相关优化</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#webpack-相关优化" class="anchor-link heading3"><div>Webpack 相关优化</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#vue-相关优化" class="anchor-link heading3"><div>Vue 相关优化</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#性能优化" class="anchor-link heading3"><div>性能优化</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#html-优化" class="anchor-link heading3"><div>HTML 优化</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#js-优化" class="anchor-link heading3"><div>JS 优化</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#css优化" class="anchor-link heading3"><div>CSS优化</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#vue-优化" class="anchor-link heading3"><div>VUE 优化</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#打包优化" class="anchor-link heading3"><div>打包优化</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#图片优化" class="anchor-link heading3"><div>图片优化</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#网络优化" class="anchor-link heading3"><div>网络优化</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#参考资料-3" class="anchor-link heading3"><div>参考资料</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#协作流程管理" class="anchor-link heading2"><div>协作流程管理</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#协作工具" class="anchor-link heading3"><div>协作工具</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#规范" class="anchor-link heading3"><div>规范</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#项目难点和解决方案" class="anchor-link heading2"><div>项目难点和解决方案</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#平台兼容性" class="anchor-link heading3"><div>平台兼容性</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#相关原理" class="anchor-link heading2"><div>相关原理</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#功能需求" class="anchor-link heading3"><div>功能需求</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#其他项目" class="anchor-link heading2"><div>其他项目</div></a></li><li class="anchor"><a href="/myblog/projectsSummary/%E7%A7%BB%E5%8A%A8%E7%AB%AFSSG%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/#参考资料-5" class="anchor-link heading3"><div>参考资料</div></a></li></ul></div></aside></div> <!----> <div class="content__content-top"></div> <div class="theme-default-content content__default"><h1 id="ssg-移动端项目实践"><a href="#ssg-移动端项目实践" class="header-anchor">#</a> SSG 移动端项目实践</h1> <h2 id="项目特点"><a href="#项目特点" class="header-anchor">#</a> 项目特点</h2> <p>概述：面向多个国家的媒体网站，提供图像，视频，评级和比较，新闻，评论，指南。</p> <p>特点：</p> <ul><li>面向多个国家</li> <li>内容密集型页面，偏静态的内容展示场景（资讯，新闻）</li> <li>项目的 SEO 和 首屏渲染是评价项目的关键指标</li></ul> <p>国家及语言代码：</p> <blockquote><p>马来西亚英语：my-en<br>
印尼语：id-id<br>
印度英语：in-en<br>
泰语：th-th</p> <p>菲律宾：</p></blockquote> <p>涉及端：</p> <h2 id="技术栈"><a href="#技术栈" class="header-anchor">#</a> 技术栈</h2> <ul><li><p>wap 端: 使用 <code>Vue + Webpack</code> 构建的 PWA 应用</p> <ul><li>技术栈：<code>vue-cli3 + vue2.x + vue-router + vue-ssr + vant + i18n + amp + webpack + scss</code></li></ul></li> <li><p>多国方案：</p> <ul><li><p>多国主要区别：</p> <ul><li>多语言：<code>vue-i18n</code></li> <li>主题颜色： <code>scss</code> 管理</li> <li>图标： 工厂模式获取</li> <li>webpack 配置：添加 <code>config</code> 配置 <code>webpack</code> 打包输出；</li></ul></li> <li><p>TDK 管理：添加 config 配置 webpack 打包时注入输出；</p></li> <li><p>结构化数据管理</p></li> <li><p>amp：谷歌搜索引擎优化</p></li></ul></li> <li><p>页面模式:</p> <ul><li>单页面 + 多页面静态化 结合方式
<ul><li>单页面 SPA:
<ul><li>目的： 动态加载的内容的页面，且不需要 SEO 优化的页面；</li> <li>开发：常规 vue 单页面应用开发模式</li></ul></li> <li>多页面静态化：
<ul><li>目的：静态页面，需要被搜索引擎搜索的页面。 用于 SEO 优化，解决首屏白屏，加快首次加载</li> <li>开发：编写 webpack 打包脚本 + <code>vue-server-renderer</code> 渲染模板</li></ul></li></ul></li></ul></li> <li><p>开发： 使用脚本静态化， 使用 nginx 配置代理路由转发静态页面</p></li> <li><p>SEO目标引擎： google。</p></li></ul> <h2 id="项目开发"><a href="#项目开发" class="header-anchor">#</a> 项目开发</h2> <h3 id="项目目录"><a href="#项目目录" class="header-anchor">#</a> 项目目录</h3> <p><img src="/myblog/assets/img/wap_catalog.9dc26390.png" alt=""></p> <ul><li><p>目录中涉及业务的主要几个目录：</p> <ul><li><p>amp：构建 amp 页面相关目录</p></li> <li><p>create-html: 页面静态化脚本配置相关目录</p></li> <li><p>create-sitemap: 创建站点地图目录</p></li> <li><p>src: 开发单页面相关目录</p></li> <li><p>ssr: 开发静态化页面相关业务组件目录</p></li></ul></li></ul> <h3 id="静态页面开发流程"><a href="#静态页面开发流程" class="header-anchor">#</a> 静态页面开发流程</h3> <ul><li><p>在单页模式中 src/router 添加路由：</p> <ul><li>添加路由目的： 用于本地开发，方便本地开发时进行预览，本地静态页面开发完成后删除对应静态页面路由，静态页面路由由 Nginx 配置。</li></ul> <p><img src="/myblog/assets/img/src-router.950d8a15.png" alt=""></p> <ul><li>存在问题：
<ul><li>单页面应用路由和 ssr 静态化页面路由耦合</li> <li>优化：分离单页面路由和静态化页面路由配置文件</li></ul></li></ul></li> <li><p>使用 npm run serve 启动本地服务：用于本地开发预览页面。</p> <p><img src="/myblog/assets/img/npmscript.4da37453.png" alt=""></p> <p>使用 test 模式，将加载 .env.test 文件下的所有变量，作为 webpack 打包时的初始值</p> <p><img src="/myblog/assets/img/script.e8b1db72.png" alt=""></p> <ul><li>存在问题：开发完成后静态化页面无法再使用本地开发服务预览</li></ul></li> <li><p>在 ssr/view 目录下开发页面</p> <ul><li>在 ssr/view 目录下新增目录开发新页面；</li> <li>页面开发完成后，在 create-html 目录下新增页面目录(以introduce 页面开发为例 )：创建模板 html、App.vue 页面根组件、main.js 页面打包/依赖文件入口
<ul><li>所有页面写成组件形式，最终组件外层使用 App.vue 文件中的套壳 ,套壳目的： 使wap端在pc端下显示移动模式样式 <img src="/myblog/assets/img/App.vue.06ae2559.png" alt=""></li> <li>存在问题： 每新增页面，新增模板、入口文件、跟组件文件；项目开发流程复杂化；</li></ul></li></ul></li> <li><p>页面开发完成后在 create-html目录下编写打包脚本（创建 Introduce.js）：<img src="/myblog/assets/img/打包脚本.32c5f98d.png" alt=""></p></li> <li><p>去除单页模式中的路由，使用静态化脚本构建页面</p></li></ul> <h2 id="项目路由管理"><a href="#项目路由管理" class="header-anchor">#</a> 项目路由管理</h2> <ul><li><p>静态化页面路由使用 nginx 转发</p> <ul><li>Nginx 路由路径为 html 文件输出目录路径，在项目中 <code>create-html/config/页面名/en.js</code> 中配置 webpack 打包文件输出的路径，不同国家输出路径不同。</li></ul></li> <li><p>动态页面使用 vue-router 动态匹配</p></li></ul> <h2 id="静态化构建原理"><a href="#静态化构建原理" class="header-anchor">#</a> 静态化构建原理</h2> <h3 id="构建流程"><a href="#构建流程" class="header-anchor">#</a> <strong>构建流程</strong></h3> <p><img src="/myblog/assets/img/webcar-静态化过程.fd9d6e3a.png" alt=""></p> <h3 id="构建组件文件和客户端激活文件"><a href="#构建组件文件和客户端激活文件" class="header-anchor">#</a> 构建组件文件和客户端激活文件</h3> <p><strong>构建组件文件：</strong></p> <ul><li><p>web components 文件构建介绍：</p> <ul><li>web  components 组件入口应该是一个 <code>*.vue</code> 文件。项目中 <code>create-html/introduce/App.vue</code> 为 introduce 页面组件入口。</li> <li>通过 webpack 将会把这个组件自动包裹并注册为 Web Components 组件，该构建将会产生一个单独的 JavaScript 文件 (及其压缩后的版本) 将所有的东西都内联起来。无需在 <code>main.js</code> 里自行注册。项目中构建出的 app.js 为 web 组件。</li> <li>当这个脚本被引入网页时，会注册自定义组件 <code>&lt;my-element&gt;</code>，其使用 <code>@vue/web-component-wrapper</code> 包裹了目标的 Vue 组件。这个包裹器会自动代理属性、特性、事件和插槽。请查阅 <a href="https://github.com/vuejs/vue-docs-zh-cn/blob/master/vue-web-component-wrapper/README.md" target="_blank" rel="noopener noreferrer"><code>@vue/web-component-wrapper</code> 的文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>了解更多细节。</li></ul></li> <li><p>目的： 文件组件实例 app.js 作为服务端渲染 renderer.renderToString()方法的参数，作为服务端中Vue实例的组件,渲染成html模板内容。</p></li> <li><p>通过 webpack 将页面和组件打包成 app.js 文件。</p></li> <li><p>打包 app.js 配置：最终输出 app.js 文件<br> <img src="/myblog/assets/img/webpack_app.e911c12d.png" alt=""></p> <ul><li>被打包的文件内容为页面组件实例(不存在vue实例!)<br> <img src="/myblog/assets/img/webpack_app2.d9d46676.png" alt=""></li></ul></li></ul> <p><strong>构建客户端激活文件</strong></p> <ul><li><p>目的：用于客户端激活 。在加载页面时候会加载 main.js 文件，然后执行该文件进行客户端激活。</p> <ul><li><a href="https://ssr.vuejs.org/zh/guide/hydration.html" target="_blank" rel="noopener noreferrer">客户端激活<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>:指的是 Vue 在浏览器端接管由服务端发送的静态 HTML，使其变为由 Vue 管理的动态 DOM 的过程。</li></ul></li> <li><p>创建客户端实例 main.js： 通过webpack 打包的 main.js 文件</p></li> <li><p>webpack 打包main.js ,输入main.js 用户客户端激活  （输出结果为 main.js 文件）<img src="/myblog/assets/img/webpack_mian.2b9035fc.png" alt=""></p> <ul><li><p>在 main.js  文件中 （create-html/introduce/main.js）创建客户端 vue 实例，并将 App.vue 作为根组件进行渲染，并通过解构 <code>window.__initData__</code></p></li> <li><p>获取组件 props 数据,并将渲染的实例挂载到 id=app 的dom中</p> <p><img src="/myblog/assets/img/webpack_main2.6c77328c.png" alt=""></p></li></ul></li></ul> <h4 id="创建渲染实例"><a href="#创建渲染实例" class="header-anchor">#</a> 创建渲染实例</h4> <ul><li><p>模板渲染实例通过 <code>require('vue-server-renderer').createRenderer()</code> 方法创建，传入模板，返回渲染实例。</p></li> <li><p>创建 服务端渲染模板</p> <ul><li><p>服务端渲染模板为 ( <code>create-html/introduce/index.tpl.html</code>)  <img src="/myblog/assets/img/template.04e4b141.png" alt=""></p></li> <li><p>html 模板打包 webpack 配置 （<code>create-html/config/webpack.base.config.js</code>） <img src="/myblog/assets/img/template_webpack.6b68bac5.png" alt=""></p></li></ul></li></ul> <h4 id="获取数据并配置渲染上下文"><a href="#获取数据并配置渲染上下文" class="header-anchor">#</a> 获取数据并配置渲染上下文</h4> <ol><li><p>然后引入模板作为参数创建 render 实例, 并引入被打包的组件文件 app.js  <img src="/myblog/assets/img/webpack_app3.57a4ff36.png" alt=""></p></li> <li><p>通过脚本获取服务端渲染数据，并将接口数据结果处理后作为服务端渲染组件 props 传入 <code>context.window.__initData__</code></p></li> <li><p>创建模板渲染的 context，并序列化 App.vue 组件 props 属性注入 <code>window.__initData__</code> 对象 <img src="data:image/png;base64,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" alt=""></p></li> <li><p>创建 vue 实例作为服务端渲染实例,将webpack打包的组件 ( app.js ) 作为服务端渲染的vue实例组件和 context 数据一起渲染成html模板 <img src="/myblog/assets/img/webpack_app4.b24d986b.png" alt=""></p></li></ol> <h4 id="模板渲染输出文件"><a href="#模板渲染输出文件" class="header-anchor">#</a> 模板渲染输出文件</h4> <p>将服务端渲染的 html 模板写入文件 <img src="/myblog/assets/img/write_html.e93eb818.png" alt=""></p> <hr> <h2 id="移动端屏幕适配方案"><a href="#移动端屏幕适配方案" class="header-anchor">#</a> 移动端屏幕适配方案</h2> <p>单位转换:</p> <ul><li>开发使用像素单位： px</li> <li>打包结果使用像素： rem</li> <li>使用插件： <code>postcss-px2rem</code></li> <li>配置：
<ul><li><img src="/myblog/assets/img/px2rem.8a895c80.png" alt=""></li></ul></li></ul> <p>根元素 html 设置：</p> <ul><li>当屏幕宽度大于 416px 时， html 元素设置 <code>font-size:100px；</code></li> <li>当屏幕宽度大于 416px 时， html 元素设置 <code>font-size:26.666666667vw;</code> <ul><li><img src="/myblog/assets/img/screen_adaption.671c0837.png" alt=""></li></ul></li></ul> <hr> <h2 id="用户管理"><a href="#用户管理" class="header-anchor">#</a> 用户管理</h2> <h3 id="用户注册"><a href="#用户注册" class="header-anchor">#</a> 用户注册</h3> <ul><li><p>背景：因为网站用户主要面向于东南亚用户，账号注册统一使用 google 或 facebook（国外的主流社交应用）</p></li> <li><p>注册方式：使用 google 或 facebook 用户账号授权登录，登录成功后在本地后台注册用户。</p></li></ul> <h4 id="登录判断"><a href="#登录判断" class="header-anchor">#</a> 登录判断</h4> <p>在任何需要登录操作的地方（如：评论功能，个人信息）点击后会进入登录判断逻辑。</p> <ul><li><p>定义变量：在 <code>windows.$local</code> 中 添加 用户信息、登录状态、用户 <code>uuid</code>，登录状态判断直接在 <code>windows.$local</code> 变量中获取，定义在 <code>ssr/plugin/index.js</code> 中</p> <p><img src="/myblog/assets/img/login.5338eb0a.png" alt=""></p> <ul><li>登录判断逻辑：当本地存有 token 和用户信息时，表示已经登录</li></ul></li></ul> <h4 id="登录组件封装"><a href="#登录组件封装" class="header-anchor">#</a> 登录组件封装</h4> <p>登录组件模板封装： 定义在<code>ssr/components/LoginPanel.vue</code></p> <ul><li><p>主要逻辑：</p> <ul><li><p>根据判断当前调用组件平台，根据平台显示对应登录按钮。</p></li> <li><p>点击登录后进行创建登录对象并调用登录初始化。</p> <p><img src="/myblog/assets/img/login3.1cbe8215.png" alt=""></p></li></ul></li> <li><p>登录组件二次封装：使用函数式组件封装，创建 Login 组件实例，挂载到 vue 原型中。定义在 <code>ssr/components/Login/index.js</code></p> <p><img src="/myblog/assets/img/login2.2af8a4a8.png" alt=""></p> <ul><li>调用方式：<code>this.$login().then(() =&gt; {})</code></li> <li>二次封装原因：
<ul><li>通过挂载到 vue 原型中方便调用，不需要在相关需要登录的组件中引入 登录组件；</li> <li>兼容安卓内嵌页面登录。android 中 需要通过 WebView Javascript Bridge 方式调用 js 中的方法。</li></ul></li></ul></li></ul> <h4 id="登陆流程"><a href="#登陆流程" class="header-anchor">#</a> 登陆流程</h4> <ul><li><p>使用 google 或 facebook 登陆，授权登录后立即注册用户。</p></li> <li><p>兼容平台：</p> <ul><li>facebook 应用中的 facebook webview</li> <li>android 系统</li> <li>ios 系统</li></ul></li> <li><p>登陆流程： 定义在<code>ssr/utils/otherLogin.js</code></p></li> <li><p><img src="/myblog/assets/img/login_flow.9d355830.png" alt=""></p></li> <li><p>流程： 动态加载 sdk -&gt; 初始化数据 -&gt; 授权登陆 -&gt; 获取 google / facebook 用户数据 -&gt; 根据  google / facebook 用户数据 获取 wapcar 用户数据 -&gt; 本地存储用户数据</p></li></ul> <h4 id="登录数据管理"><a href="#登录数据管理" class="header-anchor">#</a> 登录数据管理</h4> <ul><li>用户数据管理: <code>src/utils/loginStorage.js</code></li> <li>用户数据本地存储： Android 平台使用 <code>localStorage</code>+ iframe，IOS平台使用 <code>Cookies</code>。
<ul><li>Android: 	使用 <code>localStorage</code> <ul><li>存在问题：
<ul><li>论坛和帖子的域名为二级域名，与主站域名不一致，localStorage 存储受到同源策略限制不能跨域存储；但在论坛和帖子页面中登陆数据需要同步到主站域名的页面下</li></ul></li> <li>解决方案：
<ul><li>方案一：片段识别符</li> <li>方案二： <code>window.name</code></li> <li>方案三： <code>window.postMessage</code>：通过动态创建 iframe，进行主域和论坛域名通信，封装一个 sendMsg 方法在主域和论坛域名同步保存用户数据 ，每次保存用户数据时，将用户数据同时保存到两个域下。最后采用该方案。</li></ul></li></ul></li> <li>IOS： 使用 <code>Cookies</code> <ul><li>IOS 使用 <code>localStorage</code> 问题： IOS 不支持 iframe 共享登录态给 forum 域名</li> <li>解决方案：使用 <code>Cookies</code> 存储。两个网页一级域名相同，只是二级域名不同，浏览器允许通过设置<code>document.domain</code>共享 Cookie；这种方法只适用于 Cookie 和 iframe 窗口。LocalStorage 和 IndexDB 无法通过这种方法，规避同源政策。</li> <li>使用 Cookies 优点： <a href="https://www.cnblogs.com/cag2050/p/7283927.html" target="_blank" rel="noopener noreferrer">顶级域名和子级域名之间的cookie共享和相互修改、删除<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li>问题: 为什么 Android 和 IOS 用不同存储方式？
<ul><li>A: 刚开始都是用 <code>localStorage</code>，但是 IOS 不支持 iframe 共享登录态给 forum 域名，所以将 IOS 改成 Cookies 保存</li></ul></li> <li>问题： Android 和 IOS 是否可以都用 Cookies 存储？
<ul><li>可以。 都用  Cookies 存储 Android 就不需要 localStorage + iframe 通信</li></ul></li></ul></li> <li>用户数据读取：
<ul><li>用户数据存储在 <code>window.$local</code> 对象中，通过 <code>window.$local</code> 对象获取用户登陆状态和用户数据， <code>window.$local</code> （<code>src/plugin/index.js</code>）通过客户端入口初始化 (<code>entry-client.js</code>中引入)</li></ul></li> <li>参考资料：
<ul><li><a href="https://www.ruanyifeng.com/blog/2016/04/same-origin-policy.html" target="_blank" rel="noopener noreferrer">浏览器同源政策及其规避方法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul> <h2 id="多国方案"><a href="#多国方案" class="header-anchor">#</a> 多国方案</h2> <h3 id="多国区别"><a href="#多国区别" class="header-anchor">#</a> 多国区别</h3> <ul><li>语言变量和环境管理</li> <li>语言文案</li> <li>皮肤主题</li> <li>国家域名</li> <li>资源输出目录</li> <li>路由配置</li> <li>SEO相关配置：tdk、结构化数据等</li></ul> <h3 id="多国变量和环境管理"><a href="#多国变量和环境管理" class="header-anchor">#</a> 多国变量和环境管理</h3> <p><strong>多国变量</strong></p> <ul><li><p>国家及语言代码：</p> <blockquote><p>马来西亚英语：en<br>
印尼语：id<br>
印度英语：in-en<br>
泰语：th-th</p></blockquote></li> <li><p>作用：通过多国变量标识进行接口请求，判断等操作。</p></li> <li><p>本地开发和单页面模式下多国变量标识注入方式：</p> <ul><li><p>在 <code>package.json</code> 文件中 script 脚本配置启动模式,模式中查找相应变量配置文件,配置文件中变量将注入 <code>process.env</code>中 (参考<a href="https://cli.vuejs.org/zh/guide/mode-and-env.html#%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener noreferrer">环境变量和模式<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>)</p></li> <li><p><img src="/myblog/assets/img/spa_model.34602293.png" alt=""></p></li> <li><p>环境变量配置文件<img src="data:image/png;base64,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" alt=""></p></li> <li><p>使用示例：</p> <p><img src="data:image/png;base64,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" alt=""></p></li> <li><p>单页面模式下，通过配置文件中配置注入 <code>process.env</code>，获取<code>process.env.VUE_APP_LANG</code> 语言变量，但在静态化页面中  <code>process.env.VUE_APP_LANG</code> 为 undefined</p></li></ul></li> <li><p>静态化页面过程多国家变量管理：</p> <ul><li><p>首先在运行打包脚本时，通过 node 命令参数 <code>--lang=语言标记</code> 获取。（ introduce 页面中在 <code>create-html/introduce.js</code> ）</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>
    lang <span class="token operator">=</span> <span class="token string">&quot;en&quot;</span><span class="token punctuation">,</span>
    env <span class="token operator">=</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">,</span>
    pageType <span class="token operator">=</span> <span class="token string">&quot;scholarship&quot;</span>
<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'yargs'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>argv<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>然后在打包 web components 组件文件时候，通过 lang 传入参数</p> <p><img src="/myblog/assets/img/lang.896b671f.png" alt=""></p></li> <li><p>在脚本文件中通过传入的 lang 参数获取国家不同接口数据；</p></li> <li><p>在静态化页面中通过 webpack 注入组件的<code>process.env.LANG</code> 变量判断语言国家 ；</p></li></ul></li></ul> <p><strong>环境变量</strong></p> <ul><li>环境分类：
<ul><li>开发环境、生产环境</li></ul></li> <li>区分目的： 涉及域名和接口等需要根据环境区分</li> <li>环境变量注入方式：
<ul><li>单页面模式下：同多国变量注入方式相同，在 <code>package.json</code> 文件中 script 脚本配置。、</li> <li>静态化页面模式下： 同静态化方式多国变量注入方式相同，通过 node 命令行参数注入和 webpack 注入。</li></ul></li></ul> <h4 id="语言管理"><a href="#语言管理" class="header-anchor">#</a> 语言管理</h4> <ul><li><p>多语言插件： <a href="http://kazupon.github.io/vue-i18n/zh/introduction.html" target="_blank" rel="noopener noreferrer">vue-i18n<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li><p>全局默认导出一个 i18n 实例:<code>ssr/utils/i18n.js</code></p> <p><img src="/myblog/assets/img/vue-i18n.7a00fd7e.png" alt=""></p></li> <li><p>静态化：每个静态化的页面都是一个单独的 vue 实例，main.js 中引入默认实例，并获取 webpack 打包时传入语言，最后作为 vue 实例参数传入</p> <p><img src="/myblog/assets/img/vue-i18n2.a3ca1318.png" alt=""></p></li> <li><p>SPA单页:  单独实例化i18n，<code>src/main.js</code></p> <p><img src="/myblog/assets/img/i18.70bb8573.png" alt=""></p></li></ul></li> <li><p>问题： 有些国家存在多种语言文案，如：马来西亚主要使用 马来英语，也有使用 马来语（马来本地语）和 中文（马来亚洲人使用）</p> <ul><li>解决方案：
<ul><li>静态化页面中：通过 node 命令行参数 seconedLang 传入</li> <li>SPA单页应用和服务端渲染中，在使用第二语言的路由对象中的 meta 添加 secondLang 字段
<ul><li>路由配置 <img src="/myblog/assets/img/seconLang_config.f097f509.png" alt=""></li> <li>第二语言使用： <img src="/myblog/assets/img/seconedLang_user.26e82f5f.png" alt=""></li></ul></li></ul></li></ul></li></ul> <h4 id="主题管理"><a href="#主题管理" class="header-anchor">#</a> 主题管理</h4> <p>主题区别主要为 主题皮肤颜色 和 图标</p> <p><strong>皮肤主题管理：</strong></p> <ul><li><p>方案：使用 scss 变量定义主题颜色，在组件编写时使用变量替换颜色值 。</p></li> <li><p>分类：目前主要有两个主题，主站(马来)使用蓝色主题 (main)，泰国和印尼使用 黄色 ( autofun ) 主题。</p></li> <li><p>主题颜色变量定义：使用 scss 变量定义主题颜色，在 <code>ssr/assets/scss/variables</code> 文件中定义颜色变量</p> <p><img src="/myblog/assets/img/scss_var.fe9059a0.png" alt=""></p></li> <li><p>静态化页面中：webpack 引入 scss 主题时使用 <code>sass-loader</code> 中 <code>options.data</code> 引入对象 scss 主题文件，在 <code>create-html/config/webpack.base.config.js</code> 文件</p> <p><img src="/myblog/assets/img/scss-loader.693a700a.png" alt=""></p> <p>getStyleVarByLang() 方法定义：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>  <span class="token function">getStyleVarByLang</span><span class="token punctuation">(</span><span class="token parameter">lang</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>lang<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token string">&quot;th-th&quot;</span><span class="token operator">:</span>
      <span class="token keyword">case</span> <span class="token string">&quot;id&quot;</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token string">&quot;autofun&quot;</span><span class="token punctuation">;</span>
      <span class="token keyword">default</span><span class="token operator">:</span>
        <span class="token keyword">return</span> <span class="token string">&quot;main&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li> <li><p>SPA 单页和本地开发中使用 <code>vue.config.js</code> 文件 配置 scss,vue-cli 中 <a href="https://cli.vuejs.org/zh/guide/css.html#%E5%90%91%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8-loader-%E4%BC%A0%E9%80%92%E9%80%89%E9%A1%B9" target="_blank" rel="noopener noreferrer">scss 配置参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><img src="/myblog/assets/img/scss-loader2.283e95d4.png" alt=""></p></li></ul> <p><strong>图标管理：</strong></p> <ul><li><p>图标分为： 所有主题公共图标、主题图标。</p></li> <li><p>方案：</p> <ul><li><p>首先，在 <code>ssr/config/iconConfig.js</code> 中暴露公共方法 <code>getIcon</code> 获取主题图标，使用对象保存图标，key为名称，value 为图标对象。<img src="/myblog/assets/img/icon.ec12b029.png" alt=""></p></li> <li><p>然后，组件中直接引入该方法使用 <code>getIcon('图标名')</code> 获取图标。</p></li></ul></li></ul> <h4 id="资源管理"><a href="#资源管理" class="header-anchor">#</a> 资源管理</h4> <ul><li>生产环境：
<ul><li>上传至各国域名 CDN</li></ul></li> <li>测试环境：
<ul><li>统一上传至 s3</li></ul></li> <li>本地：
<ul><li>输出目录： dist-static/国家标识/...</li></ul></li></ul> <h4 id="数据管理"><a href="#数据管理" class="header-anchor">#</a> 数据管理</h4> <p>数据管理分为：静态化页面数据管理和 SSR/SPA 页面数据管理</p> <p><strong>静态化页面数据管理</strong></p> <p>使用 localStorage 和 sessionStorage 封装 Storage 对象</p> <p><strong>SSR/SPA 数据管理</strong></p> <ul><li><p>使用库： Vuex</p></li> <li><p>问题和解决方案</p> <ul><li>Q: 多页面（静态化页面）之间 vuex 数据能否共享？
<ul><li>A： 不能。静态化页面数据 Vuex 只能获取当前页面中数据，通过 Chrome 调试工具中 console -&gt;  输入<code>__INITIAL_STATE__</code>  可以查看当前页面可以获取的 Vuex 数据</li></ul></li></ul></li></ul> <h4 id="axios-封装"><a href="#axios-封装" class="header-anchor">#</a> axios 封装</h4> <h2 id="埋点上报"><a href="#埋点上报" class="header-anchor">#</a> 埋点上报</h2> <p>埋点上报平台：</p> <ul><li>自建平台</li> <li>facebook pixel</li></ul> <h3 id="自建上报系统"><a href="#自建上报系统" class="header-anchor">#</a> 自建上报系统</h3> <ul><li><p>作用： 统计上报浏览数据</p></li> <li><p>打点脚本文件目录： <code>ssr/lgs/dot.js</code></p></li> <li><p>上报类型：</p> <ul><li>主动上报埋点：用于点击事件，使用 <code>commit()</code></li> <li>落地页的埋点:  <code>pageview()</code></li> <li>滚动上报： <code>scroll()</code></li></ul></li> <li><p>上报数据重构原因：</p> <ul><li>规则修改：产品重新定制了上报数据规则</li> <li>原有上班系统存在问题：
<ul><li>传统的ajax请求，如果我们在监听中直接发送ajax请求，就会发现请求被浏览器abort了，无法发送出去。在页面卸载的时候，浏览器并不能保证异步的请求能够成功发出去，因此当发生页面跳转时，无法准确统计跳转来源页面。</li> <li>滚动上报通过监听滚动事件，计算位置上报。</li></ul></li> <li>原有上报系统解决方案：
<ul><li>当遇到跳转上报事件时，先通过 sessionStorage 存入待上报数据和页面信息，跳转后的页面中  mounted 钩子增加 lgs.pageview() 方法将数据上报。</li></ul></li> <li>原有上报系统解决方案存在问题：1.新增多余数据存取；2.所有需要统计跳转进入的页面 Mounted 钩子中都需要调用 pageView 方法上报；3.监听滚动事件性能低下。</li></ul></li> <li><p>数据上报重构方案：</p> <ul><li><p>方案1: 发送同步的ajax请求。</p> <ul><li><p>统计和诊断代码通常要在 <code>unload</code> 或者 <code>beforeunload (en-US)</code> 事件处理器中发起一个同步 <code>XMLHttpRequest</code> 来发送数据。JavaScript 会等到服务器响应就绪才继续执行，导致同步的 <code>XMLHttpRequest</code> 迫使用户代理延迟卸载文档，并使得下一个导航出现的更晚。</p></li> <li><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'unload'</span><span class="token punctuation">,</span> logData<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">logData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    client<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/log&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 第三个参数表明是同步的 xhr</span>
    client<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Content-Type&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;text/plain;charset=UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    client<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>analyticsData<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li> <li><p>这种方式虽然有效，但是用户需要等待请求结束才可以关闭页面。对用户的体验不好。</p></li> <li><p>否则，如果用户跳转或则关闭离开当前页面会导致当前页面上传数据中断</p></li></ul></li> <li><p>方案2：通过在卸载事件处理器中创建一个图片元素并设置它的 src 属性的方法来延迟卸载以保证数据的发送。因为绝大多数用户代理会延迟卸载以保证图片的载入，所以数据可以在卸载事件中发送。</p> <ul><li>缺点：编码模式不好，其中的一些甚至并不可靠而且会导致非常差的页面载入性能。</li></ul></li> <li><p><strong>方案3：使用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Navigator/sendBeacon" target="_blank" rel="noopener noreferrer"><code>navigator.sendBeacon</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 发送异步请求 [采用方案]</strong></p> <ul><li>**<code>sendBeacon()</code>**方法会使用户代理在有机会时异步地向服务器发送数据，同时不会延迟页面的卸载或影响下一导航的载入性能。</li></ul></li></ul></li> <li><p>滚动上报重构方案：</p> <ul><li><p>传统方式：调用目标元素的<a href="https://developer.mozilla.org/en/docs/Web/API/Element/getBoundingClientRect" target="_blank" rel="noopener noreferrer"><code>getBoundingClientRect()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>方法，得到它对应于视口左上角的坐标，再判断是否在视口之内。</p> <ul><li>这种方法的缺点是：<code>scroll</code>事件密集发生，计算量很大，容易造成<a href="https://www.ruanyifeng.com/blog/2015/09/web-page-performance-in-depth.html" target="_blank" rel="noopener noreferrer">性能问题<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</li></ul></li> <li><p>使用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/IntersectionObserver" target="_blank" rel="noopener noreferrer"><code>intersectionObserver</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 监听元素滚动：</p> <ul><li><p>IntersectionObserver: 用来监听一个目标元素是否出现在web页面的可视区域，出现后触发回调方法。</p> <p><img src="/myblog/assets/img/intersectionObserver.95d9c70d.gif" alt=""></p></li> <li><p>实现： 通过遍历传入列表，给列表每一项创建 <code>IntersectionObserver</code> 对象，回调中添加打点上报数据，并取消观测。</p></li> <li><p>使用：通过 refs 获取观测对象传入方法中。</p></li></ul></li></ul></li></ul> <h2 id="pwa-相关"><a href="#pwa-相关" class="header-anchor">#</a> PWA 相关</h2> <h3 id="pwa"><a href="#pwa" class="header-anchor">#</a> PWA</h3> <ul><li><p>概念：</p> <ul><li>PWA 全称 Progressive Web App，即渐进式 WEB 应用。</li> <li>PWA 应用是一个网页, 可以通过搜索引擎发现。</li> <li>使用 Manifest 和 Service Worker 来实现 PWA 的安装和离线等功能。</li></ul></li> <li><p>PWA 特性：</p> <ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps/Introduction#Advantages_of_web_applications#discoverable" target="_blank" rel="noopener noreferrer">可发现（Discoverable）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, 可以通过搜索引擎发现。</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps/Introduction#Advantages_of_web_applications#installable" target="_blank" rel="noopener noreferrer">可安装（Installable）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, 可以出现在设备的主屏幕。</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps/Introduction#Advantages_of_web_applications#linkable" target="_blank" rel="noopener noreferrer">可链接（Linkable）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, 可以简单地通过 URL 分享。</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps/Introduction#Advantages_of_web_applications#network_independent" target="_blank" rel="noopener noreferrer">独立于网络（Network independent）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, 可以在离线状态或者是在网速很差的情况下运行。</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps/Introduction#Advantages_of_web_applications#progressive" target="_blank" rel="noopener noreferrer">渐进式（Progressive）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, 在老版本的浏览器仍旧可以使用，在新版本的浏览器上可以使用全部功能。</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps/Introduction#Advantages_of_web_applications#re-engageable" target="_blank" rel="noopener noreferrer">可重入（Re-engageable）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, 无论何时有新的内容，都可以发送通知。</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps/Introduction#Advantages_of_web_applications#responsive" target="_blank" rel="noopener noreferrer">响应式（Responsive）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, 在任何具有屏幕和浏览器的设备上可以正常使用——包括手机、平板电脑、笔记本、电视、冰箱等。</li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps/Introduction#Advantages_of_web_applications#safe" target="_blank" rel="noopener noreferrer">安全（Safe）<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, 在用户、应用和服务器之间的连接是安全的，第三方无法访问你的敏感数据。</li></ul></li> <li><p>主要结构：</p> <ul><li>提供 <a href="https://developer.mozilla.org/zh-CN/docs/Web/Progressive_web_apps/App_structure#app_shell_%E6%A6%82%E5%BF%B5" target="_blank" rel="noopener noreferrer">App Shell<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 基本外壳可以添加至主屏幕。使用 Manifest 实现。</li> <li>提供离线缓存功能。使用 service worke 实现。</li> <li>提供消息推送功能。使用 service worke 实现。</li></ul></li></ul> <h3 id="app-shell"><a href="#app-shell" class="header-anchor">#</a> App Shell</h3> <ul><li>概念：提供一个 Web APP 的外壳，然后缓存它，以便在后续访问时可以离线使用，然后再加载应用程序的所有内容。这样，下次有人从设备访问应用程序时，UI 立即从缓存加载；如果缓存数据不可用的话，再从服务器请求新内容。
<ul><li>从 HTML 的角度，App Shell 就是 content 节之外的内容。再使用 JS 处理模板生成 content 中的内容。</li></ul></li> <li>优点：
<ul><li>这种结构的页面很快，给用户的感觉也很快：用户会立即看到内容而不是加载动画或空白页。</li> <li>如果网络连接不可用，允许离线访问网站。</li> <li>网站感觉就像一个原生应用，交互及时、性能可靠。</li></ul></li></ul> <h3 id="manifest"><a href="#manifest" class="header-anchor">#</a> Manifest</h3> <p>可安装网站需要满足以下条件：</p> <ul><li>一份网页清单，填好<a href="https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps/Add_to_home_screen#manifest" target="_blank" rel="noopener noreferrer">正确的字段<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>网站的协议必须是安全的（即使用 HTTPS 协议）</li> <li>一个在设备上代表应用的图标</li> <li>一个注册好的 Service Worker，可以让应用离线工作（这仅对于安卓设备上的 Chrome 浏览器是必需的）</li></ul> <p>Manifest: 离线访问的关键在于一份网页清单，它通过 JSON 形式列举了网站的所有信息。</p> <p>它通常位于网页应用的根目录，包含一些有用的信息，比如应用的标题、在移动设备操作系统上显示的代表该应用的不同大小的图标（例如主屏图标）的路径，和用于加载页或启动画面的背景颜色。浏览器需要这些信息来安装 web 应用并使其在主屏上显示。</p> <p>参考资料：</p> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/Progressive_web_apps/Installable_PWAs#%E6%B8%85%E5%8D%95%E6%96%87%E4%BB%B6_(manifest)" target="_blank" rel="noopener noreferrer">清单文件 (Manifest)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="service-worker"><a href="#service-worker" class="header-anchor">#</a> Service Worker</h3> <ul><li><p>概念： Service Worker是浏览器和网络之间的虚拟代理。</p></li> <li><p>特点：</p> <ul><li><p>运行在一个与页面 JavaScript 主线程独立的线程上，单独的作用域范围，单独的运行环境和执行线程。</p></li> <li><p>不能操作页面 DOM。但可以通过事件机制来处理。</p></li> <li><p>不受页面刷新的影响，可以监听和截拦作用域范围内所有页面的 HTTP 请求。</p></li> <li><p>API 是异步非阻塞的，并且可以在不同的上下文之间发送和接收信息。</p></li> <li><p>它设计为完全异步，同步API（如<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest" target="_blank" rel="noopener noreferrer">XHR<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>和<a href="https://developer.mozilla.org/zh-CN/docs/conflicting/Web/API/Web_Storage_API" target="_blank" rel="noopener noreferrer">localStorage<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）不能在service worker中使用。</p></li> <li><p>事件驱动型服务线程。可分配给 Service Worker 一些任务，并通过基于 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noopener noreferrer">Promise<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 的方法在任务完成时收到结果。</p></li> <li><p>网站必须使用 HTTPS。除了使用本地开发环境调试时(如域名使用 localhost)。</p> <ul><li><blockquote><p>为什么要求网站必须是HTTPS？</p> <p>因为service worker权限太大能拦截所有页面的请求，使用 http 的网站安装 service worker 很容易被攻击,修改网络请求的能力暴露给中间人攻击会非常危险</p></blockquote></li></ul></li></ul></li> <li><p>生命周期：注册、sw.js 文件下载、安装，激活。</p> <ul><li>流程图<img src="/myblog/assets/img/service-work-lifrcycle.daf39e4d.png" alt=""></li></ul></li></ul> <h3 id="离线缓存"><a href="#离线缓存" class="header-anchor">#</a> 离线缓存</h3> <ul><li>Service Workers  缓存：Service Workers  能够拦截 HTTP 请求，进入任何传入的 HTTP 请求，并决定想要如何响应。在你的 Service Worker 中，可以编写逻辑来决定想要缓存的资源，以及需要满足什么条件和资源需要缓存多久。
<ul><li>与 HTTP 缓存比较：Web 服务器可以使用 Expires 首部来通知 Web 客户端，它可以使用资源的当前副本，直到指定的“过期时间”。反过来，浏览器可以缓存此资源，并且只有在有效期满后才会再次检查新版本。使用 HTTP 缓存意味着你要依赖服务器来告诉你何时缓存资源和何时过期。</li></ul></li></ul> <ul><li><p>**注册：**使用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/ServiceWorkerContainer/register" target="_blank" rel="noopener noreferrer"><code>ServiceWorkerContainer.register()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 方法在该站点注册。其内容在 sw.js 文件中，可以在注册成功后执行。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">'serviceWorker'</span> <span class="token keyword">in</span> navigator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    navigator<span class="token punctuation">.</span>serviceWorker<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'/sw.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>**安装：**sw.js 监听 install 事件、<code>e.waitUntil()</code>等待 service worker 安装完成、Cache API 开启了一个缓存，并且将我们的应用所需要缓存的文件全部添加进去，当我们再次加载这些资源时，由请求 URL 确定的对应缓存就是可用的。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'install'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'[Service Worker] Install'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  e<span class="token punctuation">.</span><span class="token function">waitUntil</span><span class="token punctuation">(</span>
    caches<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>cacheName<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">cache</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'[Service Worker] Caching all: app shell and content'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> cache<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>contentToCache<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>API 介绍：
<ul><li><code>e.waitUntil()</code>：等待 service worker 安装完成。<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/ExtendableEvent/waitUntil" target="_blank" rel="noopener noreferrer"><code>ExtendableEvent.waitUntil</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>方法告诉事件分发器该事件仍在进行。这个方法也可以用于检测进行的任务是否成功。在服务工作线程中，这个方法告诉浏览器事件一直进行，直至 promise 解决，浏览器不应该在事件中的异步操作完成之前终止服务工作线程。</li> <li><code>caches</code> 是一个特殊的 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/CacheStorage" target="_blank" rel="noopener noreferrer"><code>CacheStorage</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 对象，它能在 Service Worker 指定的范围内提供数据存储的能力。因为 Web Storage 的执行是同步的，在 Service Worker 中使用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Web_Storage_API" target="_blank" rel="noopener noreferrer">Web Storage<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 将不会有效果，所以我们使用 Cache API 作为替代。</li></ul></li></ul></li> <li><p><strong>激活：</strong> 监听<code>activate</code> 事件。删除那些我们已经不需要的文件或者做一些清理工作。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'activate'</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> currentCaches <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token constant">PRECACHE</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">//遍历缓存,查找不存在于自定义缓存列表中的浏览器缓存，并清除</span>
  event<span class="token punctuation">.</span><span class="token function">waitUntil</span><span class="token punctuation">(</span>
    caches<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">cacheNames</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token comment">//查找缓存</span>
      <span class="token keyword">return</span> cacheNames<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">cacheName</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span>currentCaches<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>cacheName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">cachesToDelete</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>cachesToDelete<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">cacheToDelete</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> caches<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>cacheToDelete<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//清除缓存</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> self<span class="token punctuation">.</span>clients<span class="token punctuation">.</span><span class="token function">claim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li> <li><p>**响应请求：**通过 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/FetchEvent" target="_blank" rel="noopener noreferrer"><code>FetchEvent</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 事件去响应请求。通过使用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/FetchEvent/respondWith" target="_blank" rel="noopener noreferrer"><code>FetchEvent.respondWith</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 方法，你可以任意修改对于这些请求的响应。拦截页面请求，现在缓存中查找，未找到才去请求。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'fetch'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Handling fetch event for'</span><span class="token punctuation">,</span> event<span class="token punctuation">.</span>request<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token comment">//事件处理程序侦听 fetch 事件。当触发时返回一个promise给受控页面。</span>
  event<span class="token punctuation">.</span><span class="token function">respondWith</span><span class="token punctuation">(</span>
    <span class="token comment">// promise在 Cache 对象中查询第一个匹配URL请求。如果没有发现匹配项，该代码将转而从网络获取响应。</span>
    caches<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>request<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Found response in cache:'</span><span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> response<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'No response found in cache. About to fetch from network...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">return</span> <span class="token function">fetch</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>request<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Response from network is:'</span><span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> response<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Fetching failed:'</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">throw</span> error<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div></li></ul> <p>参考资料：</p> <ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Service_Worker_API" target="_blank" rel="noopener noreferrer">Service Worker API MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="消息推送"><a href="#消息推送" class="header-anchor">#</a> 消息推送</h3> <ul><li><p>在 Service Worker 使用 <a href="https://developer.mozilla.org/en-US/docs/Web/API/Push_API" target="_blank" rel="noopener noreferrer">推送 API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>和<a href="https://developer.mozilla.org/en-US/docs/Web/API/Notifications_API" target="_blank" rel="noopener noreferrer">通知 API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>实现。</p> <ul><li>推送 API 可以用来从服务端推送新的内容而无需客户端介入，它是由应用的 Service Worker 来实现的；</li> <li>通知功能则可以通过 Service Worker 来向用户展示一些新信息，或者至少提醒用户应用已经更新了某些功能。</li> <li>这些工作是在浏览器外部实现的，所以即使应用被隐藏到后台甚至被关闭了，我们仍然能够推送更新或者通知给用户。</li></ul></li> <li><p>通知实现：</p> <ul><li>注册 Service Worker 成功后，为了能够显示通知，我们需要先请求用户的授权，一旦用户选择授权，这个授权结果对通知 API 和推送 API 两者都有效。</li> <li>创建通知：<code>new Notification(notifTitle, options);</code></li></ul></li> <li><p>消息推送实现：</p> <ul><li><p>注册 Service Worker 成功后，立即开启该客户端的消息推送订阅功能</p> <ul><li><p>使用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/PushManager" target="_blank" rel="noopener noreferrer"><code>PushManager</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 来订阅新用户。这个方法支持传递两个参数：</p> <ul><li>第一个是 <code>userVisibleOnly: true</code>，意思是发送给用户的所有通知对他们都是可见的</li> <li>第二个是 <code>applicationServerKey</code>，这个参数包含我们之前从服务端取得并转化的 VAPID key。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">return</span> registration<span class="token punctuation">.</span>pushManager<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">userVisibleOnly</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">applicationServerKey</span><span class="token operator">:</span> convertedVapidKey
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul></li> <li><p>为了方便之后的推送，为每个客户端简单生成一个标识</p></li> <li><p>最后，将生成的客户端订阅信息存储在自己的服务器上：使用 fetch 将 subscription 以 JSON 的方式发送给服务器。</p></li></ul></li></ul> <h3 id="实现"><a href="#实现" class="header-anchor">#</a> 实现</h3> <ul><li><p>在 <code>create-html/common</code> 下创建 清单 minifest 、 service worker 脚本 sw.js 文件、实现 service worker 注册和推送的文件。</p> <p><img src="/myblog/assets/img/service-worker.8871d112.png" alt=""></p></li> <li><p>客户端激活脚本 main.js 中引入实现 service worker 注册和推送文件。</p> <p><img src="/myblog/assets/img/service-worker3.b0f09ff5.png" alt=""></p></li> <li><p>在构建客户端激活脚本 main.js 时，将 客户端清单文件 service worker 脚本 sw.js 通过 webpack 的 CopyPlugin 插件复制到构建的页面资源中。</p> <p><img src="/myblog/assets/img/service-worker2.08be92c6.png" alt=""></p></li></ul> <h3 id="参考资料"><a href="#参考资料" class="header-anchor">#</a> 参考资料</h3> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/Progressive_web_apps" target="_blank" rel="noopener noreferrer">渐进式 Web 应用 MDN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://segmentfault.com/a/1190000012353473" target="_blank" rel="noopener noreferrer">PWA实现<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://juejin.cn/post/6844904052166230030" target="_blank" rel="noopener noreferrer">PWA面试题汇总<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="seo-相关"><a href="#seo-相关" class="header-anchor">#</a> SEO 相关</h2> <ul><li><a href="https://support.google.com/webmasters/answer/7451184?hl=zh-Hans" target="_blank" rel="noopener noreferrer">搜索引擎优化 (SEO) 新手指南<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="tdk"><a href="#tdk" class="header-anchor">#</a> TDK</h3> <ul><li><p>概述： TDK 指页面 title、descrition、keywords；</p> <ul><li><p><img src="/myblog/assets/img/tdk.02191792.png" alt=""></p></li> <li><p>tdk 对 seo 影响：</p> <ul><li><a href="http://www.tianying888.com/gongsidongtai/70326.html" target="_blank" rel="noopener noreferrer">网站TDK对SEO有什么影响<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><p>静态化页面 tkd 注入：tkd 保存在 <code>create-html/config/页面名称</code> ，在静态化时候 引入 context 中。</p></li> <li><p>SSR页面 tdk 注入：页面/组件中定义 <code>head()</code> 方法返回页面 tdk</p> <ul><li><p><img src="/myblog/assets/img/tdk_head.ea698c32.png" alt=""></p></li> <li><p>在 <code>src/mixins/tdk.js</code> 中获取页面/组件中 head 对象，并解析对象注入字段到  context (服务端) 和 document</p></li> <li><p>在模板 <code>index.template.html</code> 中定义 tdk 并注入数据</p></li></ul></li></ul></li></ul> <h3 id="结构化数据"><a href="#结构化数据" class="header-anchor">#</a> 结构化数据</h3> <ul><li><a href="https://developers.google.com/search/docs/guides/search-gallery?hl=zh-cn" target="_blank" rel="noopener noreferrer">google 结构化数据介绍<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="站点地图-sitemap"><a href="#站点地图-sitemap" class="header-anchor">#</a> 站点地图 sitemap</h3> <ul><li><a href="https://support.google.com/webmasters/answer/156184?hl=zh-Hans" target="_blank" rel="noopener noreferrer">了解站点地图<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="css-对-seo影响"><a href="#css-对-seo影响" class="header-anchor">#</a> CSS 对 SEO影响</h3> <ul><li>隐藏内容元素对SEO影响：
<ul><li>css 中隐藏内容元素：
<ul><li><code>display: none</code></li> <li><code>visibility: hidden</code> 可见性为隐藏</li> <li><code>overflow:hidden</code> 隐藏溢出</li></ul></li> <li><code>display:none</code> 和 <code>overflow:hidden</code> 大量地被使用会被SEO认为作弊</li> <li>常见问题：
<ul><li>使用 <code>display: none</code> 控制 tab 元素显示隐藏，但是  <code>display: none</code> 大量地被使用会被SEO认为作弊
<ul><li>解决方式： 使用<code>height: 0</code>；控制不显示元素方式代替 <code>display:none</code>；</li></ul></li></ul></li></ul></li></ul> <p><strong>参考</strong></p> <ul><li><a href="https://zhuanlan.zhihu.com/p/76258427" target="_blank" rel="noopener noreferrer">浅谈Google SEO里的结构化数据优化<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="反爬虫"><a href="#反爬虫" class="header-anchor">#</a> 反爬虫</h3> <ul><li>需求： 经销商详细信息页面为防止被爬虫，需要加密处理</li> <li>反爬虫方案：</li> <li>经销商详细信息页面反爬虫方案：
<ul><li>接口数据加密：
<ul><li>加密库: <a href="https://www.npmjs.com/package/xxtea" target="_blank" rel="noopener noreferrer"><code>xxtea-node</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>解密方法：在经销商静态化脚本中，获取数据后通过 <code>decryptToString</code> 解密。</li></ul></li> <li>前端展示数据反爬虫:
<ul><li>使用技术： <code>@font-face</code> 字体反爬虫</li> <li>使用步骤：
<ul><li>创建指定字符的自定义字体</li> <li>ttf 转 svg</li> <li>构建映射关系</li> <li>前端使用 css 字体
<ul><li>下载字体资源：字体资源保存在 <code>ssr/assets/font/iconfont/</code></li> <li>注入字体资源： 页面静态化时，通过 context对象 中注入字体文件<img src="/myblog/assets/img/fontEncryption.d57ce520.png" alt=""></li> <li>解析字体资源：模板文件增加 <code>&lt;link/&gt;</code> 引入字体文件<img src="/myblog/assets/img/font2.dd4984ed.png" alt=""></li> <li>测试：通过打开 chrome 浏览器元素查看器查看 <code>&lt;link/&gt;</code> 中资源中是否有 fontFamily。  <img src="/myblog/assets/img/font3.21a1f712.png" alt=""></li> <li>显示结果：加密以后字体显示chrome工具查看时为乱文<img src="/myblog/assets/img/font4.68264305.png" alt=""></li></ul></li></ul></li></ul></li></ul></li></ul> <h3 id="参考资料-2"><a href="#参考资料-2" class="header-anchor">#</a> 参考资料</h3> <ul><li><p>[<a href="https://segmentfault.com/a/1190000021403816" target="_blank" rel="noopener noreferrer">深入细枝末节，字体反爬虫到底怎么一回事<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>](https://segmentfault.com/a/1190000021403816)</p></li> <li><p><a href="https://blog.csdn.net/weixin_44321942/article/details/89192588" target="_blank" rel="noopener noreferrer">反爬虫之FONT-FACE拼凑式<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://cloud.tencent.com/developer/article/1008733" target="_blank" rel="noopener noreferrer">反击爬虫，前端工程师的脑洞可以有多大？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul> <h2 id="项目优化"><a href="#项目优化" class="header-anchor">#</a> 项目优化</h2> <h3 id="seo-相关优化"><a href="#seo-相关优化" class="header-anchor">#</a> SEO 相关优化</h3> <ul><li>原本使用<code>&lt;a&gt;</code>标签包裹<code>&lt;img&gt;</code> 和<code>&lt;p&gt;</code> ，这种结构对爬虫不好，爬虫爬取 <code>&lt;a&gt;</code> 标签内应该需要文本，但又需要保持点击图片和文本跳转 <img src="/myblog/assets/img/v-link.bd5e13f3.png" alt=""> <ul><li>优化： 使用 <code>&lt;a&gt;</code> 标签包裹链接，使用自定义指令 <code>v-link</code> 获取点击区域 <code>&lt;div&gt;</code> 内的<code>&lt;a&gt;</code> 标签的链接，添加点击事件</li></ul></li></ul> <h3 id="webpack-相关优化"><a href="#webpack-相关优化" class="header-anchor">#</a> Webpack 相关优化</h3> <ul><li>文件引入使用 <code>require.context</code> 统一引入语言字典和 VueX 模块</li></ul> <h3 id="vue-相关优化"><a href="#vue-相关优化" class="header-anchor">#</a> Vue 相关优化</h3> <ul><li><p>axios创建实例方式优化</p> <ul><li><p>项目中 axios 使用方法:</p> <ul><li>直接引入axios默认实例，并修改axios默认配置</li></ul> <p><img src="/myblog/assets/img/badaios.8589204a.jpg" alt=""></p> <ul><li>问题：
<ul><li>当其他地方多处引入axios默认实例并修改默认配置，导致axios默认配置被覆盖</li> <li>共用axios拦截器</li></ul></li> <li>分析：
<ul><li>axios中会使用默认配置创建一个默认实例，并导出默认实例，当引入 axios时，引入axios默认实例 (lib/core/axios.js)</li> <li><a href="https://github.com/axios/axios/blob/master/lib/axios.js" target="_blank" rel="noopener noreferrer">源码<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><img src="/myblog/assets/img/axios实例.e5f751b4.png" alt=""></li></ul></li></ul></li> <li><p>优化:</p> <ul><li>引入地方创建新的实例，修改实例配置，避免配置被覆盖</li> <li><img src="/myblog/assets/img/goodaxios.f5637e89.jpg" alt=""></li></ul></li></ul></li></ul> <h3 id="性能优化"><a href="#性能优化" class="header-anchor">#</a> 性能优化</h3> <h3 id="html-优化"><a href="#html-优化" class="header-anchor">#</a> HTML 优化</h3> <ul><li><p>页面静态化:</p> <ul><li><a href="https://ssr.vuejs.org/zh/" target="_blank" rel="noopener noreferrer">VUE-SSR<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><p>预渲染：</p> <ul><li>使用插件： <a href="https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue" target="_blank" rel="noopener noreferrer">prerender-spa-plugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><p>骨架屏：等待页面加载的时间越长，用户在页面加载完成之前离开的概率就越大。为了达到这个目的，网页加载完成前，我们应该用占位符在最终资源将会加载的地方展示最起码的视图骨架。</p> <ul><li>使用插件： <a href="https://github.com/lavas-project/vue-skeleton-webpack-plugin" target="_blank" rel="noopener noreferrer">vue-skeleton-webpack-plugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul> <h3 id="js-优化"><a href="#js-优化" class="header-anchor">#</a> JS 优化</h3> <ul><li>JS 脚本延迟加载和异步加载</li></ul> <h3 id="css优化"><a href="#css优化" class="header-anchor">#</a> CSS优化</h3> <h3 id="vue-优化"><a href="#vue-优化" class="header-anchor">#</a> VUE 优化</h3> <h3 id="打包优化"><a href="#打包优化" class="header-anchor">#</a> 打包优化</h3> <p>大部分用户不会用到一个网站的所有页面，但我们通常的做法却是把所有的功能都打包进一个很大的文件里面。一个 <code>bundle.js</code> 文件的大小可能会有几 M，一个打包后的 <code>style.css</code> 会包含网站的一切样式，从 CSS 结构定义到网站在各个版本的样式：移动端、平板、桌面、打印版等等。</p> <p>通常来说，只加载一个较大的打包后文件会比加载很多个小文件要快一些，但如果用户并不是一开始就需要所有的资源，我们就可以首先加载那些关键的资源，其他的资源等到需要的时候再去加载它。</p> <p>将所有文件打包到一起是不良做法，因为浏览器在把计算结果渲染到屏幕之前，需要先把 HTML、CSS 和 JavaScript 下载下来</p> <h3 id="图片优化"><a href="#图片优化" class="header-anchor">#</a> 图片优化</h3> <ul><li>图片懒加载： <a href="https://github.com/hilongjw/vue-lazyload" target="_blank" rel="noopener noreferrer">vue-lazyload<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>本地图片压缩: tinyPNG，可以在不过分降低画质的情况下压缩文件的大小</li> <li>网络图片裁剪</li> <li>使用预加载图</li> <li>使用合适图片格式
<ul><li>大小：<code>PNG ≈ JPG &gt; GIF</code></li> <li>透明性：<code>PNG &gt; GIF &gt; JPG</code></li> <li>色彩丰富程度：<code>JPG &gt; PNG &gt;GIF</code></li> <li>兼容程度：<code>GIF ≈ JPG &gt; PNG</code></li></ul></li> <li>直接使用CSS替代部分背景图片
<ul><li>404 页面背景图中小圆圈使用 css 绘制</li></ul></li> <li>雪碧图(未使用)
<ul><li>优点：减少了大量的http请求。</li> <li>缺点：背景定位麻烦</li></ul></li></ul> <h3 id="网络优化"><a href="#网络优化" class="header-anchor">#</a> 网络优化</h3> <ul><li>Service Worker</li> <li>避免 waterfall requests
<ul><li><a href="https://www.jianshu.com/p/c7e0dad634db" target="_blank" rel="noopener noreferrer">简单前端性能优化之Waterfall<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul> <h3 id="参考资料-3"><a href="#参考资料-3" class="header-anchor">#</a> 参考资料</h3> <ul><li><a href="https://web.dev/rail/" target="_blank" rel="noopener noreferrer">使用RAIL模型评估性能<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.cnblogs.com/wenxuehai/p/14236426.html" target="_blank" rel="noopener noreferrer">性能测评工具lighthouse的使用<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.cn/post/6844904099515727886?from=timeline&amp;isappinstalled=0%3Ffrom%3Dtimeline&amp;isappinstalled=0" target="_blank" rel="noopener noreferrer">搞懂性能优化<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.im/post/6844904131686039559#heading-2" target="_blank" rel="noopener noreferrer">项目中的优化<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.im/post/6844904195707895816" target="_blank" rel="noopener noreferrer">前端性能优化总结<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="协作流程管理"><a href="#协作流程管理" class="header-anchor">#</a> 协作流程管理</h2> <h3 id="协作工具"><a href="#协作工具" class="header-anchor">#</a> 协作工具</h3> <ul><li>开发流程协作工具： git + gitee</li> <li>自动化构建工具：jekiens</li></ul> <h3 id="规范"><a href="#规范" class="header-anchor">#</a> 规范</h3> <h4 id="git-规范"><a href="#git-规范" class="header-anchor">#</a> Git 规范</h4> <ul><li>git分支类型主要有：
<ul><li>maste分支：上线分支；</li> <li>功能分支：针对某个功能开发，基于master分支创建一个功能分支，命名为feat-xxxx；</li> <li>bug修复分支：针对线上某个bug进行修复，基于master分支创建一个bug修复分支，命名为fix-xxxx；</li> <li>t1分支：测试服分支</li></ul></li> <li>参考：
<ul><li><a href="http://www.ruanyifeng.com/blog/2015/08/git-use-process.html" target="_blank" rel="noopener noreferrer">Git 使用规范流程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul> <h4 id="代码规范"><a href="#代码规范" class="header-anchor">#</a> 代码规范</h4> <ul><li>代码格式化工具：
<ul><li>vscode + eslint 自动格式化</li> <li>参考 <a href="https://segmentfault.com/a/1190000021143326" target="_blank" rel="noopener noreferrer">ESlint + stylelint + VSCode自动格式化代码(2020)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li>代码格式规范
<ul><li>组件名称： 大驼峰命名</li> <li>重复使用两次以上的模块封装成组件</li></ul></li></ul> <blockquote><p><a href="https://amp.dev/documentation/guides-and-tutorials/develop/custom-javascript/" target="_blank" rel="noopener noreferrer">amp<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br> <a href="https://ssr.vuejs.org/zh/" target="_blank" rel="noopener noreferrer">vue ssr<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br> <a href="http://jenkins.wapcar.my/" target="_blank" rel="noopener noreferrer">jenkins地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br> <a href="http://swagger.wapcar.my/doc.html" target="_blank" rel="noopener noreferrer">接口文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br> <a href="https://docs.google.com/spreadsheets/d/1EKSN7ttAfY1oCfQ8UiTrm7OjMsxKyJG5njsvaotJtgg/edit#gid=0" target="_blank" rel="noopener noreferrer">多国翻译文案<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h2 id="项目难点和解决方案"><a href="#项目难点和解决方案" class="header-anchor">#</a> 项目难点和解决方案</h2> <h3 id="平台兼容性"><a href="#平台兼容性" class="header-anchor">#</a> 平台兼容性</h3> <h4 id="h5平台兼容性"><a href="#h5平台兼容性" class="header-anchor">#</a> H5平台兼容性</h4> <p>兼容平台：</p> <ul><li>android</li> <li>ios</li> <li>app webview</li> <li>facebook app webview
<ul><li>android</li> <li>ios</li></ul></li></ul> <h2 id="相关原理"><a href="#相关原理" class="header-anchor">#</a> 相关原理</h2> <h4 id="ssr"><a href="#ssr" class="header-anchor">#</a> SSR</h4> <ul><li><a href="http://www.ayqy.net/blog/csr-vs-ssr-vs-prerendering-vs-hydration/#articleHeader3" target="_blank" rel="noopener noreferrer">前端渲染模式的探索<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.cn/post/6889216059832958990" target="_blank" rel="noopener noreferrer">细数 SSR 的利与弊<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h3 id="功能需求"><a href="#功能需求" class="header-anchor">#</a> 功能需求</h3> <h4 id="经销商"><a href="#经销商" class="header-anchor">#</a> 经销商</h4> <h4 id="评论"><a href="#评论" class="header-anchor">#</a> 评论</h4> <h4 id="登陆"><a href="#登陆" class="header-anchor">#</a> 登陆</h4> <h4 id="埋点上报-2"><a href="#埋点上报-2" class="header-anchor">#</a> 埋点上报</h4> <h4 id="新增国家"><a href="#新增国家" class="header-anchor">#</a> 新增国家</h4> <h2 id="其他项目"><a href="#其他项目" class="header-anchor">#</a> 其他项目</h2> <h4 id="amp-页面"><a href="#amp-页面" class="header-anchor">#</a> AMP 页面</h4> <h6 id="参考资料-4"><a href="#参考资料-4" class="header-anchor">#</a> 参考资料</h6> <ul><li><a href="https://amp.dev/zh_cn/" target="_blank" rel="noopener noreferrer">AMP文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h4 id="android-app-与-h5-混合"><a href="#android-app-与-h5-混合" class="header-anchor">#</a> Android APP 与 H5 混合</h4> <ul><li>概述：Android APP 中使用 webview 内嵌 H5页面</li></ul> <h5 id="难点"><a href="#难点" class="header-anchor">#</a> 难点</h5> <ul><li>h5 跳转 Android 原生页面</li> <li>webview 和  h5 用户数据通信</li> <li>h5调用 webview 原生登陆弹窗</li></ul> <h4 id="pc-端"><a href="#pc-端" class="header-anchor">#</a> PC 端</h4> <h5 id="路由管理"><a href="#路由管理" class="header-anchor">#</a> 路由管理</h5> <h6 id="问题和解决方案"><a href="#问题和解决方案" class="header-anchor">#</a> 问题和解决方案</h6> <ul><li><p>路由重复问题： 路由重复如何解决？如： 经销商品牌页面和经销商详细信息页面路由模式相同（固定路由和层级相同），动态路由路由匹配:<code>&quot;/dealers/:name&quot;</code> , <code>&quot;/dealers/:brand&quot;</code>无法区分页面</p> <ul><li><p>解决方案:</p> <ul><li>页面内通过匹配路由(正则匹配)显示不同组件</li> <li>组件中添加导航守卫(正则匹配)</li> <li>路由<a href="https://router.vuejs.org/zh/guide/essentials/dynamic-matching.html#%E6%8D%95%E8%8E%B7%E6%89%80%E6%9C%89%E8%B7%AF%E7%94%B1%E6%88%96-404-not-found-%E8%B7%AF%E7%94%B1" target="_blank" rel="noopener noreferrer">高级匹配模式<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li><p>三种方案都需要正则匹配路径</p> <ul><li><p>原因：</p> <ul><li><p>new VueRouter() -&gt; createMatcher() -&gt; createRouteMap(routes) -&gt; pathList/pathMap/nameMap （path/name -&gt; RouteRecord映射表）<a href="https://github.com/vuejs/vue-router/blob/dev/src/index.js" target="_blank" rel="noopener noreferrer">github<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <img src="/myblog/assets/img/image-20200730093533139.c34a286b.png" alt="image-20200730093533139"></p></li> <li><p>RouteRecord结构<img src="/myblog/assets/img/image-20200730093638678.2337b9da.png" alt="image-20200730093638678"></p></li> <li><p><code>vue-router</code> 使用 <a href="https://github.com/pillarjs/path-to-regexp/tree/v1.7.0" target="_blank" rel="noopener noreferrer">path-to-regexp<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 作为路径匹配引擎，path-to-regexp 解析路由：</p> <ul><li><img src="/myblog/assets/img/image-20200730092026209.aef0aae0.png" alt="image-20200730092026209"></li> <li>&quot;/dealers/:name&quot; , &quot;/dealers/:brand&quot; 最终解析的 Regexp 相同</li> <li>&quot;/dealers/:name&quot; , &quot;/dealers/:brand&quot; 路由相同，同一个路径可以匹配多个路由，此时，匹配的优先级就按照路由的定义顺序：谁先定义的，谁的优先级就最高。</li></ul></li></ul></li></ul></li></ul></li></ul> <h3 id="参考资料-5"><a href="#参考资料-5" class="header-anchor">#</a> 参考资料</h3> <p><a href="https://ssr.vuejs.org/zh/#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E6%B8%B2%E6%9F%93-ssr-%EF%BC%9F" target="_blank" rel="noopener noreferrer">vue ssr<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <!----> <div class="content__content-bottom"></div> <footer class="page-meta"><!----> <div class="meta-item update-time"><span class="label">Last update:</span> <span class="info">January 22, 2024 14:49</span></div> <div class="meta-item contributors"><span class="label">Contributors: </span> <span class="info"><span title="email: 596777598@qq.com" class="contributor">
          sewar
        </span> <!----></span></div></footer> <!----> <!----> <!----> <div class="content__page-bottom"></div></main> <!----></div><div class="global-ui"><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="Close" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">This app can be installed on your PC or mobile device.  This will allow this web app to look and behave like any other installed app.  You will find it in your app lists and be able to pin it to your home screen, start menus or task bars.  This installed web app will also be able to safely interact with other apps and your operating system. </p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>Description</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        Install <span></span></button> <button class="cancel-button">
        Cancel
      </button></div></div></div></div><!----><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button title="Close" aria-label="Close" class="pswp__button pswp__button--close"></button> <button title="Share" aria-label="Share" class="pswp__button pswp__button--share"></button> <button title="Switch to full screen" aria-label="Switch to full screen" class="pswp__button pswp__button--fs"></button> <button title="Zoom in/out" aria-label="Zoom in/out" class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button title="Prev (Arrow Left)" aria-label="Prev (Arrow Left)" class="pswp__button pswp__button--arrow--left"></button> <button title="Next (Arrow Right)" aria-label="Next (Arrow Right)" class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></div></div>
    <script src="/myblog/assets/js/app.9d2b617a.js" defer></script><script src="/myblog/assets/js/layout-Layout.d2d4ce64.js" defer></script><script src="/myblog/assets/js/page-SSG移动端项目实践.2122615b.js" defer></script><script src="/myblog/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-components/Blog/BlogHome~layout-components/~2222f443.5835591a.js" defer></script>
  </body>
</html>
