<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Loader和Plugin原理 | Sewen 博客</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="./mylogo.png">
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
    <link rel="manifest" href="/myblog/manifest.webmanifest" crossorigin="use-credentials">
    <link rel="alternate" type="application/atom+xml" href="https://sewar-x.github.io/myblog/atom.xml" title="Sewen 博客 Atom Feed">
    <link rel="alternate" type="application/json" href="https://sewar-x.github.io/myblog/rss.xml" title="Sewen 博客 JSON Feed">
    <link rel="alternate" type="application/rss+xml" href="https://sewar-x.github.io/myblog/rss.xml" title="Sewen 博客 RSS Feed">
    <meta name="description" content="sewen 的前端学习笔记、博客、前端基础总结、技术深度剖析、面试题总结、算法总结、项目过程总结">
    <meta property="og:url" content="https://sewar-x.github.io/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86.html">
    <meta property="og:site_name" content="Sewen 博客">
    <meta property="og:title" content="Loader和Plugin原理">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="en-US">
    <meta name="theme-color" content="#46bd87">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <link rel="preload" href="/myblog/assets/css/0.styles.645fbc6f.css" as="style"><link rel="preload" href="/myblog/assets/js/app.9d2b617a.js" as="script"><link rel="preload" href="/myblog/assets/js/layout-Layout.d2d4ce64.js" as="script"><link rel="preload" href="/myblog/assets/js/page-Loader和Plugin原理.b2971b76.js" as="script"><link rel="preload" href="/myblog/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-components/Blog/BlogHome~layout-components/~2222f443.5835591a.js" as="script"><link rel="prefetch" href="/myblog/assets/js/199.a9216960.js"><link rel="prefetch" href="/myblog/assets/js/200.4c66fc79.js"><link rel="prefetch" href="/myblog/assets/js/layout-Blog.1fca7e90.js"><link rel="prefetch" href="/myblog/assets/js/layout-NotFound.3c74e8aa.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/AlgoliaSearch/Dropdown.70fcebe7.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Anchor.3235541c.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/ArticleInfo.7b815b20.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/ArticleItem.b0e177e1.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/ArticleList.d1cf1b24.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/ArticleType.b630b80e.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/BlogHero.621312ba.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/BlogHome.4fe44489.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/BlogInfo.b2a94760.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/BlogPage.e0fbe820.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/BloggerInfo.0df38355.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/CategoryList.ec1bcd96.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/ProjectList.8550a110.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/TagList.bcf7b782.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/Timeline.b6cf5471.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Blog/TimelineList.3c6e08a6.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Clipboard.e940a903.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Common.820a8694.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Home.70383986.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/MyTransition.0de46069.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Navbar/DropdownLink.e3f6c118.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Navbar/NavLink.93b11770.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Navbar/NavLinks.8ba214e6.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Navbar/Navbar.b90a94f9.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Navbar/RepoLink.663a7f55.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Navbar/SidebarButton.76b0035a.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Page.98b5d09c.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/PageFooter.20bc9bd8.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/PageMeta.b7e6b12f.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/PageNav.8305dd1f.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Password.45e0e82a.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Sidebar/DropdownTransition.068c5eea.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Sidebar/Sidebar.f6f90d52.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Sidebar/SidebarDropdownLink.505127a8.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Sidebar/SidebarGroup.7eecf370.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Sidebar/SidebarLink.6e39fe32.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Sidebar/SidebarNavLinks.0f8566cb.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Theme/DarkmodeSwitch.20ac7b92.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Theme/ThemeColor.6086e4ed.js"><link rel="prefetch" href="/myblog/assets/js/layout-components/Theme/ThemeOptions.483238c9.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/ArticleIcon.0a22e2b1.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/AutoIcon.2ff1c790.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/BookIcon.419b49ba.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/DarkIcon.7d81873b.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/EditIcon.8ada485d.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/EmptyIcon.d704a5cf.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/I18nIcon.ffad8b3e.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/LightIcon.47d807da.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/LinkIcon.1a8a7826.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/LockIcon.a29a2b79.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/NextIcon.0214ee59.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/Page404Icon.8bc1ebbb.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/PresentationIcon.17500d9b.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/PrevIcon.2ae04a70.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/ProjectIcon.b336d567.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/StickyIcon.0f509b9d.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Baidu.244b9a41.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Bitbucket.11ba94e1.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Dingding.e8a3d90d.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Discord.3295a55b.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Dribbble.464dac3b.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Email.f9254caa.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Evernote.991472fb.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Facebook.08e78e47.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Flipboard.a1124d0f.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Gitee.c44bc20a.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Github.5667e5ae.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Gitlab.ad95c7a7.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Gmail.b5acc6bc.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Instagram.56be85f2.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Lines.d9db3dce.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Linkedin.b82d8d8b.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Pinterest.0f3ffe71.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Pocket.41ef3c92.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/QQ.7558f4ba.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Qzone.bf658fae.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Reddit.9c4c95ee.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Rss.9780139e.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Steam.06abbae2.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Twitter.26fa5bda.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Wechat.9cac8c4c.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Weibo.5206a632.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Whatsapp.0738f1e3.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Youtube.f41fd7f2.js"><link rel="prefetch" href="/myblog/assets/js/layout-icons/media/Zhihu.4d851d2f.js"><link rel="prefetch" href="/myblog/assets/js/page--0abc50bf.0d6f1484.js"><link rel="prefetch" href="/myblog/assets/js/page--1cd40f4c.dd76c7b3.js"><link rel="prefetch" href="/myblog/assets/js/page--53f93199.e80bdec8.js"><link rel="prefetch" href="/myblog/assets/js/page--5afd2fd0.adea4e92.js"><link rel="prefetch" href="/myblog/assets/js/page--67c584d3.0a3f3cd9.js"><link rel="prefetch" href="/myblog/assets/js/page--776a8506.cdf48aac.js"><link rel="prefetch" href="/myblog/assets/js/page-CSS.eb94b29f.js"><link rel="prefetch" href="/myblog/assets/js/page-Chrome开发工具使用指南.a2675120.js"><link rel="prefetch" href="/myblog/assets/js/page-DevServer.0281863d.js"><link rel="prefetch" href="/myblog/assets/js/page-Echarts二次封装.4387b8ad.js"><link rel="prefetch" href="/myblog/assets/js/page-Elementui与Element-plusui二次封装.82f12a09.js"><link rel="prefetch" href="/myblog/assets/js/page-Git基础.03c616ad.js"><link rel="prefetch" href="/myblog/assets/js/page-Git规范.e2fdc38a.js"><link rel="prefetch" href="/myblog/assets/js/page-HTML.1e3c14b9.js"><link rel="prefetch" href="/myblog/assets/js/page-Home.f0b7e772.js"><link rel="prefetch" href="/myblog/assets/js/page-JSON配置化组件二次封装.12060fd9.js"><link rel="prefetch" href="/myblog/assets/js/page-JS原理实现.3c427e19.js"><link rel="prefetch" href="/myblog/assets/js/page-JS应用题.3d313b34.js"><link rel="prefetch" href="/myblog/assets/js/page-JavaScript基础.551be887.js"><link rel="prefetch" href="/myblog/assets/js/page-Linux.c6159ebd.js"><link rel="prefetch" href="/myblog/assets/js/page-MySQL.0b1d704a.js"><link rel="prefetch" href="/myblog/assets/js/page-NPM.a55851b2.js"><link rel="prefetch" href="/myblog/assets/js/page-Node.ec405a21.js"><link rel="prefetch" href="/myblog/assets/js/page-Nodejs常见问题集合.12844e69.js"><link rel="prefetch" href="/myblog/assets/js/page-Node性能优化.b4ea1c34.js"><link rel="prefetch" href="/myblog/assets/js/page-Promise专题.7869a31b.js"><link rel="prefetch" href="/myblog/assets/js/page-React.d76cf0ac.js"><link rel="prefetch" href="/myblog/assets/js/page-SSG移动端项目实践.2122615b.js"><link rel="prefetch" href="/myblog/assets/js/page-TypeScript.4f597fda.js"><link rel="prefetch" href="/myblog/assets/js/page-Vite.637881bf.js"><link rel="prefetch" href="/myblog/assets/js/page-Vite原理解析.6677fdb4.js"><link rel="prefetch" href="/myblog/assets/js/page-Vue25项目webpack构建分析.7bbea0fa.js"><link rel="prefetch" href="/myblog/assets/js/page-Vue2VsVue3.10be4140.js"><link rel="prefetch" href="/myblog/assets/js/page-Vue2x原理源码分析.e9e753b6.js"><link rel="prefetch" href="/myblog/assets/js/page-Vue3基础.210247ff.js"><link rel="prefetch" href="/myblog/assets/js/page-Vue3源码分析.17379e04.js"><link rel="prefetch" href="/myblog/assets/js/page-VueCli源码分析.afc3c83f.js"><link rel="prefetch" href="/myblog/assets/js/page-VueRouter原理分析.0a092eb6.js"><link rel="prefetch" href="/myblog/assets/js/page-VueSSR原理分析.63006040.js"><link rel="prefetch" href="/myblog/assets/js/page-VueVsReact.2156be28.js"><link rel="prefetch" href="/myblog/assets/js/page-Vuex原理分析.5ba3e6e4.js"><link rel="prefetch" href="/myblog/assets/js/page-WEB安全.5aa0eeef.js"><link rel="prefetch" href="/myblog/assets/js/page-WebPack构建原理.9c29703e.js"><link rel="prefetch" href="/myblog/assets/js/page-webpackAPI分析.4c8b152b.js"><link rel="prefetch" href="/myblog/assets/js/page-webpack优化.dcc6c3bc.js"><link rel="prefetch" href="/myblog/assets/js/page-webpack基础.3820ee6c.js"><link rel="prefetch" href="/myblog/assets/js/page-webpack项目实践.77e22417.js"><link rel="prefetch" href="/myblog/assets/js/page-一次后台管理系统的性能优化.7c2d8712.js"><link rel="prefetch" href="/myblog/assets/js/page-从零到一搭建SSR项目.855376fc.js"><link rel="prefetch" href="/myblog/assets/js/page-从零到一搭建Vue2项目和规范设计.93017fd2.js"><link rel="prefetch" href="/myblog/assets/js/page-从零到一搭建Vue3单页面应用.de152d54.js"><link rel="prefetch" href="/myblog/assets/js/page-从零到一搭建公共组件库.93278073.js"><link rel="prefetch" href="/myblog/assets/js/page-从零到一搭建移动端SSG项目.9c113d06.js"><link rel="prefetch" href="/myblog/assets/js/page-使用docker部署Node服务.5cf328fd.js"><link rel="prefetch" href="/myblog/assets/js/page-分治.e3dfc22d.js"><link rel="prefetch" href="/myblog/assets/js/page-前端发版静态资源404问题.9eb1ca89.js"><link rel="prefetch" href="/myblog/assets/js/page-前端存储.cd82cf54.js"><link rel="prefetch" href="/myblog/assets/js/page-前端工程化.1e6e58d0.js"><link rel="prefetch" href="/myblog/assets/js/page-前端性能优化方案.83718d22.js"><link rel="prefetch" href="/myblog/assets/js/page-前端架构实践.171dbc0f.js"><link rel="prefetch" href="/myblog/assets/js/page-前端渲染架构.3b783de8.js"><link rel="prefetch" href="/myblog/assets/js/page-前端自动部署.5076846c.js"><link rel="prefetch" href="/myblog/assets/js/page-前端部署原理.82ecd8a7.js"><link rel="prefetch" href="/myblog/assets/js/page-动态规划.a3af92f1.js"><link rel="prefetch" href="/myblog/assets/js/page-哈希表.c76000e8.js"><link rel="prefetch" href="/myblog/assets/js/page-回溯算法.cd914c32.js"><link rel="prefetch" href="/myblog/assets/js/page-图.dfd9828a.js"><link rel="prefetch" href="/myblog/assets/js/page-基础.7bf5a37b.js"><link rel="prefetch" href="/myblog/assets/js/page-堆.4657e538.js"><link rel="prefetch" href="/myblog/assets/js/page-字符串.252f2a08.js"><link rel="prefetch" href="/myblog/assets/js/page-异步编程.904f4c65.js"><link rel="prefetch" href="/myblog/assets/js/page-性能优化指标和监控.f2175836.js"><link rel="prefetch" href="/myblog/assets/js/page-排序算法.c7a51b99.js"><link rel="prefetch" href="/myblog/assets/js/page-搭建低代码平台.19eaf5ec.js"><link rel="prefetch" href="/myblog/assets/js/page-操作系统.473c4281.js"><link rel="prefetch" href="/myblog/assets/js/page-数学运算.c82748fb.js"><link rel="prefetch" href="/myblog/assets/js/page-数据结构算法.84480586.js"><link rel="prefetch" href="/myblog/assets/js/page-数组.692b0d0a.js"><link rel="prefetch" href="/myblog/assets/js/page-权限管理.c7e10db0.js"><link rel="prefetch" href="/myblog/assets/js/page-查找.790e52df.js"><link rel="prefetch" href="/myblog/assets/js/page-栈和队列.8dbc3586.js"><link rel="prefetch" href="/myblog/assets/js/page-树.24efdeaa.js"><link rel="prefetch" href="/myblog/assets/js/page-浏览器.bee9ec04.js"><link rel="prefetch" href="/myblog/assets/js/page-混合桌面应用开发.9e10d1c3.js"><link rel="prefetch" href="/myblog/assets/js/page-登录.bb830451.js"><link rel="prefetch" href="/myblog/assets/js/page-目录.c85b4d0b.js"><link rel="prefetch" href="/myblog/assets/js/page-移动端开发.56ac22ec.js"><link rel="prefetch" href="/myblog/assets/js/page-组件和组件封装.b5e86da2.js"><link rel="prefetch" href="/myblog/assets/js/page-计算机网络基础.0a106662.js"><link rel="prefetch" href="/myblog/assets/js/page-设计模式.ffdc7cfd.js"><link rel="prefetch" href="/myblog/assets/js/page-调试技巧.485ae36e.js"><link rel="prefetch" href="/myblog/assets/js/page-贪心算法.0f417640.js"><link rel="prefetch" href="/myblog/assets/js/page-输入url到页面展示全过程.510aef2e.js"><link rel="prefetch" href="/myblog/assets/js/page-递归.5e55e552.js"><link rel="prefetch" href="/myblog/assets/js/page-链表.1cf6927f.js"><link rel="prefetch" href="/myblog/assets/js/page-项目总结.ffcd2a4b.js"><link rel="prefetch" href="/myblog/assets/js/vendors~docsearch.f3877d0d.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-components/Blog/BlogHome~layout-components/~5d377965.d9712593.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-Blog~layout-Layout~layout-components/Blog/ArticleItem~layout-components/Blog/ArticleL~b56f3aac.47bb5cb5.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-NotFound~layout-components/Common~layout-components/Page.57d58db9.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-Slide.81546b3b.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-components/AlgoliaSearch/Full.b30f067a.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-components/Blog/BlogPage.bcccbd38.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-components/Navbar/Navbar.e2a7361e.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-components/Page.6c65077c.js"><link rel="prefetch" href="/myblog/assets/js/vendors~layout-components/Sidebar/Sidebar.34cd9cf7.js"><link rel="prefetch" href="/myblog/assets/js/vendors~photo-swipe.428df1da.js">
    <link rel="stylesheet" href="/myblog/assets/css/0.styles.645fbc6f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-sidebar has-anchor"><header class="navbar"><!----> <div class="content__navbar-start"></div> <button title="Sidebar Button" class="sidebar-button"><span class="icon"></span></button> <a href="/myblog/" class="home-link router-link-active"><img src="./mylogo.png" alt="Sewen 博客" class="logo"> <!----> <span class="site-name can-hide">Sewen 博客</span></a> <!----> <div class="content__navbar-center"></div> <div class="links"><button tabindex="-1" aria-hidden="true" class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">Theme Color:</label> <li><span class="default-theme"></span></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">Theme Mode:</label> <div class="darkmode-switch"><div class="item day"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon light-icon"><path d="M512 256a42.667 42.667 0 0 0 42.667-42.667V128a42.667 42.667 0 0 0-85.334 0v85.333A42.667 42.667 0 0 0 512 256zm384 213.333h-85.333a42.667 42.667 0 0 0 0 85.334H896a42.667 42.667 0 0 0 0-85.334zM256 512a42.667 42.667 0 0 0-42.667-42.667H128a42.667 42.667 0 0 0 0 85.334h85.333A42.667 42.667 0 0 0 256 512zm9.387-298.667a42.667 42.667 0 0 0-59.307 62.72l61.44 59.307a42.667 42.667 0 0 0 31.147 11.947 42.667 42.667 0 0 0 30.72-13.227 42.667 42.667 0 0 0 0-60.16zm459.946 133.974a42.667 42.667 0 0 0 29.44-11.947l61.44-59.307a42.667 42.667 0 0 0-57.6-62.72l-61.44 60.587a42.667 42.667 0 0 0 0 60.16 42.667 42.667 0 0 0 28.16 13.227zM512 768a42.667 42.667 0 0 0-42.667 42.667V896a42.667 42.667 0 0 0 85.334 0v-85.333A42.667 42.667 0 0 0 512 768zm244.48-79.36a42.667 42.667 0 0 0-59.307 61.44l61.44 60.587a42.667 42.667 0 0 0 29.44 11.946 42.667 42.667 0 0 0 30.72-12.8 42.667 42.667 0 0 0 0-60.586zm-488.96 0-61.44 59.307a42.667 42.667 0 0 0 0 60.586 42.667 42.667 0 0 0 30.72 12.8 42.667 42.667 0 0 0 28.587-10.666l61.44-59.307a42.667 42.667 0 0 0-59.307-61.44zM512 341.333A170.667 170.667 0 1 0 682.667 512 170.667 170.667 0 0 0 512 341.333z" fill="currentColor"></path></svg></div> <div class="item auto active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon auto-icon"><path d="M460.864 539.072H564.8L510.592 376l-49.728 163.072zM872 362.368V149.504H659.648L510.528 0l-149.12 149.504H149.12v212.928L0 511.872l149.12 149.504v212.928h212.352l149.12 149.504 149.12-149.504h212.352V661.376l149.12-149.504L872 362.368zM614.464 693.12l-31.616-90.624H438.272l-31.616 90.624h-85.888l144.576-407.68h90.368l144.576 407.68h-85.824zm0 0" fill="currentColor"></path></svg></div> <div class="item night"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon dark-icon"><path d="M935.539 630.402c-11.43-11.432-28.674-14.739-43.531-8.354-46.734 20.103-96.363 30.297-147.508 30.297-99.59 0-193.221-38.784-263.64-109.203-108.637-108.637-139.61-270.022-78.908-411.148a39.497 39.497 0 0 0-51.886-51.887c-52.637 22.64-100.017 54.81-140.826 95.616-85.346 85.346-132.346 198.821-132.346 319.52 0 120.7 47.001 234.172 132.347 319.519S408.063 947.11 528.76 947.11c120.7 0 234.172-47.003 319.52-132.351 40.809-40.81 72.978-88.19 95.616-140.826a39.497 39.497 0 0 0-8.356-43.532z" fill="currentColor"></path></svg></div></div> <!----></div></div></div></button> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/myblog/" class="nav-link router-link-active"><!---->
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Front-end Basics" class="dropdown-title"><span class="title"><!---->
        前端基础
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/webpack/html/" class="nav-link"><!---->
  HTML
</a></li><li class="dropdown-item"><a href="/myblog/webpack/css/" class="nav-link"><!---->
  Css
</a></li><li class="dropdown-item"><a href="/myblog/webpack/javascript/" class="nav-link"><!---->
  JavaScript
</a></li><li class="dropdown-item"><a href="/myblog/webpack/typescript/" class="nav-link"><!---->
  TypeScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title"><!---->
        计算机基础
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/webpack/algorithms/" class="nav-link"><!---->
  数据结构和算法
</a></li><li class="dropdown-item"><a href="/myblog/webpack/network/" class="nav-link"><!---->
  计算机网络/HTTP
</a></li><li class="dropdown-item"><a href="/myblog/webpack/network/输入url到页面展示全过程/" class="nav-link"><!---->
  输入url到页面展示全过程
</a></li><li class="dropdown-item"><a href="/myblog/webpack/operating-system/" class="nav-link"><!---->
  操作系统
</a></li><li class="dropdown-item"><a href="/myblog/webpack/design-model/" class="nav-link"><!---->
  设计模式
</a></li><li class="dropdown-item"><a href="/myblog/webpack/Web-Security/" class="nav-link"><!---->
  Web安全
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架和源码分析" class="dropdown-title"><span class="title"><!---->
        框架和源码分析
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/webpack/vue/Vue2原理和源码分析.html" class="nav-link"><!---->
  Vue 专题
</a></li><li class="dropdown-item"><a href="/myblog/webpack/React/" class="nav-link"><!---->
  React 专题
</a></li><li class="dropdown-item"><a href="/myblog/webpack/webpack/webpack构建原理.html" class="nav-link"><!---->
  webpack 专题
</a></li><li class="dropdown-item"><a href="/myblog/webpack/vite/" class="nav-link"><!---->
  vite 专题
</a></li><li class="dropdown-item"><a href="/myblog/webpack/axios/" class="nav-link"><!---->
  Axios 专题
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="浏览器" class="dropdown-title"><span class="title"><!---->
        浏览器
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/webpack/browser/浏览器原理/" class="nav-link"><!---->
  浏览器原理
</a></li><li class="dropdown-item"><a href="/myblog/webpack/browser/前端缓存和存储/" class="nav-link"><!---->
  前端缓存和存储
</a></li><li class="dropdown-item"><a href="/myblog/webpack/performance/前端调试技巧/" class="nav-link"><!---->
  前端调试技巧
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="node.js" class="dropdown-title"><span class="title"><!---->
        服务器
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/webpack/node/" class="nav-link"><!---->
  Node.js
</a></li><li class="dropdown-item"><a href="/myblog/webpack/linux/" class="nav-link"><!---->
  Linux
</a></li><li class="dropdown-item"><a href="/myblog/webpack/mysql/" class="nav-link"><!---->
  MySQL
</a></li><li class="dropdown-item"><a href="/myblog/webpack/nginx/" class="nav-link"><!---->
  Nginx
</a></li><li class="dropdown-item"><a href="/myblog/webpack/docker/" class="nav-link"><!---->
  Docker
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="浏览器和性能优化" class="dropdown-title"><span class="title"><!---->
        性能优化
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/webpack/performance/性能优化指标和监控/" class="nav-link"><!---->
  性能优化指标和监控
</a></li><li class="dropdown-item"><a href="/myblog/webpack/performance/前端性能优化方案/" class="nav-link"><!---->
  前端性能优化方案
</a></li><li class="dropdown-item"><a href="/myblog/webpack/performance/一次管理后台的渲染优化/" class="nav-link"><!---->
  一次管理后台的渲染优化
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端工程" class="dropdown-title"><span class="title"><!---->
        前端工程
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/webpack/Front-end-Engineering/前端工程化/" class="nav-link"><!---->
  前端工程化
</a></li><li class="dropdown-item"><a href="/myblog/webpack/Front-end-Engineering/前端渲染架构/" class="nav-link"><!---->
  前端渲染架构
</a></li><li class="dropdown-item"><a href="/myblog/webpack/Front-end-Engineering/前端架构实践/" class="nav-link"><!---->
  前端架构实践
</a></li><li class="dropdown-item"><a href="/myblog/webpack/Front-end-Engineering/npm/" class="nav-link"><!---->
  npm
</a></li><li class="dropdown-item"><a href="/myblog/webpack/git/" class="nav-link"><!---->
  Git
</a></li><li class="dropdown-item"><a href="/myblog/webpack/projectDeploy/自动构建和部署/" class="nav-link"><!---->
  自动构建和部署
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目实践" class="dropdown-title"><span class="title"><!---->
        项目实践
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/webpack/projectDeploy/" class="nav-link"><!---->
  前端部署
</a></li><li class="dropdown-item"><a href="/myblog/webpack/componentsEncapsulation/组件和组件封装实践.html" class="nav-link"><!---->
  组件和组件封装实践
</a></li><li class="dropdown-item"><a href="/myblog/webpack/projectsSummary/登录与单点登录/" class="nav-link"><!---->
  登录与单点登录
</a></li><li class="dropdown-item"><a href="/myblog/webpack/projectsSummary/权限管理方案实践/" class="nav-link"><!---->
  权限管理方案实践
</a></li><li class="dropdown-item"><a href="/myblog/webpack/projectsSummary/Echarts二次封装实践/" class="nav-link"><!---->
  Echarts二次封装实践
</a></li><li class="dropdown-item"><a href="/myblog/webpack/projectsSummary/文档在线预览和编辑方案/" class="nav-link"><!---->
  文档在线预览和编辑方案
</a></li><li class="dropdown-item"><a href="/myblog/webpack/projectsSummary/移动端开发实践/" class="nav-link"><!---->
  移动端开发实践
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目搭建到原理分析" class="dropdown-title"><span class="title"><!---->
        项目搭建
      </span> <span class="arrow"></span></button> <ul class="nav-dropdown"><li class="dropdown-item"><a href="/myblog/webpack/projectsSummary/从零到一搭建SSR项目/" class="nav-link"><!---->
  从零到一搭建SSR项目
</a></li><li class="dropdown-item"><a href="/myblog/webpack/projectsSummary/从零到一搭建移动端SSG项目/" class="nav-link"><!---->
  从零到一搭建移动端SSG项目
</a></li><li class="dropdown-item"><a href="/myblog/webpack/projectsSummary/移动端SSG项目实践/" class="nav-link"><!---->
  移动端SSG项目实践
</a></li><li class="dropdown-item"><a href="/myblog/webpack/projectsSummary/从零到一搭建Vue2工程化项目/" class="nav-link"><!---->
  从零到一搭建Vue2工程化项目
</a></li><li class="dropdown-item"><a href="/myblog/webpack/projectsSummary/从零到一搭建Vue3工程化项目/" class="nav-link"><!---->
  从零到一搭建Vue3工程化项目
</a></li><li class="dropdown-item"><a href="/myblog/webpack/projectsSummary/搭建低代码平台/" class="nav-link"><!---->
  搭建低代码平台
</a></li><li class="dropdown-item"><a href="/myblog/webpack/projectsSummary/混合桌面应用开发实践/" class="nav-link"><!---->
  混合桌面应用开发实践
</a></li></ul></div></div></nav> <!----> <!----> <!----> <div class="content__navbar-end"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><div vocab="https://schema.org/" typeof="Person" class="blogger-info mobile"><div data-balloon-pos="down" role="navigation" class="blogger hasIntro"><img property="image" alt="Blogger Avatar" src="./mylogo.png" class="avatar round"> <div property="name" class="name">Sewen 博客</div> <meta property="url" content="../outline.md"></div> <div class="num-wrapper"><div><div class="num">91</div> <div>Articles</div></div> <div><div class="num">0</div> <div>Category</div></div> <div><div class="num">0</div> <div>Tags</div></div> <div><div class="num">91</div> <div>Timeline</div></div></div> <div class="media-links-wrapper"><a href="https://github.com/Sewar-x/myblog" rel="noopener noreferrer" target="_blank" aria-label="Github" data-balloon-pos="up" class="media-link"><span class="sr-only">Github</span> <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon icon-github"><circle cx="512" cy="512" r="512" fill="#171515"></circle> <path d="M509.423 146.442c-200.317 0-362.756 162.42-362.756 362.8 0 160.266 103.936 296.24 248.109 344.217 18.139 3.327 24.76-7.872 24.76-17.486 0-8.613-.313-31.427-.49-61.702-100.912 21.923-122.205-48.63-122.205-48.63-16.495-41.91-40.28-53.067-40.28-53.067-32.937-22.51 2.492-22.053 2.492-22.053 36.407 2.566 55.568 37.386 55.568 37.386 32.362 55.438 84.907 39.43 105.58 30.143 3.296-23.444 12.667-39.43 23.032-48.498-80.557-9.156-165.246-40.28-165.246-179.297 0-39.604 14.135-71.988 37.342-97.348-3.731-9.178-16.18-46.063 3.556-96.009 0 0 30.46-9.754 99.76 37.19 28.937-8.048 59.97-12.071 90.823-12.211 30.807.14 61.843 4.165 90.822 12.21 69.26-46.944 99.663-37.189 99.663-37.189 19.792 49.946 7.34 86.831 3.61 96.01 23.25 25.359 37.29 57.742 37.29 97.347 0 139.366-84.82 170.033-165.637 179.013 13.026 11.2 24.628 33.342 24.628 67.182 0 48.498-.445 87.627-.445 99.521 0 9.702 6.535 20.988 24.945 17.444 144.03-48.067 247.881-183.95 247.881-344.175 0-200.378-162.442-362.798-362.802-362.798z" fill="#FFF"></path></svg></a><a href="1567910907" rel="noopener noreferrer" target="_blank" aria-label="Wechat" data-balloon-pos="up" class="media-link"><span class="sr-only">Wechat</span> <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon icon-wechat"><circle cx="512" cy="512" r="512" fill="#1AC88E"></circle> <path d="M827.551 578.742a176.583 176.583 0 0 0-185.685-158.379 172.942 172.942 0 0 0-186.3 158.379 172.942 172.942 0 0 0 185.686 158.379 282.169 282.169 0 0 0 65.536-10.923l60.689 32.768-16.384-54.613a166.275 166.275 0 0 0 76.458-125.611zm-245.76-27.307a21.845 21.845 0 1 1 0-43.69 24.872 24.872 0 0 1 27.307 21.845 24.872 24.872 0 0 1-27.921 21.845h.614zm121.356 0a21.845 21.845 0 1 1 0-43.69 24.872 24.872 0 0 1 27.306 21.845 24.872 24.872 0 0 1-28.512 21.845h1.206z" fill="#FFF"></path> <path d="M623.662 400.953h21.23A222.709 222.709 0 0 0 419.772 245.6a208.145 208.145 0 0 0-223.323 189.94 182.044 182.044 0 0 0 89.201 150.483l-22.436 67.356 78.279-39.435a389.575 389.575 0 0 0 78.279 10.923h20.616a163.226 163.226 0 0 1-6.667-46.718 182.044 182.044 0 0 1 189.94-177.197zm-121.379-60.69a27.921 27.921 0 1 1 0 55.843 31.562 31.562 0 0 1-33.36-27.921 31.562 31.562 0 0 1 34.59-27.921h-1.23zM346.34 396.107a31.562 31.562 0 0 1-33.383-27.921 31.562 31.562 0 0 1 33.383-27.921 27.921 27.921 0 1 1 0 55.842z" fill="#FFF"></path></svg></a></div></div> <hr> <!----> <div class="content__sidebar-top"></div> <nav class="sidebar-nav-links"><div class="nav-item"><a href="/myblog/" class="nav-link router-link-active"><!---->
  首页
</a></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="Front-end Basics" class="dropdown-title"><span class="title"><!---->
      前端基础
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/webpack/html/" class="nav-link"><!---->
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/css/" class="nav-link"><!---->
  Css
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/javascript/" class="nav-link"><!---->
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/typescript/" class="nav-link"><!---->
  TypeScript
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="计算机基础" class="dropdown-title"><span class="title"><!---->
      计算机基础
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/webpack/algorithms/" class="nav-link"><!---->
  数据结构和算法
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/network/" class="nav-link"><!---->
  计算机网络/HTTP
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/network/输入url到页面展示全过程/" class="nav-link"><!---->
  输入url到页面展示全过程
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/operating-system/" class="nav-link"><!---->
  操作系统
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/design-model/" class="nav-link"><!---->
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/Web-Security/" class="nav-link"><!---->
  Web安全
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="框架和源码分析" class="dropdown-title"><span class="title"><!---->
      框架和源码分析
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/webpack/vue/Vue2原理和源码分析.html" class="nav-link"><!---->
  Vue 专题
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/React/" class="nav-link"><!---->
  React 专题
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/webpack/webpack构建原理.html" class="nav-link"><!---->
  webpack 专题
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/vite/" class="nav-link"><!---->
  vite 专题
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/axios/" class="nav-link"><!---->
  Axios 专题
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="浏览器" class="dropdown-title"><span class="title"><!---->
      浏览器
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/webpack/browser/浏览器原理/" class="nav-link"><!---->
  浏览器原理
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/browser/前端缓存和存储/" class="nav-link"><!---->
  前端缓存和存储
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/performance/前端调试技巧/" class="nav-link"><!---->
  前端调试技巧
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="node.js" class="dropdown-title"><span class="title"><!---->
      服务器
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/webpack/node/" class="nav-link"><!---->
  Node.js
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/linux/" class="nav-link"><!---->
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/mysql/" class="nav-link"><!---->
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/nginx/" class="nav-link"><!---->
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/docker/" class="nav-link"><!---->
  Docker
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="浏览器和性能优化" class="dropdown-title"><span class="title"><!---->
      性能优化
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/webpack/performance/性能优化指标和监控/" class="nav-link"><!---->
  性能优化指标和监控
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/performance/前端性能优化方案/" class="nav-link"><!---->
  前端性能优化方案
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/performance/一次管理后台的渲染优化/" class="nav-link"><!---->
  一次管理后台的渲染优化
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="前端工程" class="dropdown-title"><span class="title"><!---->
      前端工程
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/webpack/Front-end-Engineering/前端工程化/" class="nav-link"><!---->
  前端工程化
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/Front-end-Engineering/前端渲染架构/" class="nav-link"><!---->
  前端渲染架构
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/Front-end-Engineering/前端架构实践/" class="nav-link"><!---->
  前端架构实践
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/Front-end-Engineering/npm/" class="nav-link"><!---->
  npm
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/git/" class="nav-link"><!---->
  Git
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/projectDeploy/自动构建和部署/" class="nav-link"><!---->
  自动构建和部署
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="项目实践" class="dropdown-title"><span class="title"><!---->
      项目实践
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/webpack/projectDeploy/" class="nav-link"><!---->
  前端部署
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/componentsEncapsulation/组件和组件封装实践.html" class="nav-link"><!---->
  组件和组件封装实践
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/projectsSummary/登录与单点登录/" class="nav-link"><!---->
  登录与单点登录
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/projectsSummary/权限管理方案实践/" class="nav-link"><!---->
  权限管理方案实践
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/projectsSummary/Echarts二次封装实践/" class="nav-link"><!---->
  Echarts二次封装实践
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/projectsSummary/文档在线预览和编辑方案/" class="nav-link"><!---->
  文档在线预览和编辑方案
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/projectsSummary/移动端开发实践/" class="nav-link"><!---->
  移动端开发实践
</a></li></ul></div></div><div class="nav-item"><div class="mobile-dropdown-wrapper"><button type="button" aria-label="项目搭建到原理分析" class="dropdown-title"><span class="title"><!---->
      项目搭建
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/myblog/webpack/projectsSummary/从零到一搭建SSR项目/" class="nav-link"><!---->
  从零到一搭建SSR项目
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/projectsSummary/从零到一搭建移动端SSG项目/" class="nav-link"><!---->
  从零到一搭建移动端SSG项目
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/projectsSummary/移动端SSG项目实践/" class="nav-link"><!---->
  移动端SSG项目实践
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/projectsSummary/从零到一搭建Vue2工程化项目/" class="nav-link"><!---->
  从零到一搭建Vue2工程化项目
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/projectsSummary/从零到一搭建Vue3工程化项目/" class="nav-link"><!---->
  从零到一搭建Vue3工程化项目
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/projectsSummary/搭建低代码平台/" class="nav-link"><!---->
  搭建低代码平台
</a></li><li class="dropdown-item"><!----> <a href="/myblog/webpack/projectsSummary/混合桌面应用开发实践/" class="nav-link"><!---->
  混合桌面应用开发实践
</a></li></ul></div></div> <!----></nav> <!----> <div class="content__sidebar-center"></div> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><!----> <span class="title">原理</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/myblog/webpack/webpack%E6%9E%84%E5%BB%BA%E5%8E%9F%E7%90%86/" class="sidebar-link">WebPack 构建原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/webpack/webpack%E6%9E%84%E5%BB%BA%E5%8E%9F%E7%90%86/#webpack-基础配置项" class="sidebar-link">webpack 基础配置项</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/webpack%E6%9E%84%E5%BB%BA%E5%8E%9F%E7%90%86/#webpack-构建示例" class="sidebar-link">WebPack 构建示例</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/webpack/webpack%E6%9E%84%E5%BB%BA%E5%8E%9F%E7%90%86/#使用方式" class="sidebar-link heading3">使用方式</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/webpack%E6%9E%84%E5%BB%BA%E5%8E%9F%E7%90%86/#区别" class="sidebar-link heading3">区别</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/webpack%E6%9E%84%E5%BB%BA%E5%8E%9F%E7%90%86/#使用-webpack-核心对象构建" class="sidebar-link heading3">使用 webpack 核心对象构建</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/webpack/webpack%E6%9E%84%E5%BB%BA%E5%8E%9F%E7%90%86/#webpack-构建流程" class="sidebar-link">Webpack 构建流程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/webpack/webpack%E6%9E%84%E5%BB%BA%E5%8E%9F%E7%90%86/#构建执行总流程" class="sidebar-link heading3">构建执行总流程</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/webpack%E6%9E%84%E5%BB%BA%E5%8E%9F%E7%90%86/#函数调用流程" class="sidebar-link heading3">函数调用流程</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/webpack%E6%9E%84%E5%BB%BA%E5%8E%9F%E7%90%86/#初始化流程" class="sidebar-link heading3">初始化流程</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/webpack%E6%9E%84%E5%BB%BA%E5%8E%9F%E7%90%86/#编译流程" class="sidebar-link heading3">编译流程</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/webpack%E6%9E%84%E5%BB%BA%E5%8E%9F%E7%90%86/#输出流程" class="sidebar-link heading3">输出流程</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/webpack%E6%9E%84%E5%BB%BA%E5%8E%9F%E7%90%86/#构建函数流程图" class="sidebar-link heading3">构建函数流程图</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/webpack%E6%9E%84%E5%BB%BA%E5%8E%9F%E7%90%86/#常见问题" class="sidebar-link heading3">常见问题</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/webpack%E6%9E%84%E5%BB%BA%E5%8E%9F%E7%90%86/#参考资料" class="sidebar-link heading3">参考资料</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/webpack/webpack%E6%9E%84%E5%BB%BA%E5%8E%9F%E7%90%86/#手动实现打包器" class="sidebar-link">手动实现打包器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/webpack/webpack%E6%9E%84%E5%BB%BA%E5%8E%9F%E7%90%86/#打包流程" class="sidebar-link heading3">打包流程</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/webpack%E6%9E%84%E5%BB%BA%E5%8E%9F%E7%90%86/#核心步骤" class="sidebar-link heading3">核心步骤</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/webpack%E6%9E%84%E5%BB%BA%E5%8E%9F%E7%90%86/#打包器流程图" class="sidebar-link heading3">打包器流程图</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/webpack%E6%9E%84%E5%BB%BA%E5%8E%9F%E7%90%86/#实现代码" class="sidebar-link heading3">实现代码</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/webpack/webpack%E6%9E%84%E5%BB%BA%E5%8E%9F%E7%90%86/#参考资料-2" class="sidebar-link">参考资料</a></li></ul></li><li><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/" aria-current="page" class="active sidebar-link">Loader和Plugin原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/#loader" class="sidebar-link">Loader</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/#loader-是什么" class="sidebar-link heading3">Loader 是什么？</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/#为什么要-loader" class="sidebar-link heading3">为什么要 Loader?</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/#loader-怎么用" class="sidebar-link heading3">Loader 怎么用？</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/#loader-特性" class="sidebar-link heading3">Loader 特性</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/#loader-原理" class="sidebar-link heading3">Loader 原理？</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/#常见-loader" class="sidebar-link heading3">常见 Loader</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/#手写-loader" class="sidebar-link heading3">手写 Loader</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/#参考资料" class="sidebar-link heading3">参考资料</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/#plugin" class="sidebar-link">Plugin</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/#plugin-是什么" class="sidebar-link heading3">Plugin 是什么？</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/#为什么要-plugin" class="sidebar-link heading3">为什么要 Plugin?</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/#plugin-怎么用" class="sidebar-link heading3">Plugin 怎么用？</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/#plugin-原理" class="sidebar-link heading3">Plugin 原理？</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/#plugin-常用-api" class="sidebar-link heading3">Plugin 常用 API</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/#手写-plugin" class="sidebar-link heading3">手写 Plugin</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/#常见的-plugin" class="sidebar-link heading3">常见的 Plugin</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/#plugin-与-loader-区别" class="sidebar-link">Plugin 与 Loader 区别？</a></li></ul></li><li><a href="/myblog/webpack/DevServer%E5%8E%9F%E7%90%86/" class="sidebar-link">DevServer</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/webpack/DevServer%E5%8E%9F%E7%90%86/#devserver-是什么" class="sidebar-link">DevServer 是什么</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/DevServer%E5%8E%9F%E7%90%86/#devserver-功能" class="sidebar-link">DevServer 功能</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/DevServer%E5%8E%9F%E7%90%86/#使用-devserver" class="sidebar-link">使用 DevServer</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/DevServer%E5%8E%9F%E7%90%86/#devserver-原理" class="sidebar-link">DevServer 原理</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/DevServer%E5%8E%9F%E7%90%86/#webpack-dev-middleware-原理" class="sidebar-link">`webpack-dev-middleware` 原理</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/DevServer%E5%8E%9F%E7%90%86/#webpack-proxy" class="sidebar-link">WebPack proxy</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/webpack/DevServer%E5%8E%9F%E7%90%86/#是什么" class="sidebar-link heading3">是什么？</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/DevServer%E5%8E%9F%E7%90%86/#为什么" class="sidebar-link heading3">为什么？</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/DevServer%E5%8E%9F%E7%90%86/#怎么用" class="sidebar-link heading3">怎么用？</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/DevServer%E5%8E%9F%E7%90%86/#解决跨域原理" class="sidebar-link heading3">解决跨域原理</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/DevServer%E5%8E%9F%E7%90%86/#代理原理" class="sidebar-link heading3">代理原理</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/webpack/DevServer%E5%8E%9F%E7%90%86/#devserver-实时预览功能" class="sidebar-link">DevServer 实时预览功能</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/webpack/DevServer%E5%8E%9F%E7%90%86/#监听模式" class="sidebar-link heading3">监听模式</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/DevServer%E5%8E%9F%E7%90%86/#模块热替换" class="sidebar-link heading3">模块热替换</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/webpack/DevServer%E5%8E%9F%E7%90%86/#source-map" class="sidebar-link">Source Map</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/webpack/DevServer%E5%8E%9F%E7%90%86/#是什么-2" class="sidebar-link heading3">是什么？</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/DevServer%E5%8E%9F%E7%90%86/#为什么需要-sourcemap" class="sidebar-link heading3">为什么需要 SourceMap？</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/DevServer%E5%8E%9F%E7%90%86/#怎么用-2" class="sidebar-link heading3">怎么用？</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/DevServer%E5%8E%9F%E7%90%86/#如何选择devtool-配置项" class="sidebar-link heading3">如何选择Devtool 配置项</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/DevServer%E5%8E%9F%E7%90%86/#加载现有的-source-map" class="sidebar-link heading3">加载现有的 Source Map</a></li></ul></li></ul></li><li><a href="/myblog/webpack/webpack%E4%BC%98%E5%8C%96/" class="sidebar-link">webpack优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/webpack/webpack%E4%BC%98%E5%8C%96/#总览" class="sidebar-link">总览</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/webpack%E4%BC%98%E5%8C%96/#参考资料" class="sidebar-link">参考资料</a></li></ul></li><li><a href="/myblog/webpack/webpackAPI%E5%88%86%E6%9E%90/" class="sidebar-link">webpackAPI分析</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/webpack/webpackAPI%E5%88%86%E6%9E%90/#webpack-模块方法" class="sidebar-link">webpack 模块方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/webpack/webpackAPI%E5%88%86%E6%9E%90/#require-context" class="sidebar-link heading3">require.context</a></li></ul></li><li class="sidebar-sub-header"><a href="/myblog/webpack/webpackAPI%E5%88%86%E6%9E%90/#参考" class="sidebar-link">参考</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><!----> <span class="title">实践</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/myblog/webpack/webpack%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/" class="sidebar-link">webpack项目实践</a></li><li><a href="/myblog/webpack/Vue2.5%E9%A1%B9%E7%9B%AEwebpack%E5%88%86%E6%9E%90/" class="sidebar-link">Vue2.5 项目 webpack 构建分析</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/webpack/Vue2.5%E9%A1%B9%E7%9B%AEwebpack%E5%88%86%E6%9E%90/#技术栈" class="sidebar-link">技术栈</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/Vue2.5%E9%A1%B9%E7%9B%AEwebpack%E5%88%86%E6%9E%90/#源码分析" class="sidebar-link">源码分析</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myblog/webpack/Vue2.5%E9%A1%B9%E7%9B%AEwebpack%E5%88%86%E6%9E%90/#构建命令" class="sidebar-link heading3">构建命令</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/Vue2.5%E9%A1%B9%E7%9B%AEwebpack%E5%88%86%E6%9E%90/#webpack-目录分析" class="sidebar-link heading3">WebPack 目录分析</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/Vue2.5%E9%A1%B9%E7%9B%AEwebpack%E5%88%86%E6%9E%90/#构建入口分析" class="sidebar-link heading3">构建入口分析</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/Vue2.5%E9%A1%B9%E7%9B%AEwebpack%E5%88%86%E6%9E%90/#检查版本文件分析" class="sidebar-link heading3">检查版本文件分析</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/Vue2.5%E9%A1%B9%E7%9B%AEwebpack%E5%88%86%E6%9E%90/#工具脚本文件分析" class="sidebar-link heading3">工具脚本文件分析</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/Vue2.5%E9%A1%B9%E7%9B%AEwebpack%E5%88%86%E6%9E%90/#webpack-基础配置" class="sidebar-link heading3">WebPack 基础配置</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/Vue2.5%E9%A1%B9%E7%9B%AEwebpack%E5%88%86%E6%9E%90/#webpack-开发配置" class="sidebar-link heading3">Webpack 开发配置</a></li><li class="sidebar-sub-header"><a href="/myblog/webpack/Vue2.5%E9%A1%B9%E7%9B%AEwebpack%E5%88%86%E6%9E%90/#webpack-生产配置" class="sidebar-link heading3">WebPack 生产配置</a></li></ul></li></ul></li></ul></section></li></ul> <!----> <div class="content__sidebar-bottom"></div> <!----></aside> <main class="page"><nav class="breadcrumb"><ol vocab="https://schema.org/" typeof="BreadcrumbList"><li property="itemListElement" typeof="ListItem"><a href="/myblog/webpack/" property="item" typeof="WebPage" class="router-link-active"><!----> <span property="name">目录</span></a> <meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem" class="is-active"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/" aria-current="page" property="item" typeof="WebPage" class="router-link-exact-active router-link-active"><!----> <span property="name">Loader和Plugin原理</span></a> <meta property="position" content="2"></li></ol></nav> <!----> <div class="content__page-top"></div> <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><!----> <span property="headline">Loader和Plugin原理</span></h1> <div class="page-info"><!----> <true-info defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/"></true-info><true-info defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/"></true-info><true-info defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/"></true-info><true-info defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/"></true-info><true-info defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/"></true-info><true-info defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/"></true-info><true-info defaultAuthor="" categoryPath="/category/$category/" tagPath="/tag/$tag/"></true-info></div> <!----> <hr></div> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/#loader" class="anchor-link heading2"><div>Loader</div></a></li><li class="anchor"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/#loader-是什么" class="anchor-link heading3"><div>Loader 是什么？</div></a></li><li class="anchor"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/#为什么要-loader" class="anchor-link heading3"><div>为什么要 Loader?</div></a></li><li class="anchor"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/#loader-怎么用" class="anchor-link heading3"><div>Loader 怎么用？</div></a></li><li class="anchor"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/#loader-特性" class="anchor-link heading3"><div>Loader 特性</div></a></li><li class="anchor"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/#loader-原理" class="anchor-link heading3"><div>Loader 原理？</div></a></li><li class="anchor"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/#常见-loader" class="anchor-link heading3"><div>常见 Loader</div></a></li><li class="anchor"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/#手写-loader" class="anchor-link heading3"><div>手写 Loader</div></a></li><li class="anchor"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/#参考资料" class="anchor-link heading3"><div>参考资料</div></a></li><li class="anchor"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/#plugin" class="anchor-link heading2"><div>Plugin</div></a></li><li class="anchor"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/#plugin-是什么" class="anchor-link heading3"><div>Plugin 是什么？</div></a></li><li class="anchor"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/#为什么要-plugin" class="anchor-link heading3"><div>为什么要 Plugin?</div></a></li><li class="anchor"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/#plugin-怎么用" class="anchor-link heading3"><div>Plugin 怎么用？</div></a></li><li class="anchor"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/#plugin-原理" class="anchor-link heading3"><div>Plugin 原理？</div></a></li><li class="anchor"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/#plugin-常用-api" class="anchor-link heading3"><div>Plugin 常用 API</div></a></li><li class="anchor"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/#手写-plugin" class="anchor-link heading3"><div>手写 Plugin</div></a></li><li class="anchor"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/#常见的-plugin" class="anchor-link heading3"><div>常见的 Plugin</div></a></li><li class="anchor"><a href="/myblog/webpack/Loader%E5%92%8CPlugin%E5%8E%9F%E7%90%86/#plugin-与-loader-区别" class="anchor-link heading2"><div>Plugin 与 Loader 区别？</div></a></li></ul></div></aside></div> <!----> <div class="content__content-top"></div> <div class="theme-default-content content__default"><h1 id="loader和plugin原理"><a href="#loader和plugin原理" class="header-anchor">#</a> Loader和Plugin原理</h1> <p>[TOC]</p> <h2 id="loader"><a href="#loader" class="header-anchor">#</a> Loader</h2> <p><img src="/myblog/assets/img/loader.1442e289.png" alt="image-20240120093326230"></p> <h3 id="loader-是什么"><a href="#loader-是什么" class="header-anchor">#</a> <strong>Loader 是什么？</strong></h3> <blockquote><p><code>loader</code> 用于 对模块的&quot;源代码&quot;进行转换，在 <code>import</code> 或&quot;加载&quot;模块时预处理文件</p></blockquote> <h3 id="为什么要-loader"><a href="#为什么要-loader" class="header-anchor">#</a> <strong>为什么要 Loader?</strong></h3> <blockquote><p><code>webpack</code>只支持对<code>js</code> 和 <code>json</code> 文件打包，像<code>css</code>、<code>sass</code>、<code>png</code>等这些类型的文件的时候，<code>webpack</code> 需要配置对应的<code>loader</code>进行文件内容的解析</p></blockquote> <p><code>webpack</code>做的事情，仅仅是分析出各种模块的依赖关系，然后形成资源列表，最终打包生成到指定的文件中。如下图所示：</p> <p><img src="/myblog/assets/img/webpack-loader.eef738f3.png" alt="img"></p> <p>在<code>webpack</code>内部中，任何文件都是模块，不仅仅只是<code>js</code>文件</p> <p>默认情况下，在遇到<code>import</code>或者<code>require</code>加载模块的时候，<code>webpack</code>只支持对<code>js</code> 和 <code>json</code> 文件打包，像<code>css</code>、<code>sass</code>、<code>png</code>等这些类型的文件的时候，<code>webpack</code>则无能为力，这时候就需要配置对应的<code>loader</code>进行文件内容的解析</p> <p>在加载模块的时候，执行顺序如下：</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAsQAAADPBAMAAAAAI9paAAAAJ1BMVEX///8yMjL8/PxkZGQ0NDTt7e0+Pj58fHyXl5fY2NhSUlLJycmxsbE6hUnQAAAIS0lEQVR42u2cz1OT1x7Gv3OYtyGGxc0VtOO4OHNoSoJZVFJI5LIoI7U6dPGaGLHIwoEC4ceCSwQUsohUAloXuXDlXvQurCkJBBYhIh3sXcRY6ID+UfcNYC90khiSE+nU5zMjY8KMx/N5H7553jMhRAAAAAAAAAAAAAAgR0qH0jzZkoAYeeg60zzp8kOMRMXzaZ5sheICUYhMnEzE3KqWYpOTmBBurj2vPSahfdFSrHB4KoAZJ70K0iT9K9qg6pa8oRj5XoWGOPsu2kDsWdTBtRQ/S8JxAbT62dkERQwdD1/6dR0bMz1kW7reoZZ43MNBQ8d0YLA6YehW4amQ+dtuigzqv9bVUtmizkOKjX8+zWYTriSvHCz5jHSLrePbg9BUCGV9hvl5c+dHWjVb1vUQBYI2TrrPTJxVtV+JkTLteuDBmCjs5c5TOnHOVXMlZLN5Uo1iM+7QCvIT5bto1421WGqS1F2EpYIQ3tbErUeJq9//9+f1VC/ejNmJzE9dDesze4pPB2LQVAjsxXZwe5Oqk6Rs6BZ5alAQVQ68jJHrydUEGRarxyvnMSkKUlxt47ML2ssamTt1X3F9hOqSWpTvBtnmjapaaql1+U1RNIqCqLpI1c1cH31wdlzX7QjMM7v91271H8uvQjf04anP41qrW0WlKAj9bbJOEF2zjVHZvUmHyhzX7ON0xuto89O/7WPCHKOy29BU6LAQ2sueSfvCmTYS7MzJd+6qOTGT9k34kYrmljkOPgbysUNBsXFDAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAPCkuTHL7Ib/mbclb/Kt/tl8hZv9GfZQ29UQ5/yW+Lf5ez+sm8FUvafjbFBigutmJ91u/mTN6KK2SsfrkAxTLW1xvHs6YYigt/QUOKjzbFFigudooNjVBc5BRjUGAWo1FAMVKMFCPFUIxejF6MFGNQYBajUUAxUowUI8VQjF6MXowUY1BgFqNRQDFSjBQjxVCMXoxejBRjUGAWo1FAMVKMFCPFUIxejF6MFGNQYBajUUDxHzrF+udHrPhn9c+eYl1vAz9SxXWh+J88xSWNTce3nJkVX+cHH8/JVvxjk9H38A/Vi9kZyYqNxqYLkY2MigPqwcd2Llux0Wjs8Kk5KT6Tw9WW0ItXJCtu0rbYaGxwZ1D88veK1SIoNpaf3xA5KF7df30VT5F6MVuVPSh2f/39vC+YVvGdg6llXtkp/mF3/SbHVqXxUHtXTsudxYaRJDckfxqjtptvprdafBucrMFMik905c63e4rLL3Q1ZhgU127FiKzeCU6GybhdsF99nF6bffwnhzOd4vKuQ9H49jMOLnybQXHbSJwbEsQ2dvbeditIbSqVxd8cfy0kNgrT8Eh9TNdtrxuf+cH2PFTfoP2Q3M2o+DCU7/t7GsXsF9Xa4fWo+uhIXYwF7A4bn4l4z7FQ1O7qHu1Ppzjfj5HQ/ifpYxkd6Q7qbpDSl9p7xOZdZpdVqh70nnKoElNc2sNaaqs8omXetOq2hCecAcFCqgzFxuyK6S5/NCFW/Lol0fLE0Keau02jTpOdfhxy/5I02bhExcYMiquHxKOaqpTi1N6jSSXg/GeQjtW4P3ZyeSlmnyZI36er4Pov2RopUZXNJgz9GWfxX0XuvP0okxOReNpZfNd5nzPzU0uMyr6srCHT+TP9QqypvU7anODX0yk+KQ7F3iw29n6ffhazzWlh7dlJ8e7eqXXwSirFykWps3j11tRUf1U7V3r4CtdHiCrnSzvlNQqj8dSYM1Oj0GqaoV20TXorPhknFrFenJoajoc4mTt8Qt7L3cJzkaFRjDpJad5JsdamUnt3PZlNpdjUzyX2YrYaCtmWd6/kKikLxMr6jvnlNYryjiTj6RXfEdqm9BX6rpHJS1f8WqOwnqq31ScjnMS1cL8sxRd8QvAMim0qidP79k4lT/NPceZePBsnMZ26kj2pK7nAtaVmp6Wl+IRvOsuth52orL21lqwVHw0QC1l7iFlENyc314865Sju3uKZbz3uB0nfbP5Ci7K2d0W7tq6ay0H6dEj5Oo8UZx4UxwbIurRzJcUqmRZSC9tUWSk+NSF4RsV3+KZKJQNrCSq5ZH5KlpMWrcwEnNpOtTp3JSZDcfmyM9sN9EqMdIvmCipt1lKsjwZpdvyTGK3InsVlnrm1od0Uz762aD+6dLVf0q1HVyROPPMZxUvVtfR4OP7o3PXRTlNk/VlIBLb+s0BaitfuzQVUCYo7bguWTXFp/1zAbzg5t92s7d0UvffYxkuWHt+soci61JO27ahHTaX4EqvqcmspZlWXJJ20jalZDzPvcGU4/DdeFo6+6REvepdHeFs4OkFaiq3R8LKEWex4znjWkzblfu8yF5vh231U1fVNZDt8jvTh6PYge+GRenfHHovfJs/ONXcNyFG8j/SHmZwpD7WlLfHU+t9wxpnl4d5m1rkExftPpDLsfU77Y9o911YiTFudWYLaT54Qks+Lf/fvrQXfk+K9pTn7v3SpZxQ5KN4vcOH9nRfb6P0pLuqR/LsVH5gakeKfF78N1tgHqvhBYSk+zPso+Iep+N3gfRRFV4z3URxxivE+CqQYKYZipPjoU4z3Fxc9xXh/MXoxZjEUo1EgxUgxFCPF6MVIMXoxejFmMRSjUSDFSDEUI8XoxUgxejF6MWYxFKNRIMVIMRQjxejFSDF6MXoxZjEU59woQjYJ5K34uIzVzxagWMb69e9IsRzyVSxn9QIUyyF7o4BiCWRLMROCyyDPLTIJq4v0v9KZG1I2zwUnAAAAAAAAAAAAAAAAAAAAAAAAAACQlv8BVaKp2M2u0PgAAAAASUVORK5CYII=" alt="img"></p> <p>当 <code>webpack</code> 碰到不识别的模块的时候，<code>webpack</code> 会在配置的中查找该文件解析规则</p> <h3 id="loader-怎么用"><a href="#loader-怎么用" class="header-anchor">#</a> <strong>Loader 怎么用？</strong></h3> <p>配置<code>loader</code>的方式有三种：</p> <ul><li>配置方式（推荐）：在 <code>webpack.config.js</code> 文件中指定 loader</li> <li>模块导入：在每个 import 语句中显式指定 loader</li> <li>CLI 方式：在 shell 命令中指定它们</li></ul> <h4 id="配置-loader"><a href="#配置-loader" class="header-anchor">#</a> <strong>配置 loader</strong></h4> <p><code>loader</code>的配置，在<code>module.rules</code>属性中，属性介绍如下：</p> <ul><li><code>rules</code>属性: 数组的形式，配置多个<code>loader</code>；每一个<code>loader</code>对应一个对象的形式，对象属性<code>test</code> 为匹配的规则，一般情况为正则表达式；</li> <li><code>test</code>属性: 正则表达式，匹配文件名称规则；</li> <li><code>use</code> 属性:数组的形式，对匹配到文件类型，调用对应的 <code>loader</code> 进行处理，use 属性中<strong>Loader 的执行顺序是由后到前的</strong></li></ul> <p><strong>loader 对象配置方式：</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ... 其他配置项</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span> <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'style-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'sass-loader'</span> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p><strong>loader 数组配置方式：</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
     <span class="token comment">// ... 其他配置项</span>
     <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token comment">// 用正则去匹配要用该 loader 转换的 CSS 文件</span>
            <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
            <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader?minimize'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><blockquote><p><code>loader</code>支持链式调用，链中的每个<code>loader</code>会处理之前已处理过的资源，最终变为<code>js</code>代码。顺序为相反的顺序执行，即上述执行方式为<code>sass-loader</code>、<code>css-loader</code>、<code>style-loader</code></p></blockquote> <h4 id="模块导入"><a href="#模块导入" class="header-anchor">#</a> <strong>模块导入</strong></h4> <p>在源码中引入 loader</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//在源码中指定 Loader 去处理文件,这个文件先采用 css-loader 再采用 style-loader 转换 css</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'style-loader!css-loader?minimize!./main.css'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="loader-特性"><a href="#loader-特性" class="header-anchor">#</a> <strong>Loader 特性</strong></h3> <ul><li><p><strong>文件加载（File Loading）</strong>：Webpack Loader可以帮助将各种文件加载到Webpack构建中，例如JavaScript文件、CSS文件、图像文件、字体文件等。它们可以处理不同类型的资源，并将其作为模块导入到应用程序中。loader 可以是同步的，也可以是异步的。</p></li> <li><p><strong>代码转换（Code Transformation）</strong>：Webpack Loader可以对文件进行代码转换和处理。例如，通过Babel Loader，可以将ES6/ES7代码转换为ES5代码，以便在旧版浏览器中运行。通过CSS Loader和Style Loader，可以将CSS文件转换为JavaScript模块，并将其注入到页面中。loader 能够产生额外的任意文件。</p></li> <li><p><strong>模块解析（Module Resolution）</strong>：Webpack Loader可以帮助解析模块之间的依赖关系。它们可以处理模块之间的引用，包括相对路径和绝对路径的解析，以及处理模块的别名和路径映射。</p></li> <li><p><strong>预处理器支持（Preprocessor Support）</strong>：Webpack Loader可以与各种预处理器配合使用，如Sass、Less、Stylus等。通过相应的Loader，可以将预处理器语言转换为浏览器可识别的CSS。</p></li> <li><p><strong>代码校验（Code Validation）</strong>：Webpack Loader可以进行代码校验，以提供更好的代码质量和可靠性。例如，通过ESLint Loader，可以集成ESLint进行JavaScript代码的静态分析和错误检查。</p></li> <li><p><strong>资源优化（Asset Optimization）</strong>：Webpack Loader可以对资源进行优化，以提高应用程序的性能和加载速度。例如，通过Image Loader和File Loader，可以对图像和文件进行压缩、缓存和重命名等处理，以减小文件大小并提高加载速度。</p></li> <li><p><strong>插件支持（Plugin Support）</strong>：Webpack Loader可以与Webpack插件一起使用，以提供更丰富的功能和扩展性。它们可以与各种插件配合使用，如热模块替换（Hot Module Replacement）插件、代码压缩插件等，以实现更高级的功能和优化。</p></li></ul> <h3 id="loader-原理"><a href="#loader-原理" class="header-anchor">#</a> <strong>Loader 原理？</strong></h3> <h4 id="源码转换"><a href="#源码转换" class="header-anchor">#</a> <strong>源码转换</strong></h4> <p>Webpack 是运行在 Node.js 之上的，一个 Loader 其实就是一个 Node.js 模块，这个模块需要导出一个函数。 这个导出的函数的工作就是获得处理前的原内容，对原内容执行处理后，返回处理后的内容。</p> <p>Loader 函数具有以下特性：</p> <blockquote><ul><li><p>函数中的 <code>this</code> 作为上下文会被 <code>webpack</code> 填充，因此我们不能将 <code>loader</code>设为一个箭头函数；</p></li> <li><p>函数接受一个参数，为 <code>webpack</code> 传递给 <code>loader</code> 的文件源内容；</p></li> <li><p>函数中 <code>this</code> 是由 <code>webpack</code> 提供的对象，能够获取当前 <code>loader</code> 所需要的各种信息；</p></li> <li><p>函数中有异步操作或同步操作，异步操作通过 <code>this.callback</code> 返回，返回值要求为 <code>string</code> 或者 <code>Buffer</code>；</p></li></ul></blockquote> <p>一个最简单的 Loader 的源码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// source 为 compiler 传递给 Loader 的一个文件的原内容</span>
  <span class="token comment">// 该函数需要返回处理后的内容，这里简单起见，直接把原内容返回了，相当于该 Loader 没有做任何转换</span>
  <span class="token comment">// 如果 loader 配置了 options 对象，那么this.query将指向 options</span>
  <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>query<span class="token punctuation">;</span>
    <span class="token comment">/*
     * this.callback 参数：
     * error：Error | null，当 loader 出错时向外抛出一个 error
     * content：String | Buffer，经过 loader 编译后需要导出的内容
     * sourceMap：为方便调试生成的编译后内容的 source map
     * ast：本次编译生成的 AST 静态语法树，之后执行的 loader 可以直接使用这个 AST，进而省去重复生成 AST 的过程
     */</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> source<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 异步</span>
  <span class="token keyword">return</span> source<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>由于 Loader 运行在 Node.js 中，你可以调用任何 Node.js 自带的 API，或者安装第三方模块进行调用：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> sass <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'node-sass'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">sass</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="单一职责"><a href="#单一职责" class="header-anchor">#</a> <strong>单一职责</strong></h4> <p>一个 Loader 的职责是单一的，只需要完成一种转换。 如果一个源文件需要经历多步转换才能正常使用，就通过多个 Loader 去转换。 在调用多个 Loader 去转换一个文件时，每个 Loader 会链式的顺序执行， 第一个 Loader 将会拿到需处理的原内容，上一个 Loader 处理后的结果会传给下一个接着处理，最后的 Loader 将处理后的最终结果返回给 Webpack。</p> <p>所以，在开发一个 Loader 时，请保持其职责的单一性，你只需关心输入和输出。</p> <h4 id="链式处理"><a href="#链式处理" class="header-anchor">#</a> <strong>链式处理</strong></h4> <p>Loader 就像是一个翻译员，能把源文件经过转化后输出新的结果，将结果输出给下一个loader，形成链式翻译。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// 增加对 SCSS 文件的支持</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.scss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token comment">// SCSS 文件的处理顺序为先 sass-loader 再 css-loader 再 style-loader</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span><span class="token string">'css-loader'</span><span class="token punctuation">,</span>
            <span class="token comment">// 给 css-loader 传入配置项</span>
            <span class="token literal-property property">options</span><span class="token operator">:</span><span class="token punctuation">{</span>
              <span class="token literal-property property">minimize</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> 
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">'sass-loader'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>以处理 SCSS 文件为例：</p> <ol><li>SCSS 源代码会先交给 sass-loader 把 SCSS 转换成 CSS；</li> <li>把 sass-loader 输出的 CSS 交给 css-loader 处理，找出 CSS 中依赖的资源、压缩 CSS 等；</li> <li>把 css-loader 输出的 CSS 交给 style-loader 处理，转换成通过脚本加载的 JavaScript 代码；</li></ol> <p>可以看出以上的处理过程需要有顺序的链式执行，先 sass-loader 再 css-loader 再 style-loader。</p> <h3 id="常见-loader"><a href="#常见-loader" class="header-anchor">#</a> <strong>常见 Loader</strong></h3> <ul><li>style-loader: 将css添加到DOM的内联样式标签style里</li> <li>css-loader :允许将css文件通过require的方式引入，并返回css代码</li> <li>less-loader: 处理less</li> <li>sass-loader: 处理sass</li> <li>postcss-loader: 用postcss来处理CSS</li> <li>autoprefixer-loader: 处理CSS3属性前缀，已被弃用，建议直接使用postcss</li> <li>file-loader: 分发文件到output目录并返回相对路径</li> <li>url-loader: 和file-loader类似，但是当文件小于设定的limit时可以返回一个Data Url</li> <li>html-minify-loader: 压缩HTML</li> <li>babel-loader :用babel来转换ES6文件到ES</li></ul> <h3 id="手写-loader"><a href="#手写-loader" class="header-anchor">#</a> <strong>手写 Loader</strong></h3> <p>下面编写一个 <code>print-loader.js</code> 为例，该 loader 作用为打印源码结果。</p> <p>当编写Webpack Loader步骤：</p> <ol><li><p><strong>安装所需的依赖</strong>：首先，需要安装必要的依赖，包括<code>loader-utils</code>和<code>schema-utils</code>。<code>loader-utils</code>提供了一些实用工具函数，<code>schema-utils</code>用于验证Loader的选项。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> loader-utils schema-utils --save-dev

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p><strong>创建Loader函数</strong>：创建一个JavaScript文件，命名为<code>print-loader.js</code>，并编写Loader的逻辑。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> getOptions <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'loader-utils'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 用于获取Loader的选项</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> validate <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'schema-utils'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 用于验证Loader的选项</span>
<span class="token keyword">const</span> schema <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./print-loader-options.json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 加载选项的JSON模式</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token function">getOptions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取Loader的选项</span>
  <span class="token function">validate</span><span class="token punctuation">(</span>schema<span class="token punctuation">,</span> options<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Print Loader'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">baseDataPath</span><span class="token operator">:</span> <span class="token string">'options'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 验证Loader的选项是否符合模式</span>

  <span class="token comment">// 在源代码上添加打印结果</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">console.log('Source Code:', </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">);\n</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>source<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token comment">// 通过 this.callback 告诉 Webpack 返回的结果</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> source<span class="token punctuation">,</span> sourceMaps<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 当你使用 this.callback 返回内容时，该 Loader 必须返回 undefined，</span>
  <span class="token comment">// 以让 Webpack 知道该 Loader 返回的结果在 this.callback 中，而不是 return 中 </span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><blockquote><p>在这个示例中，我们将选项的模式定义在一个独立的JSON文件<code>print-loader-options.json</code>中。</p> <p>Loader函数接收一个<code>source</code>参数，表示输入的源代码。我们在源代码前面添加一个打印结果，然后返回修改后的源代码。</p> <ol><li><p>使用<code>getOptions</code>函数从Webpack配置中获取Loader的选项。</p></li> <li><p>使用<code>validate</code>函数验证选项是否符合预定义的模式。</p></li> <li><p>通过 <code>this.callback</code> 告诉 Webpack 返回的结果.</p> <p>其中的 <code>this.callback</code> 是 Webpack 给 Loader 注入的 API，以方便 Loader 和 Webpack 之间通信。 <code>this.callback</code> 的详细使用方法如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span>
    <span class="token comment">// 当无法转换原内容时，给 Webpack 返回一个 Error</span>
    <span class="token literal-property property">err</span><span class="token operator">:</span> Error <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token comment">// 原内容转换后的内容</span>
    <span class="token literal-property property">content</span><span class="token operator">:</span> string <span class="token operator">|</span> Buffer<span class="token punctuation">,</span>
    <span class="token comment">// 用于把转换后的内容得出原内容的 Source Map，方便调试</span>
    sourceMap<span class="token operator">?</span><span class="token operator">:</span> SourceMap<span class="token punctuation">,</span>
    <span class="token comment">// 如果本次转换为原内容生成了 AST 语法树，可以把这个 AST 返回，</span>
    <span class="token comment">// 以方便之后需要 AST 的 Loader 复用该 AST，以避免重复生成 AST，提升性能</span>
    abstractSyntaxTree<span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">AST</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li></ol></blockquote></li> <li><p><strong>定义Loader的选项模式</strong>：在与Loader文件相同的目录下，创建一个名为<code>print-loader-options.json</code>的JSON文件，并定义Loader的选项模式。</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;optionName&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span>
      <span class="token comment">// 添加其他选项的定义...</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;additionalProperties&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><blockquote><p>定义一个名为<code>optionName</code>的字符串类型选项。你可以根据自己的需求添加或修改选项的定义。</p></blockquote></li> <li><p><strong>配置Webpack</strong>：在Webpack配置中，将我们编写的Loader应用于相应的模块。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token comment">// 匹配要应用Loader的文件类型,将`print-loader`应用于所有以`.js`结尾的文件，并传递了一个名为`optionName`的选项。</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'print-loader'</span><span class="token punctuation">,</span> <span class="token comment">// 使用我们编写的Loader</span>
            <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">optionName</span><span class="token operator">:</span> <span class="token string">'example'</span> <span class="token comment">// 传递Loader的选项</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div></li></ol> <p>现在，当Webpack构建过程中遇到匹配的<code>.js</code>文件时，将会应用我们编写的Loader。Loader将在源代码前面添加一个打印结果，然后返回修改后的源代码。</p> <h3 id="参考资料"><a href="#参考资料" class="header-anchor">#</a> 参考资料</h3> <p><a href="https://webpack.wuhaolin.cn/5%E5%8E%9F%E7%90%86/5-3%E7%BC%96%E5%86%99Loader.html" target="_blank" rel="noopener noreferrer">《深入浅出webpack - 编写 Loader》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="plugin"><a href="#plugin" class="header-anchor">#</a> Plugin</h2> <p><img src="/myblog/assets/img/Plugin总览.57af8134.png" alt="Plugin"></p> <h3 id="plugin-是什么"><a href="#plugin-是什么" class="header-anchor">#</a> <strong>Plugin 是什么？</strong></h3> <p>Webpack插件通常<strong>是一个JavaScript对象或类，它具有一些指定的方法或钩子</strong>（hooks）。Webpack在构建过程中会调用这些方法或钩子，从而允许开发人员在不同的构建阶段执行自定义逻辑。</p> <p>Webpack插件（Webpack plugins）是<strong>用于扩展和定制Webpack构建过程的模块</strong>。它们可以用来处理资源、优化输出、引入环境变量或者执行其他自定义操作。</p> <p>Webpack插件通过在Webpack<strong>构建流程的不同阶段注入自定义代码</strong>来修改构建行为。这些插件可以在Webpack的配置文件中配置并应用于特定的构建任务。</p> <p><img src="/myblog/assets/img/plugin.08b053b1.png" alt="img"></p> <h3 id="为什么要-plugin"><a href="#为什么要-plugin" class="header-anchor">#</a> <strong>为什么要 Plugin?</strong></h3> <p><strong>使用 Plugin 目的是解决<code>loader</code> 无法实现的其他事</strong></p> <p>通过使用插件，开发人员可以轻松地<strong>扩展和定制Webpack的功能</strong>，以满足特定的项目需求。</p> <p>一些常见的Webpack插件功能包括：</p> <ul><li><strong>资源优化</strong>：如压缩代码、混淆代码、拆分代码块、提取公共模块等。</li> <li><strong>文件处理</strong>：如处理图片、字体、样式文件等。</li> <li><strong>环境变量注入</strong>：根据构建环境注入不同的变量或配置。</li> <li><strong>代码检查</strong>：如ESLint或Stylelint等代码规范检查工具的集成。</li> <li><strong>HTML生成</strong>：生成HTML文件并自动注入构建后的资源。</li> <li><strong>自动化部署</strong>：将构建结果自动部署到远程服务器或发布到CDN等。</li></ul> <h3 id="plugin-怎么用"><a href="#plugin-怎么用" class="header-anchor">#</a> <strong>Plugin 怎么用？</strong></h3> <p>通过 <code>plugins</code> 属性来配置需要使用的插件列表的。</p> <p><code>plugins</code> 属性是一个数组，里面的每一项都是插件的一个实例，在实例化一个组件时可以通过构造函数传入这个组件支持的配置属性。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 通过 npm 安装</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 访问内置的插件</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProgressPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'./src/index.html'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="plugin-原理"><a href="#plugin-原理" class="header-anchor">#</a> <strong>Plugin 原理？</strong></h3> <h4 id="具有apply方法的对象"><a href="#具有apply方法的对象" class="header-anchor">#</a> <strong>具有<code>apply</code>方法的对象</strong></h4> <p>Plugin 其本质是一个<strong>具有<code>apply</code>方法<code>javascript</code>对象</strong></p> <p><code>apply</code> 方法会被 <code>webpack compiler</code>调用，并且在整个编译生命周期都可以访问 <code>compiler</code>对象，在 Webpack 运行的生命周期中会广播出许多事件，Plugin 可以通过 <code>compiler</code>对象监听 webpack 生命周期事件，在合适的时机通过 Webpack 提供的 API 改变输出结果。</p> <p>一个最基础的 Plugin 的代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">BasicPlugin</span><span class="token punctuation">{</span>
  <span class="token comment">// 在构造函数中获取用户给该插件传入的配置</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Webpack 会调用 BasicPlugin 实例的 apply 方法给插件实例传入 compiler 对象</span>
  <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//通过 `compiler`对象监听 webpack 生命周期事件</span>
    compiler<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">'compilation'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">compilation</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 导出 Plugin</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> BasicPlugin<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>在使用这个 Plugin 时，相关配置代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> BasicPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./BasicPlugin.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>export <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">BasicPlugin</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>过程：</strong></p> <ol><li><p>Webpack 启动后，在读取配置的过程中会先执行 <code>new BasicPlugin(options)</code> 初始化一个 BasicPlugin 获得其实例。</p></li> <li><p>在初始化 compiler 对象后，再调用 <code>basicPlugin.apply(compiler)</code> 给插件实例传入 compiler 对象。</p> <ul><li><blockquote><p>在 webpack 开始编译时，执行了<code>run</code>方法后，首先会触发<code>compile</code>，构建一个<code>Compilation</code>对象。详细参考 <a href="https://sewar-x.github.io/webpack/webpack%E6%9E%84%E5%BB%BA%E5%8E%9F%E7%90%86/#%E7%BC%96%E8%AF%91%E6%B5%81%E7%A8%8B" target="_blank" rel="noopener noreferrer">WebPack 原理解析 | Sewen 博客 (sewar-x.github.io)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote></li></ul></li> <li><p>插件实例在获取到 compiler 对象后，就可以通过 <code>compiler.plugin(事件名称, 回调函数)</code> 监听到 Webpack 广播出来的事件。 并且可以通过 compiler 对象去操作 Webpack。</p></li></ol> <h4 id="事件流机制"><a href="#事件流机制" class="header-anchor">#</a> <strong>事件流机制</strong></h4> <p>Webpack 就像一条生产线，要经过一系列处理流程后才能将源文件转换成输出结果。 这条生产线上的每个处理流程的职责都是单一的，多个流程之间有存在依赖关系，只有完成当前处理后才能交给下一个流程去处理。 插件就像是一个插入到生产线中的一个功能，在特定的时机对生产线上的资源做处理。</p> <p>Webpack 通过 <a href="https://github.com/webpack/tapable" target="_blank" rel="noopener noreferrer">Tapable<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 来组织这条复杂的生产线。 Webpack 在<strong>运行过程中会广播事件</strong>，插件只需要监听它所关心的事件，就能加入到这条生产线中，去改变生产线的运作。 Webpack 的事件流机制保证了插件的有序性，使得整个系统扩展性很好。</p> <p>Webpack 的事件流机制应用了观察者模式，和 Node.js 中的 EventEmitter 非常相似。 Compiler 和 Compilation 都继承自 Tapable，可以直接在 Compiler 和 Compilation 对象上广播和监听事件;</p> <p>Compiler 方法如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
* 广播出事件
* event-name 为事件名称，注意不要和现有的事件重名
* params 为附带的参数
*/</span>
<span class="token function">compiler</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token string">'event-name'</span><span class="token punctuation">,</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
* 监听名称为 event-name 的事件，当 event-name 事件发生时，函数就会被执行。
* 同时函数中的 params 参数为广播事件时附带的参数。
*/</span>
compiler<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">'event-name'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><blockquote><p><code>compiler hook</code> 的 <code>tap</code>方法的第一个参数，应是驼峰式命名的插件名称</p> <p>关于整个编译生命周期钩子，有如下：</p> <ul><li>entry-option ：初始化 option</li> <li>run</li> <li>compile： 真正开始的编译，在创建 compilation 对象之前</li> <li>compilation ：生成好了 compilation 对象</li> <li>make 从 entry 开始递归分析依赖，准备对每个模块进行 build</li> <li>after-compile： 编译 build 过程结束</li> <li>emit ：在将内存中 assets 内容写到磁盘文件夹之前</li> <li>after-emit ：在将内存中 assets 内容写到磁盘文件夹之后</li> <li>done： 完成所有的编译过程</li> <li>failed： 编译失败的时候</li></ul></blockquote> <p>同理，compilation.apply 和 compilation.plugin 使用方法和上面一致。</p> <blockquote><p>Compiler 和 Compilation 的区别在于：Compiler 代表了整个 Webpack 从启动到关闭的生命周期，而 Compilation 只是代表了一次新的编译。</p> <ul><li>Compiler 对象包含了 Webpack 环境所有的的配置信息，包含 options，loaders，plugins 这些信息，这个对象在 Webpack 启动时候被实例化，它是全局唯一的，可以简单地把它理解为 Webpack 实例;</li> <li>当 Webpack 以开发模式运行时，每当检测到一个文件变化，一次新的 Compilation 将被创建。Compilation 对象也提供了很多事件回调供插件做扩展。通过 Compilation 也能读取到 Compiler 对象。</li></ul> <p>详细参考<a href="https://sewar-x.github.io/webpack/webpack%E6%9E%84%E5%BB%BA%E5%8E%9F%E7%90%86/#%E7%BC%96%E8%AF%91%E6%B5%81%E7%A8%8B" target="_blank" rel="noopener noreferrer">WebPack 原理解析 | Sewen 博客 (sewar-x.github.io)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p>在开发插件时，还需要注意以下两点：</p> <ul><li><p>只要能拿到 Compiler 或 Compilation 对象，就能广播出新的事件，所以在新开发的插件中也能广播出事件，给其它插件监听使用。</p></li> <li><p>传给每个插件的 Compiler 和 Compilation 对象都是同一个引用。也就是说在一个插件中修改了 Compiler 或 Compilation 对象上的属性，会影响到后面的插件。</p></li> <li><p>有些事件是异步的，这些异步的事件会附带两个参数，第二个参数为回调函数，在插件处理完任务时需要调用回调函数通知 Webpack，才会进入下一处理流程。例如：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  compiler<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">'emit'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">compilation<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 支持处理逻辑</span>

    <span class="token comment">// 处理完毕后执行 callback 以通知 Webpack </span>
    <span class="token comment">// 如果不执行 callback，运行流程将会一直卡在这不往下执行 </span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul> <h3 id="plugin-常用-api"><a href="#plugin-常用-api" class="header-anchor">#</a> Plugin 常用 API</h3> <p>下面是一些常见Webpack Plugin 编写过程中常用的一些方法和属性，用于监听构建事件、操作资源文件、记录警告和错误信息等。</p> <table><thead><tr><th style="text-align:left;">API</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>apply(compiler)</code></td> <td style="text-align:left;">定义插件的入口方法，接收Webpack的<code>compiler</code>对象作为参数</td></tr> <tr><td style="text-align:left;"><code>compiler.hooks.&lt;hook&gt;.tap</code></td> <td style="text-align:left;">注册钩子函数，监听Webpack构建过程中的特定事件</td></tr> <tr><td style="text-align:left;"><code>compilation.hooks.&lt;hook&gt;.tap</code></td> <td style="text-align:left;">注册钩子函数，监听每次构建过程中的特定事件</td></tr> <tr><td style="text-align:left;"><code>compilation.assets</code></td> <td style="text-align:left;">用于操作构建过程中生成的资源文件，如添加、修改或删除生成的文件</td></tr> <tr><td style="text-align:left;"><code>compilation.errors</code></td> <td style="text-align:left;">记录构建过程中的错误信息</td></tr> <tr><td style="text-align:left;"><code>compilation.warnings</code></td> <td style="text-align:left;">记录构建过程中的警告信息</td></tr> <tr><td style="text-align:left;"><code>compilation.assets</code></td> <td style="text-align:left;">记录构建过程中生成的资源文件</td></tr> <tr><td style="text-align:left;"><code>compilation.chunks</code></td> <td style="text-align:left;">记录构建过程中生成的代码块</td></tr> <tr><td style="text-align:left;"><code>compilation.modules</code></td> <td style="text-align:left;">记录构建过程中的模块信息</td></tr> <tr><td style="text-align:left;"><code>compilation.dependencyGraph</code></td> <td style="text-align:left;">记录构建过程中的依赖关系图</td></tr> <tr><td style="text-align:left;"><code>compilation.addEntry</code></td> <td style="text-align:left;">添加入口文件到构建过程中，用于动态添加入口文件</td></tr> <tr><td style="text-align:left;"><code>compilation.addModule</code></td> <td style="text-align:left;">添加模块到构建过程中，用于动态添加模块</td></tr> <tr><td style="text-align:left;"><code>compilation.updateAsset</code></td> <td style="text-align:left;">更新构建过程中生成的资源文件</td></tr> <tr><td style="text-align:left;"><code>compilation.emitAsset</code></td> <td style="text-align:left;">添加额外的生成资源文件到构建过程中</td></tr> <tr><td style="text-align:left;"><code>compilation.errors.push</code></td> <td style="text-align:left;">向构建过程中的错误列表添加错误信息</td></tr> <tr><td style="text-align:left;"><code>compilation.warnings.push</code></td> <td style="text-align:left;">向构建过程中的警告列表添加警告信息</td></tr> <tr><td style="text-align:left;"><code>compilation.dependencyTemplates</code></td> <td style="text-align:left;">记录和操作构建过程中的依赖模板</td></tr></tbody></table> <h4 id="读取输出资源、代码块、模块及其依赖"><a href="#读取输出资源、代码块、模块及其依赖" class="header-anchor">#</a> 读取输出资源、代码块、模块及其依赖</h4> <p>有些插件可能需要读取 Webpack 的处理结果，例如输出资源、代码块、模块及其依赖，以便做下一步处理。</p> <p>在 <code>emit</code> 事件发生时，代表源文件的转换和组装已经完成，在这里可以读取到最终将输出的资源、代码块、模块及其依赖，并且可以修改输出资源的内容。</p> <ul><li><code>emit</code> 事件发生在 webpack 编译时，执行 run 方法时候触发，详细参考 <a href="https://sewar-x.github.io/webpack/webpack%E6%9E%84%E5%BB%BA%E5%8E%9F%E7%90%86/#%E7%BC%96%E8%AF%91%E6%B5%81%E7%A8%8B" target="_blank" rel="noopener noreferrer">WebPack 原理解析 | Sewen 博客 (sewar-x.github.io)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p><strong><code>compilation</code> API 如下：</strong></p> <h5 id="读取输出资源的api"><a href="#读取输出资源的api" class="header-anchor">#</a> <strong>读取输出资源的API</strong></h5> <table><thead><tr><th style="text-align:left;">API</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>compilation.assets</code></td> <td style="text-align:left;">访问构建过程中生成的资源文件，如获取、读取或操作生成的文件。</td></tr> <tr><td style="text-align:left;"><code>compilation.getAsset()</code></td> <td style="text-align:left;">获取指定名称的输出资源。</td></tr> <tr><td style="text-align:left;"><code>compilation.getAssets()</code></td> <td style="text-align:left;">获取所有输出资源的名称列表。</td></tr> <tr><td style="text-align:left;"><code>compilation.getAssetModule()</code></td> <td style="text-align:left;">获取指定资源所属的模块对象。</td></tr></tbody></table> <h5 id="读取代码块的api"><a href="#读取代码块的api" class="header-anchor">#</a> <strong>读取代码块的API</strong></h5> <table><thead><tr><th style="text-align:left;">API</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>compilation.chunks</code></td> <td style="text-align:left;"><strong>获取构建过程中生成的代码块列表。</strong></td></tr> <tr><td style="text-align:left;"><code>compilation.getChunk()</code></td> <td style="text-align:left;">获取指定名称或ID的代码块对象。</td></tr> <tr><td style="text-align:left;"><code>compilation.getChunkModules()</code></td> <td style="text-align:left;">获取指定代码块包含的模块列表。</td></tr> <tr><td style="text-align:left;"><code>compilation.chunkGraph</code></td> <td style="text-align:left;">获取代码块之间的依赖关系图。</td></tr></tbody></table> <h5 id="读取模块的api"><a href="#读取模块的api" class="header-anchor">#</a> <strong>读取模块的API</strong></h5> <table><thead><tr><th style="text-align:left;">API</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>compilation.modules</code></td> <td style="text-align:left;">获取构建过程中生成的模块列表。</td></tr> <tr><td style="text-align:left;"><code>compilation.getModule()</code></td> <td style="text-align:left;">获取指定模块对象。</td></tr> <tr><td style="text-align:left;"><code>compilation.moduleGraph</code></td> <td style="text-align:left;">获取模块之间的依赖关系图。</td></tr></tbody></table> <h5 id="读取模块依赖的api"><a href="#读取模块依赖的api" class="header-anchor">#</a> <strong>读取模块依赖的API</strong></h5> <table><thead><tr><th style="text-align:left;">API</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>compilation.dependencyGraph</code></td> <td style="text-align:left;">获取构建过程中的依赖关系图。</td></tr> <tr><td style="text-align:left;"><code>compilation.getDependency()</code></td> <td style="text-align:left;">获取指定依赖对象。</td></tr> <tr><td style="text-align:left;"><code>compilation.getModuleDependencies()</code></td> <td style="text-align:left;">获取指定模块的所有依赖列表。</td></tr> <tr><td style="text-align:left;"><code>compilation.getModuleIssuers()</code></td> <td style="text-align:left;">获取使用指定模块的所有代码块列表。</td></tr></tbody></table> <p>插件代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Plugin</span> <span class="token punctuation">{</span>
  <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    compiler<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">'emit'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">compilation<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// compilation.chunks 存放所有代码块，是一个数组</span>
      compilation<span class="token punctuation">.</span>chunks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">chunk</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// chunk 代表一个代码块</span>
        <span class="token comment">// 代码块由多个模块组成，通过 chunk.forEachModule 能读取组成代码块的每个模块</span>
        chunk<span class="token punctuation">.</span><span class="token function">forEachModule</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// module 代表一个模块</span>
          <span class="token comment">// module.fileDependencies 存放当前模块的所有依赖的文件路径，是一个数组</span>
          module<span class="token punctuation">.</span>fileDependencies<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">filepath</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Webpack 会根据 Chunk 去生成输出的文件资源，每个 Chunk 都对应一个及其以上的输出文件</span>
        <span class="token comment">// 例如在 Chunk 中包含了 CSS 模块并且使用了 ExtractTextPlugin 时，</span>
        <span class="token comment">// 该 Chunk 就会生成 .js 和 .css 两个文件</span>
        chunk<span class="token punctuation">.</span>files<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">filename</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// compilation.assets 存放当前所有即将输出的资源</span>
          <span class="token comment">// 调用一个输出资源的 source() 方法能获取到输出资源的内容</span>
          <span class="token keyword">let</span> source <span class="token operator">=</span> compilation<span class="token punctuation">.</span>assets<span class="token punctuation">[</span>filename<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// 这是一个异步事件，要记得调用 callback 通知 Webpack 本次事件监听处理结束。</span>
      <span class="token comment">// 如果忘记了调用 callback，Webpack 将一直卡在这里而不会往后执行。</span>
      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h4 id="监听文件变化"><a href="#监听文件变化" class="header-anchor">#</a> 监听文件变化</h4> <p>Webpack 会从配置的入口模块出发，依次找出所有的依赖模块，当入口模块或者其依赖的模块发生变化时， 就会触发一次新的 Compilation。</p> <p>在开发插件时经常需要知道是哪个文件发生变化导致了新的 Compilation，通过监听<code>watch-run</code> 事件中 <code>watching.compiler.watchFileSystem.watcher.mtimes</code> 获取发生变化的文件列表</p> <p>为此可以使用如下代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 当依赖的文件发生变化时会触发 watch-run 事件</span>
compiler<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">'watch-run'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">watching<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取发生变化的文件列表</span>
    <span class="token keyword">const</span> changedFiles <span class="token operator">=</span> watching<span class="token punctuation">.</span>compiler<span class="token punctuation">.</span>watchFileSystem<span class="token punctuation">.</span>watcher<span class="token punctuation">.</span>mtimes<span class="token punctuation">;</span>
    <span class="token comment">// changedFiles 格式为键值对，键为发生变化的文件路径。</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>changedFiles<span class="token punctuation">[</span>filePath<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// filePath 对应的文件发生了变化</span>
    <span class="token punctuation">}</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><blockquote><ul><li><code>watch-run</code> 发生在启动一次新的编译时候，在编译阶段执行。（详细参考 <a href="https://sewar-x.github.io/webpack/webpack%E6%9E%84%E5%BB%BA%E5%8E%9F%E7%90%86/#%E7%BC%96%E8%AF%91%E6%B5%81%E7%A8%8B" target="_blank" rel="noopener noreferrer">WebPack 原理解析 | Sewen 博客 (sewar-x.github.io)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）</li> <li><code>watch-run</code> 是在监听模式下启动的编译，在这个事件中可以获取到是哪些文件发生了变化导致重新启动一次新的编译。</li></ul></blockquote> <p><strong>监听 HTML 文件的变化：</strong></p> <p>默认情况下 Webpack 只会监视入口和其依赖的模块是否发生变化。</p> <p>在有些情况下项目可能需要引入新的文件，例如引入一个 HTML 文件。 由于 JavaScript 文件不会去导入 HTML 文件，Webpack 就不会监听 HTML 文件的变化，编辑 HTML 文件时就不会重新触发新的 Compilation。</p> <p>为了监听 HTML 文件的变化，我们需要把 HTML 文件加入到依赖列表中，为此可以使用如下代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>compiler<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">'after-compile'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">compilation<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 把 HTML 文件添加到文件依赖列表，好让 Webpack 去监听 HTML 模块文件，在 HTML 模版文件发生变化时重新启动一次编译</span>
    compilation<span class="token punctuation">.</span>fileDependencies<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p><code>after-compile</code> 发生在一次 Compilation 执行完成。在开始编译阶段，执行 run 方法中执行。</p></blockquote> <h4 id="修改输出资源"><a href="#修改输出资源" class="header-anchor">#</a> 修改输出资源</h4> <p>有些场景下插件需要修改、增加、删除输出的资源，要做到这点需要监听 <code>emit</code> 事件</p> <p>因为发生 <code>emit</code> 事件时所有模块的转换和代码块对应的文件已经生成好， 需要输出的资源即将输出，因此 <code>emit</code> 事件是修改 Webpack 输出资源的最后时机。（<code>emit</code> 事件时将各个模块或chunk输出到结果文件）</p> <p>所有需要输出的资源会存放在 <code>compilation.assets</code> 中，<code>compilation.assets</code> 是一个键值对，键为需要输出的文件名称，值为文件对应的内容。</p> <p>设置 <code>compilation.assets</code> 的代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>compiler<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">'emit'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">compilation<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 设置名称为 fileName 的输出资源</span>
  compilation<span class="token punctuation">.</span>assets<span class="token punctuation">[</span>fileName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 返回文件内容</span>
    <span class="token function-variable function">source</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// fileContent 既可以是代表文本文件的字符串，也可以是代表二进制文件的 Buffer</span>
      <span class="token keyword">return</span> fileContent<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 返回文件大小</span>
      <span class="token function-variable function">size</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> Buffer<span class="token punctuation">.</span><span class="token function">byteLength</span><span class="token punctuation">(</span>fileContent<span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>读取 <code>compilation.assets</code> 的代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>compiler<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">'emit'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">compilation<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 读取名称为 fileName 的输出资源</span>
  <span class="token keyword">const</span> asset <span class="token operator">=</span> compilation<span class="token punctuation">.</span>assets<span class="token punctuation">[</span>fileName<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">// 获取输出资源的内容</span>
  asset<span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 获取输出资源的文件大小</span>
  asset<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="判断-webpack-使用了哪些插件"><a href="#判断-webpack-使用了哪些插件" class="header-anchor">#</a> 判断 Webpack 使用了哪些插件</h4> <p>在开发一个插件时可能需要根据当前配置是否使用了其它某个插件而做下一步决定，因此需要读取 Webpack 当前的插件配置情况。</p> <p>通过 <code>compiler.options.plugins</code> 获取当前配置所有使用的插件列表；</p> <p>以判断当前是否使用了 ExtractTextPlugin 为例，可以使用如下代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 判断当前配置使用使用了 ExtractTextPlugin，</span>
<span class="token comment">// compiler 参数即为 Webpack 在 apply(compiler) 中传入的参数</span>
<span class="token keyword">function</span> <span class="token function">hasExtractTextPlugin</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 当前配置所有使用的插件列表</span>
  <span class="token keyword">const</span> plugins <span class="token operator">=</span> compiler<span class="token punctuation">.</span>options<span class="token punctuation">.</span>plugins<span class="token punctuation">;</span>
  <span class="token comment">// 去 plugins 中寻找有没有 ExtractTextPlugin 的实例</span>
  <span class="token keyword">return</span> plugins<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">plugin</span><span class="token operator">=&gt;</span>plugin<span class="token punctuation">.</span><span class="token class-name">__proto__</span><span class="token punctuation">.</span>constructor <span class="token operator">===</span> ExtractTextPlugin<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="手写-plugin"><a href="#手写-plugin" class="header-anchor">#</a> <strong>手写 Plugin</strong></h3> <p><strong>Plugin 规范：</strong></p> <ul><li>插件必须是一个函数或者是一个<strong>包含 <code>apply</code> 方法的对象</strong>，这样才能访问<code>compiler</code>实例;</li> <li>传给每个插件的 <code>compiler</code> 和 <code>compilation</code> 对象都是同一个引用，因此不建议修改;</li> <li>异步的事件需要在插件处理完任务时调用回调函数通知 <code>Webpack</code> 进入下一个流程，不然会卡住;</li></ul> <p><strong>题目：</strong></p> <blockquote><p>实现一个EndWebpackPlugin，该插件作用是在 Webpack 即将退出时再附加一些额外的操作，例如在 Webpack 成功编译和输出了文件后执行发布操作把输出的文件上传到服务器。 同时该插件还能区分 Webpack 构建是否执行成功。</p></blockquote> <p>使用该插件时方法：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token comment">// 在初始化 EndWebpackPlugin 时传入了两个参数，分别是在成功时的回调函数和失败时的回调函数；</span>
    <span class="token keyword">new</span> <span class="token class-name">EndWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// Webpack 构建成功，并且文件输出了后会执行到这里，在这里可以做发布文件操作</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// Webpack 构建失败，err 是导致错误的原因</span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>        
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>分析：</strong></p> <p>webpack 插件实际就是一个具有 apply 方法的对象，<code>apply</code> 方法会被 <code>webpack compiler</code>调用，并且在整个编译生命周期都可以访问 <code>compiler</code>对象。</p> <p>要实现该插件，需要监听 webpack 的两个事件：</p> <ul><li><p><strong>done</strong>：在成功构建并且输出了文件后，Webpack 即将退出时发生；</p></li> <li><p><strong>failed</strong>：在构建出现异常导致构建失败，Webpack 即将退出时发生；</p></li></ul> <p><strong>实现</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">EndWebpackPlugin</span> <span class="token punctuation">{</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">doneCallback<span class="token punctuation">,</span> failCallback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 存下在构造函数中传入的回调函数</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>doneCallback <span class="token operator">=</span> doneCallback<span class="token punctuation">;</span> <span class="token comment">// 成功构建并且输出了文件后，Webpack 即将退出时回调</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>failCallback <span class="token operator">=</span> failCallback<span class="token punctuation">;</span><span class="token comment">// 在构建出现异常导致构建失败，Webpack 即将退出时回调</span>
  <span class="token punctuation">}</span>

  <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    compiler<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">'done'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">stats</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 在 webpack done 事件中回调 doneCallback</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">doneCallback</span><span class="token punctuation">(</span>stats<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    compiler<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">'failed'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// 在 webpack failed 事件中回调 failCallback</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">failCallback</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 导出插件 </span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> EndWebpackPlugin<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="常见的-plugin"><a href="#常见的-plugin" class="header-anchor">#</a> 常见的 Plugin</h3> <h4 id="htmlwebpackplugin"><a href="#htmlwebpackplugin" class="header-anchor">#</a> <strong>HtmlWebpackPlugin</strong></h4> <p>在打包结束后，⾃动生成⼀个 <code>html</code> 文件，并把打包生成的<code>js</code> 模块引⼊到该 <code>html</code> 中</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev html-webpack-plugin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;html-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
 <span class="token operator">...</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
     <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
       <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;My App&quot;</span><span class="token punctuation">,</span>
       <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;app.html&quot;</span><span class="token punctuation">,</span>
       <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">&quot;./src/html/index.html&quot;</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span> 
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!--./src/html/index.html--&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ie=edge<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>&lt;%=htmlWebpackPlugin.options.title%&gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>html-webpack-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>在 <code>html</code> 模板中，可以通过 <code>&lt;%=htmlWebpackPlugin.options.XXX%&gt;</code> 的方式获取配置的值</p> <h4 id="clean-webpack-plugin"><a href="#clean-webpack-plugin" class="header-anchor">#</a> <strong>clean-webpack-plugin</strong></h4> <p>删除（清理）构建目录</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev clean-webpack-plugin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>CleanWebpackPlugin<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'clean-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
 <span class="token operator">...</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token operator">...</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="mini-css-extract-plugin"><a href="#mini-css-extract-plugin" class="header-anchor">#</a> <strong>mini-css-extract-plugin</strong></h4> <p>提取 <code>CSS</code> 到一个单独的文件中</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev mini-css-extract-plugin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mini-css-extract-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...,</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
   <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
     <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.s[ac]ss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
     <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
       <span class="token literal-property property">loader</span><span class="token operator">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'sass-loader'</span>
        <span class="token punctuation">]</span>
   <span class="token punctuation">}</span>
   <span class="token punctuation">]</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">//...,</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
     <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">'[name].css'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h4 id="defineplugin"><a href="#defineplugin" class="header-anchor">#</a> DefinePlugin</h4> <p>允许在编译时创建配置的全局对象，是一个<code>webpack</code>内置的插件，不需要安装</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> DefinePlugun <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token constant">BASE_URL</span><span class="token operator">:</span><span class="token string">'&quot;./&quot;'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>这时候编译<code>template</code>模块的时候，就能通过下述形式获取全局对象</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>&lt;link rel=&quot;icon&quot; href=&quot;&lt;%= BASE_URL%&gt;favicon.ico&gt;&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="copy-webpack-plugin"><a href="#copy-webpack-plugin" class="header-anchor">#</a> copy-webpack-plugin</h4> <p>复制文件或目录到执行区域，如<code>vue</code>的打包过程中，如果我们将一些文件放到<code>public</code>的目录下，那么这个目录会被复制到<code>dist</code>文件夹中</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>npm install copy-webpack-plugin -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">CopyWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">parrerns</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token literal-property property">from</span><span class="token operator">:</span><span class="token string">&quot;public&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">globOptions</span><span class="token operator">:</span><span class="token punctuation">{</span>
                <span class="token literal-property property">ignore</span><span class="token operator">:</span><span class="token punctuation">[</span>
                    <span class="token string">'**/index.html'</span>
                <span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>复制的规则在<code>patterns</code>属性中设置：</p> <ul><li>from：设置从哪一个源中开始复制</li> <li>to：复制到的位置，可以省略，会默认复制到打包的目录下</li> <li>globOptions：设置一些额外的选项，其中可以编写需要忽略的文件</li></ul> <h2 id="plugin-与-loader-区别"><a href="#plugin-与-loader-区别" class="header-anchor">#</a> <strong>Plugin 与 Loader 区别？</strong></h2> <p>Webpack插件（Webpack plugins）和加载器（loaders）在Webpack中扮演不同的角色，各自有不同的功能和用途。</p> <p><strong>Plugin 的作用</strong>：
Plugin 用于<strong>扩展和定制Webpack的构建过程</strong>。</p> <p>它们可以对打包结果进行优化、自动化任务、资源管理等。插件通过在Webpack构建流程的不同阶段注入自定义代码来修改构建行为。例如，可以使用插件来压缩代码、拆分代码块、生成HTML文件、提取CSS等。插件是通过实现Webpack插件接口的JavaScript对象或类来定义的，它们具有一些指定的方法或钩子（hooks），Webpack在构建过程中会调用这些方法或钩子。</p> <p><strong>Loader 的作用</strong>：
Loader 用于<strong>处理非JavaScript资源</strong>，例如处理样式表、图片、字体等文件。</p> <p>加载器可以将这些资源转换为Webpack可处理的模块，并将它们添加到依赖图中。加载器是通过使用正则表达式匹配特定类型的文件，并将其传递给相应的加载器进行处理的。加载器可以对资源进行转换、压缩、优化等操作，将其转换为可在JavaScript模块中导入的形式。</p> <p><strong>区别：</strong></p> <ul><li><strong>Plugin 改变 webpack 输出结果</strong>：在<code>Webpack</code> 运行的生命周期中会广播出许多事件，<code>Plugin</code> 可以监听这些事件，在合适的时机通过<code>Webpack</code>提供的 <code>API</code>改变输出结果</li> <li><code>loader</code>，实质是一个转换器，将A文件进行编译形成B文件，操作的是文件。比如将<code>A.scss</code>或<code>A.less</code>转变为<code>B.css</code>，单纯的文件转换过程；</li></ul> <p>两者在运行时机上的区别：</p> <ul><li>loader 运行在打包文件之前</li> <li>plugins 在整个编译周期都起作用</li></ul> <table><thead><tr><th>特点</th> <th>Plugin</th> <th>Loader</th></tr></thead> <tbody><tr><td>功能和用途</td> <td>扩展和定制Webpack构建过程，对打包结果进行优化、自动化任务、资源管理等</td> <td>将非JavaScript资源转换为Webpack可处理的模块，如样式表、图片、字体等</td></tr> <tr><td>配置方式</td> <td>在Webpack配置文件中实例化并配置</td> <td>在模块规则中配置</td></tr> <tr><td>处理对象</td> <td>操作Webpack的编译对象和输出结果</td> <td>处理特定类型的文件</td></tr> <tr><td>调用时机</td> <td>在Webpack构建流程的不同阶段被调用</td> <td>文件被引入时被调用</td></tr> <tr><td>示例</td> <td>UglifyJsPlugin、HtmlWebpackPlugin等</td> <td>css-loader、file-loader、babel-loader等</td></tr> <tr><td>文件扩展和匹配规则</td> <td>不涉及文件扩展和匹配规则</td> <td>通过正则表达式匹配特定类型的文件</td></tr></tbody></table></div> <!----> <div class="content__content-bottom"></div> <footer class="page-meta"><!----> <div class="meta-item update-time"><span class="label">Last update:</span> <span class="info">January 30, 2024 09:47</span></div> <div class="meta-item contributors"><span class="label">Contributors: </span> <span class="info"><span title="email: 596777598@qq.com" class="contributor">
          sewar
        </span> <!----></span></div></footer> <!----> <!----> <!----> <div class="content__page-bottom"></div></main> <!----></div><div class="global-ui"><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="Close" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">This app can be installed on your PC or mobile device.  This will allow this web app to look and behave like any other installed app.  You will find it in your app lists and be able to pin it to your home screen, start menus or task bars.  This installed web app will also be able to safely interact with other apps and your operating system. </p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>Description</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        Install <span></span></button> <button class="cancel-button">
        Cancel
      </button></div></div></div></div><!----><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button title="Close" aria-label="Close" class="pswp__button pswp__button--close"></button> <button title="Share" aria-label="Share" class="pswp__button pswp__button--share"></button> <button title="Switch to full screen" aria-label="Switch to full screen" class="pswp__button pswp__button--fs"></button> <button title="Zoom in/out" aria-label="Zoom in/out" class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button title="Prev (Arrow Left)" aria-label="Prev (Arrow Left)" class="pswp__button pswp__button--arrow--left"></button> <button title="Next (Arrow Right)" aria-label="Next (Arrow Right)" class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></div></div>
    <script src="/myblog/assets/js/app.9d2b617a.js" defer></script><script src="/myblog/assets/js/layout-Layout.d2d4ce64.js" defer></script><script src="/myblog/assets/js/page-Loader和Plugin原理.b2971b76.js" defer></script><script src="/myblog/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-components/Blog/BlogHome~layout-components/~2222f443.5835591a.js" defer></script>
  </body>
</html>
